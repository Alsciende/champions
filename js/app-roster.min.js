(function(){function t(t){function e(e,r,a,o,n,i){for(;n>=0&&i>n;n+=t){var s=o?o[n]:n;a=r(a,e[s],s,e)}return a}return function(r,a,o,n){a=y(a,n,4);var i=!_(r)&&v.keys(r),s=(i||r).length,c=t>0?0:s-1;return arguments.length<3&&(o=r[i?i[c]:c],c+=t),e(r,a,o,i,c,s)}}function e(t){return function(e,r,a){r=C(r,a);for(var o=A(e),n=t>0?0:o-1;n>=0&&o>n;n+=t)if(r(e[n],n,e))return n;return-1}}function r(t,e,r){return function(a,o,n){var i=0,s=A(a);if("number"==typeof n)t>0?i=n>=0?n:Math.max(n+s,i):s=n>=0?Math.min(n+1,s):n+s+1;else if(r&&n&&s)return n=r(a,o),a[n]===o?n:-1;if(o!==o)return n=e(f.call(a,i,s),v.isNaN),n>=0?n+i:-1;for(n=t>0?i:s-1;n>=0&&s>n;n+=t)if(a[n]===o)return n;return-1}}function a(t,e){var r=z.length,a=t.constructor,o=v.isFunction(a)&&a.prototype||s,n="constructor";for(v.has(t,n)&&!v.contains(e,n)&&e.push(n);r--;)n=z[r],n in t&&t[n]!==o[n]&&!v.contains(e,n)&&e.push(n)}var o=this,n=o._,i=Array.prototype,s=Object.prototype,c=Function.prototype,d=i.push,f=i.slice,l=s.toString,m=s.hasOwnProperty,u=Array.isArray,h=Object.keys,p=c.bind,g=Object.create,I=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):o._=v,v.VERSION="1.8.3";var y=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,o){return t.call(e,r,a,o)};case 4:return function(r,a,o,n){return t.call(e,r,a,o,n)}}return function(){return t.apply(e,arguments)}},C=function(t,e,r){return null==t?v.identity:v.isFunction(t)?y(t,e,r):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return C(t,e,1/0)};var S=function(t,e){return function(r){var a=arguments.length;if(2>a||null==r)return r;for(var o=1;a>o;o++)for(var n=arguments[o],i=t(n),s=i.length,c=0;s>c;c++){var d=i[c];e&&void 0!==r[d]||(r[d]=n[d])}return r}},w=function(t){if(!v.isObject(t))return{};if(g)return g(t);I.prototype=t;var e=new I;return I.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},b=Math.pow(2,53)-1,A=k("length"),_=function(t){var e=A(t);return"number"==typeof e&&e>=0&&b>=e};v.each=v.forEach=function(t,e,r){e=y(e,r);var a,o;if(_(t))for(a=0,o=t.length;o>a;a++)e(t[a],a,t);else{var n=v.keys(t);for(a=0,o=n.length;o>a;a++)e(t[n[a]],n[a],t)}return t},v.map=v.collect=function(t,e,r){e=C(e,r);for(var a=!_(t)&&v.keys(t),o=(a||t).length,n=Array(o),i=0;o>i;i++){var s=a?a[i]:i;n[i]=e(t[s],s,t)}return n},v.reduce=v.foldl=v.inject=t(1),v.reduceRight=v.foldr=t(-1),v.find=v.detect=function(t,e,r){var a;return a=_(t)?v.findIndex(t,e,r):v.findKey(t,e,r),void 0!==a&&-1!==a?t[a]:void 0},v.filter=v.select=function(t,e,r){var a=[];return e=C(e,r),v.each(t,function(t,r,o){e(t,r,o)&&a.push(t)}),a},v.reject=function(t,e,r){return v.filter(t,v.negate(C(e)),r)},v.every=v.all=function(t,e,r){e=C(e,r);for(var a=!_(t)&&v.keys(t),o=(a||t).length,n=0;o>n;n++){var i=a?a[n]:n;if(!e(t[i],i,t))return!1}return!0},v.some=v.any=function(t,e,r){e=C(e,r);for(var a=!_(t)&&v.keys(t),o=(a||t).length,n=0;o>n;n++){var i=a?a[n]:n;if(e(t[i],i,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,r,a){return _(t)||(t=v.values(t)),("number"!=typeof r||a)&&(r=0),v.indexOf(t,e,r)>=0},v.invoke=function(t,e){var r=f.call(arguments,2),a=v.isFunction(e);return v.map(t,function(t){var o=a?e:t[e];return null==o?o:o.apply(t,r)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,r){var a,o,n=-(1/0),i=-(1/0);if(null==e&&null!=t){t=_(t)?t:v.values(t);for(var s=0,c=t.length;c>s;s++)a=t[s],a>n&&(n=a)}else e=C(e,r),v.each(t,function(t,r,a){o=e(t,r,a),(o>i||o===-(1/0)&&n===-(1/0))&&(n=t,i=o)});return n},v.min=function(t,e,r){var a,o,n=1/0,i=1/0;if(null==e&&null!=t){t=_(t)?t:v.values(t);for(var s=0,c=t.length;c>s;s++)a=t[s],n>a&&(n=a)}else e=C(e,r),v.each(t,function(t,r,a){o=e(t,r,a),(i>o||o===1/0&&n===1/0)&&(n=t,i=o)});return n},v.shuffle=function(t){for(var e,r=_(t)?t:v.values(t),a=r.length,o=Array(a),n=0;a>n;n++)e=v.random(0,n),e!==n&&(o[n]=o[e]),o[e]=r[n];return o},v.sample=function(t,e,r){return null==e||r?(_(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,r){return e=C(e,r),v.pluck(v.map(t,function(t,r,a){return{value:t,index:r,criteria:e(t,r,a)}}).sort(function(t,e){var r=t.criteria,a=e.criteria;if(r!==a){if(r>a||void 0===r)return 1;if(a>r||void 0===a)return-1}return t.index-e.index}),"value")};var x=function(t){return function(e,r,a){var o={};return r=C(r,a),v.each(e,function(a,n){var i=r(a,n,e);t(o,a,i)}),o}};v.groupBy=x(function(t,e,r){v.has(t,r)?t[r].push(e):t[r]=[e]}),v.indexBy=x(function(t,e,r){t[r]=e}),v.countBy=x(function(t,e,r){v.has(t,r)?t[r]++:t[r]=1}),v.toArray=function(t){return t?v.isArray(t)?f.call(t):_(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:_(t)?t.length:v.keys(t).length},v.partition=function(t,e,r){e=C(e,r);var a=[],o=[];return v.each(t,function(t,r,n){(e(t,r,n)?a:o).push(t)}),[a,o]},v.first=v.head=v.take=function(t,e,r){return null==t?void 0:null==e||r?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,r){return f.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},v.last=function(t,e,r){return null==t?void 0:null==e||r?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,r){return f.call(t,null==e||r?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var $=function(t,e,r,a){for(var o=[],n=0,i=a||0,s=A(t);s>i;i++){var c=t[i];if(_(c)&&(v.isArray(c)||v.isArguments(c))){e||(c=$(c,e,r));var d=0,f=c.length;for(o.length+=f;f>d;)o[n++]=c[d++]}else r||(o[n++]=c)}return o};v.flatten=function(t,e){return $(t,e,!1)},v.without=function(t){return v.difference(t,f.call(arguments,1))},v.uniq=v.unique=function(t,e,r,a){v.isBoolean(e)||(a=r,r=e,e=!1),null!=r&&(r=C(r,a));for(var o=[],n=[],i=0,s=A(t);s>i;i++){var c=t[i],d=r?r(c,i,t):c;e?(i&&n===d||o.push(c),n=d):r?v.contains(n,d)||(n.push(d),o.push(c)):v.contains(o,c)||o.push(c)}return o},v.union=function(){return v.uniq($(arguments,!0,!0))},v.intersection=function(t){for(var e=[],r=arguments.length,a=0,o=A(t);o>a;a++){var n=t[a];if(!v.contains(e,n)){for(var i=1;r>i&&v.contains(arguments[i],n);i++);i===r&&e.push(n)}}return e},v.difference=function(t){var e=$(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,A).length||0,r=Array(e),a=0;e>a;a++)r[a]=v.pluck(t,a);return r},v.object=function(t,e){for(var r={},a=0,o=A(t);o>a;a++)e?r[t[a]]=e[a]:r[t[a][0]]=t[a][1];return r},v.findIndex=e(1),v.findLastIndex=e(-1),v.sortedIndex=function(t,e,r,a){r=C(r,a,1);for(var o=r(e),n=0,i=A(t);i>n;){var s=Math.floor((n+i)/2);r(t[s])<o?n=s+1:i=s}return n},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(t,e,r){null==e&&(e=t||0,t=0),r=r||1;for(var a=Math.max(Math.ceil((e-t)/r),0),o=Array(a),n=0;a>n;n++,t+=r)o[n]=t;return o};var T=function(t,e,r,a,o){if(!(a instanceof e))return t.apply(r,o);var n=w(t.prototype),i=t.apply(n,o);return v.isObject(i)?i:n};v.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,f.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var r=f.call(arguments,2),a=function(){return T(t,a,e,this,r.concat(f.call(arguments)))};return a},v.partial=function(t){var e=f.call(arguments,1),r=function(){for(var a=0,o=e.length,n=Array(o),i=0;o>i;i++)n[i]=e[i]===v?arguments[a++]:e[i];for(;a<arguments.length;)n.push(arguments[a++]);return T(t,r,this,this,n)};return r},v.bindAll=function(t){var e,r,a=arguments.length;if(1>=a)throw new Error("bindAll must be passed function names");for(e=1;a>e;e++)r=arguments[e],t[r]=v.bind(t[r],t);return t},v.memoize=function(t,e){var r=function(a){var o=r.cache,n=""+(e?e.apply(this,arguments):a);return v.has(o,n)||(o[n]=t.apply(this,arguments)),o[n]};return r.cache={},r},v.delay=function(t,e){var r=f.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,r){var a,o,n,i=null,s=0;r||(r={});var c=function(){s=r.leading===!1?0:v.now(),i=null,n=t.apply(a,o),i||(a=o=null)};return function(){var d=v.now();s||r.leading!==!1||(s=d);var f=e-(d-s);return a=this,o=arguments,0>=f||f>e?(i&&(clearTimeout(i),i=null),s=d,n=t.apply(a,o),i||(a=o=null)):i||r.trailing===!1||(i=setTimeout(c,f)),n}},v.debounce=function(t,e,r){var a,o,n,i,s,c=function(){var d=v.now()-i;e>d&&d>=0?a=setTimeout(c,e-d):(a=null,r||(s=t.apply(n,o),a||(n=o=null)))};return function(){n=this,o=arguments,i=v.now();var d=r&&!a;return a||(a=setTimeout(c,e)),d&&(s=t.apply(n,o),n=o=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,a=t[e].apply(this,arguments);r--;)a=t[r].call(this,a);return a}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=null),r}},v.once=v.partial(v.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(t){if(!v.isObject(t))return[];if(h)return h(t);var e=[];for(var r in t)v.has(t,r)&&e.push(r);return j&&a(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var r in t)e.push(r);return j&&a(t,e),e},v.values=function(t){for(var e=v.keys(t),r=e.length,a=Array(r),o=0;r>o;o++)a[o]=t[e[o]];return a},v.mapObject=function(t,e,r){e=C(e,r);for(var a,o=v.keys(t),n=o.length,i={},s=0;n>s;s++)a=o[s],i[a]=e(t[a],a,t);return i},v.pairs=function(t){for(var e=v.keys(t),r=e.length,a=Array(r),o=0;r>o;o++)a[o]=[e[o],t[e[o]]];return a},v.invert=function(t){for(var e={},r=v.keys(t),a=0,o=r.length;o>a;a++)e[t[r[a]]]=r[a];return e},v.functions=v.methods=function(t){var e=[];for(var r in t)v.isFunction(t[r])&&e.push(r);return e.sort()},v.extend=S(v.allKeys),v.extendOwn=v.assign=S(v.keys),v.findKey=function(t,e,r){e=C(e,r);for(var a,o=v.keys(t),n=0,i=o.length;i>n;n++)if(a=o[n],e(t[a],a,t))return a},v.pick=function(t,e,r){var a,o,n={},i=t;if(null==i)return n;v.isFunction(e)?(o=v.allKeys(i),a=y(e,r)):(o=$(arguments,!1,!1,1),a=function(t,e,r){return e in r},i=Object(i));for(var s=0,c=o.length;c>s;s++){var d=o[s],f=i[d];a(f,d,i)&&(n[d]=f)}return n},v.omit=function(t,e,r){if(v.isFunction(e))e=v.negate(e);else{var a=v.map($(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(a,e)}}return v.pick(t,e,r)},v.defaults=S(v.allKeys,!0),v.create=function(t,e){var r=w(t);return e&&v.extendOwn(r,e),r},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var r=v.keys(e),a=r.length;if(null==t)return!a;for(var o=Object(t),n=0;a>n;n++){var i=r[n];if(e[i]!==o[i]||!(i in o))return!1}return!0};var M=function(t,e,r,a){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var n="[object Array]"===o;if(!n){if("object"!=typeof t||"object"!=typeof e)return!1;var i=t.constructor,s=e.constructor;if(i!==s&&!(v.isFunction(i)&&i instanceof i&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],a=a||[];for(var c=r.length;c--;)if(r[c]===t)return a[c]===e;if(r.push(t),a.push(e),n){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!M(t[c],e[c],r,a))return!1}else{var d,f=v.keys(t);if(c=f.length,v.keys(e).length!==c)return!1;for(;c--;)if(d=f[c],!v.has(e,d)||!M(t[d],e[d],r,a))return!1}return r.pop(),a.pop(),!0};v.isEqual=function(t,e){return M(t,e)},v.isEmpty=function(t){return null==t?!0:_(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=u||function(t){return"[object Array]"===l.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&m.call(t,e)},v.noConflict=function(){return o._=n,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=k,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,r){var a=Array(Math.max(0,t));e=y(e,r,1);for(var o=0;t>o;o++)a[o]=e(o);return a},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=v.invert(P),E=function(t){var e=function(e){return t[e]},r="(?:"+v.keys(t).join("|")+")",a=RegExp(r),o=RegExp(r,"g");return function(t){return t=null==t?"":""+t,a.test(t)?t.replace(o,e):t}};v.escape=E(P),v.unescape=E(B),v.result=function(t,e,r){var a=null==t?void 0:t[e];return void 0===a&&(a=r),v.isFunction(a)?a.call(t):a};var V=0;v.uniqueId=function(t){var e=++V+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,W=function(t){return"\\"+D[t]};v.template=function(t,e,r){!e&&r&&(e=r),e=v.defaults({},e,v.templateSettings);var a=RegExp([(e.escape||O).source,(e.interpolate||O).source,(e.evaluate||O).source].join("|")+"|$","g"),o=0,n="__p+='";t.replace(a,function(e,r,a,i,s){return n+=t.slice(o,s).replace(N,W),o=s+e.length,r?n+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":a?n+="'+\n((__t=("+a+"))==null?'':__t)+\n'":i&&(n+="';\n"+i+"\n__p+='"),e}),n+="';\n",e.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+n+"return __p;\n";try{var i=new Function(e.variable||"obj","_",n)}catch(s){throw s.source=n,s}var c=function(t){return i.call(this,t,v)},d=e.variable||"obj";return c.source="function("+d+"){\n"+n+"}",c},v.chain=function(t){var e=v(t);return e._chain=!0,e};var H=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var r=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),H(this,r.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];v.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],H(this,r)}}),v.each(["concat","join","slice"],function(t){var e=i[t];v.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(r,a,o){e.Backbone=t(e,o,r,a)});else if("undefined"!=typeof exports){var r,a=require("underscore");try{r=require("jquery")}catch(o){}t(e,exports,a,r)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,r,a){var o=t.Backbone,n=Array.prototype.slice;e.VERSION="1.2.3",e.$=a,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var i=function(t,e,a){switch(t){case 1:return function(){return r[e](this[a])};case 2:return function(t){return r[e](this[a],t)};case 3:return function(t,o){return r[e](this[a],c(t,this),o)};case 4:return function(t,o,n){return r[e](this[a],c(t,this),o,n)};default:return function(){var t=n.call(arguments);return t.unshift(this[a]),r[e].apply(r,t)}}},s=function(t,e,a){r.each(e,function(e,o){r[o]&&(t.prototype[o]=i(e,o,a))})},c=function(t,e){return r.isFunction(t)?t:r.isObject(t)&&!e._isModel(t)?d(t):r.isString(t)?function(e){return e.get(t)}:t},d=function(t){var e=r.matches(t);return function(t){return e(t.attributes)}},f=e.Events={},l=/\s+/,m=function(t,e,a,o,n){var i,s=0;if(a&&"object"==typeof a){void 0!==o&&"context"in n&&void 0===n.context&&(n.context=o);for(i=r.keys(a);s<i.length;s++)e=m(t,e,i[s],a[i[s]],n)}else if(a&&l.test(a))for(i=a.split(l);s<i.length;s++)e=t(e,i[s],o,n);else e=t(e,a,o,n);return e};f.on=function(t,e,r){return u(this,t,e,r)};var u=function(t,e,r,a,o){if(t._events=m(h,t._events||{},e,r,{context:a,ctx:t,listening:o}),o){var n=t._listeners||(t._listeners={});n[o.id]=o}return t};f.listenTo=function(t,e,a){if(!t)return this;var o=t._listenId||(t._listenId=r.uniqueId("l")),n=this._listeningTo||(this._listeningTo={}),i=n[o];if(!i){var s=this._listenId||(this._listenId=r.uniqueId("l"));i=n[o]={obj:t,objId:o,id:s,listeningTo:n,count:0}}return u(t,e,a,this,i),this};var h=function(t,e,r,a){if(r){var o=t[e]||(t[e]=[]),n=a.context,i=a.ctx,s=a.listening;s&&s.count++,o.push({callback:r,context:n,ctx:n||i,listening:s})}return t};f.off=function(t,e,r){return this._events?(this._events=m(p,this._events,t,e,{context:r,listeners:this._listeners}),this):this},f.stopListening=function(t,e,a){var o=this._listeningTo;if(!o)return this;for(var n=t?[t._listenId]:r.keys(o),i=0;i<n.length;i++){var s=o[n[i]];if(!s)break;s.obj.off(e,a,this)}return r.isEmpty(o)&&(this._listeningTo=void 0),this};var p=function(t,e,a,o){if(t){var n,i=0,s=o.context,c=o.listeners;if(e||a||s){for(var d=e?[e]:r.keys(t);i<d.length;i++){e=d[i];var f=t[e];if(!f)break;for(var l=[],m=0;m<f.length;m++){var u=f[m];a&&a!==u.callback&&a!==u.callback._callback||s&&s!==u.context?l.push(u):(n=u.listening,n&&0===--n.count&&(delete c[n.id],delete n.listeningTo[n.objId]))}l.length?t[e]=l:delete t[e]}return r.size(t)?t:void 0}for(var h=r.keys(c);i<h.length;i++)n=c[h[i]],delete c[n.id],delete n.listeningTo[n.objId]}};f.once=function(t,e,a){var o=m(g,{},t,e,r.bind(this.off,this));return this.on(o,void 0,a)},f.listenToOnce=function(t,e,a){var o=m(g,{},e,a,r.bind(this.stopListening,this,t));return this.listenTo(t,o)};var g=function(t,e,a,o){if(a){var n=t[e]=r.once(function(){o(e,n),a.apply(this,arguments)});n._callback=a}return t};f.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),r=Array(e),a=0;e>a;a++)r[a]=arguments[a+1];return m(I,this._events,t,void 0,r),this};var I=function(t,e,r,a){if(t){var o=t[e],n=t.all;o&&n&&(n=n.slice()),o&&v(o,a),n&&v(n,[e].concat(a))}return t},v=function(t,e){var r,a=-1,o=t.length,n=e[0],i=e[1],s=e[2];switch(e.length){case 0:for(;++a<o;)(r=t[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=t[a]).callback.call(r.ctx,n);return;case 2:for(;++a<o;)(r=t[a]).callback.call(r.ctx,n,i);return;case 3:for(;++a<o;)(r=t[a]).callback.call(r.ctx,n,i,s);return;default:for(;++a<o;)(r=t[a]).callback.apply(r.ctx,e);return}};f.bind=f.on,f.unbind=f.off,r.extend(e,f);var y=e.Model=function(t,e){var a=t||{};e||(e={}),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(a=this.parse(a,e)||{}),a=r.defaults({},a,r.result(this,"defaults")),this.set(a,e),this.changed={},this.initialize.apply(this,arguments)};r.extend(y.prototype,f,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return r.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return r.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!r.iteratee(t,this)(this.attributes)},set:function(t,e,a){if(null==t)return this;var o;if("object"==typeof t?(o=t,a=e):(o={})[t]=e,a||(a={}),!this._validate(o,a))return!1;var n=a.unset,i=a.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=r.clone(this.attributes),this.changed={});var d=this.attributes,f=this.changed,l=this._previousAttributes;for(var m in o)e=o[m],r.isEqual(d[m],e)||s.push(m),r.isEqual(l[m],e)?delete f[m]:f[m]=e,n?delete d[m]:d[m]=e;if(this.id=this.get(this.idAttribute),!i){s.length&&(this._pending=a);for(var u=0;u<s.length;u++)this.trigger("change:"+s[u],this,d[s[u]],a)}if(c)return this;if(!i)for(;this._pending;)a=this._pending,this._pending=!1,this.trigger("change",this,a);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var a in this.attributes)e[a]=void 0;return this.set(e,r.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!r.isEmpty(this.changed):r.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,a={};for(var o in t){var n=t[o];r.isEqual(e[o],n)||(a[o]=n)}return r.size(a)?a:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(t){t=r.extend({parse:!0},t);var e=this,a=t.success;return t.success=function(r){var o=t.parse?e.parse(r,t):r;return e.set(o,t)?(a&&a.call(t.context,e,r,t),void e.trigger("sync",e,r,t)):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,a){var o;null==t||"object"==typeof t?(o=t,a=e):(o={})[t]=e,a=r.extend({validate:!0,parse:!0},a);var n=a.wait;if(o&&!n){if(!this.set(o,a))return!1}else if(!this._validate(o,a))return!1;var i=this,s=a.success,c=this.attributes;a.success=function(t){i.attributes=c;var e=a.parse?i.parse(t,a):t;return n&&(e=r.extend({},o,e)),e&&!i.set(e,a)?!1:(s&&s.call(a.context,i,t,a),void i.trigger("sync",i,t,a))},H(this,a),o&&n&&(this.attributes=r.extend({},c,o));var d=this.isNew()?"create":a.patch?"patch":"update";"patch"!==d||a.attrs||(a.attrs=o);var f=this.sync(d,this,a);return this.attributes=c,f},destroy:function(t){t=t?r.clone(t):{};var e=this,a=t.success,o=t.wait,n=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(r){o&&n(),a&&a.call(t.context,e,r,t),e.isNew()||e.trigger("sync",e,r,t)};var i=!1;return this.isNew()?r.defer(t.success):(H(this,t),i=this.sync("delete",this,t)),o||n(),i},url:function(){var t=r.result(this,"urlRoot")||r.result(this.collection,"url")||W();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},r.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var a=this.validationError=this.validate(t,e)||null;return a?(this.trigger("invalid",this,a,r.extend(e,{validationError:a})),!1):!0}});var C={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(y,C,"attributes");var S=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,r.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},b=function(t,e,r){r=Math.min(Math.max(r,0),t.length);for(var a=Array(t.length-r),o=e.length,n=0;n<a.length;n++)a[n]=t[n+r];for(n=0;o>n;n++)t[n+r]=e[n];for(n=0;n<a.length;n++)t[n+o+r]=a[n]};r.extend(S.prototype,f,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,r.extend({merge:!1},e,k))},remove:function(t,e){e=r.extend({},e);var a=!r.isArray(t);t=a?[t]:r.clone(t);var o=this._removeModels(t,e);return!e.silent&&o&&this.trigger("update",this,e),a?o[0]:o},set:function(t,e){if(null!=t){e=r.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var a=!r.isArray(t);t=a?[t]:t.slice();var o=e.at;null!=o&&(o=+o),0>o&&(o+=this.length+1);for(var n,i=[],s=[],c=[],d={},f=e.add,l=e.merge,m=e.remove,u=!1,h=this.comparator&&null==o&&e.sort!==!1,p=r.isString(this.comparator)?this.comparator:null,g=0;g<t.length;g++){n=t[g];var I=this.get(n);if(I){if(l&&n!==I){var v=this._isModel(n)?n.attributes:n;e.parse&&(v=I.parse(v,e)),I.set(v,e),h&&!u&&(u=I.hasChanged(p))}d[I.cid]||(d[I.cid]=!0,i.push(I)),t[g]=I}else f&&(n=t[g]=this._prepareModel(n,e),n&&(s.push(n),this._addReference(n,e),d[n.cid]=!0,i.push(n)))}if(m){for(g=0;g<this.length;g++)n=this.models[g],d[n.cid]||c.push(n);c.length&&this._removeModels(c,e)}var y=!1,C=!h&&f&&m;if(i.length&&C?(y=this.length!=i.length||r.some(this.models,function(t,e){return t!==i[e]}),this.models.length=0,b(this.models,i,0),this.length=this.models.length):s.length&&(h&&(u=!0),b(this.models,s,null==o?this.length:o),this.length=this.models.length),u&&this.sort({silent:!0}),!e.silent){for(g=0;g<s.length;g++)null!=o&&(e.index=o+g),n=s[g],n.trigger("add",n,this,e);(u||y)&&this.trigger("sort",this,e),(s.length||c.length)&&this.trigger("update",this,e)}return a?t[0]:t}},reset:function(t,e){e=e?r.clone(e):{};for(var a=0;a<this.models.length;a++)this._removeReference(this.models[a],e);return e.previousModels=this.models,this._reset(),t=this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,r.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,r.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return n.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var a=e.length;return r.isFunction(e)&&(e=r.bind(e,this)),1===a||r.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return r.invoke(this.models,"get",t)},fetch:function(t){t=r.extend({parse:!0},t);var e=t.success,a=this;return t.success=function(r){var o=t.reset?"reset":"set";a[o](r,t),e&&e.call(t.context,a,r,t),a.trigger("sync",a,r,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){e=e?r.clone(e):{};var a=e.wait;if(t=this._prepareModel(t,e),!t)return!1;a||this.add(t,e);var o=this,n=e.success;return e.success=function(t,e,r){a&&o.add(t,r),n&&n.call(r.context,t,e,r)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?r.clone(e):{},e.collection=this;var a=new this.model(t,e);return a.validationError?(this.trigger("invalid",this,a.validationError,e),!1):a},_removeModels:function(t,e){for(var r=[],a=0;a<t.length;a++){var o=this.get(t[a]);if(o){var n=this.indexOf(o);this.models.splice(n,1),this.length--,e.silent||(e.index=n,o.trigger("remove",o,this,e)),r.push(o),this._removeReference(o,e)}}return r.length?r:!1},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var r=this.modelId(t.attributes);null!=r&&(this._byId[r]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var r=this.modelId(t.attributes);null!=r&&delete this._byId[r],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,r,a){if("add"!==t&&"remove"!==t||r===this){if("destroy"===t&&this.remove(e,a),"change"===t){var o=this.modelId(e.previousAttributes()),n=this.modelId(e.attributes);o!==n&&(null!=o&&delete this._byId[o],null!=n&&(this._byId[n]=e))}this.trigger.apply(this,arguments)}}});var A={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};s(S,A,"models");var _=e.View=function(t){this.cid=r.uniqueId("view"),r.extend(this,r.pick(t,$)),this._ensureElement(),this.initialize.apply(this,arguments)},x=/^(\S+)\s*(.*)$/,$=["model","collection","el","id","attributes","className","tagName","events"];r.extend(_.prototype,f,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=r.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var a=t[e];if(r.isFunction(a)||(a=this[a]),a){var o=e.match(x);this.delegate(o[1],o[2],r.bind(a,this))}}return this},delegate:function(t,e,r){return this.$el.on(t+".delegateEvents"+this.cid,e,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,r){return this.$el.off(t+".delegateEvents"+this.cid,e,r),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var t=r.extend({},r.result(this,"attributes"));this.id&&(t.id=r.result(this,"id")),this.className&&(t["class"]=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,a,o){var n=T[t];r.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var i={type:n,dataType:"json"};if(o.url||(i.url=r.result(a,"url")||W()),null!=o.data||!a||"create"!==t&&"update"!==t&&"patch"!==t||(i.contentType="application/json",i.data=JSON.stringify(o.attrs||a.toJSON(o))),o.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),o.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){i.type="POST",o.emulateJSON&&(i.data._method=n);
var s=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",n),s?s.apply(this,arguments):void 0}}"GET"===i.type||o.emulateJSON||(i.processData=!1);var c=o.error;o.error=function(t,e,r){o.textStatus=e,o.errorThrown=r,c&&c.call(o.context,t,e,r)};var d=o.xhr=e.ajax(r.extend(i,o));return a.trigger("request",a,d,o),d};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var j=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,P=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(j.prototype,f,{initialize:function(){},route:function(t,a,o){r.isRegExp(t)||(t=this._routeToRegExp(t)),r.isFunction(a)&&(o=a,a=""),o||(o=this[a]);var n=this;return e.history.route(t,function(r){var i=n._extractParameters(t,r);n.execute(o,i,a)!==!1&&(n.trigger.apply(n,["route:"+a].concat(i)),n.trigger("route",a,i),e.history.trigger("route",n,a,i))}),this},execute:function(t,e,r){t&&t.apply(this,e)},navigate:function(t,r){return e.history.navigate(t,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var t,e=r.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(B,"\\$&").replace(z,"(?:$1)?").replace(M,function(t,e){return e?t:"([^/?]+)"}).replace(P,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var a=t.exec(e).slice(1);return r.map(a,function(t,e){return e===a.length-1?t||null:t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],this.checkUrl=r.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,D=/#.*$/;E.started=!1,r.extend(E.prototype,f,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(V,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");if(E.started=!0,this.options=r.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var a=document.body,o=a.insertBefore(this.iframe,a.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var n=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?n("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?n("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),r.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!E.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var r=this.root;(""===t||"?"===t.charAt(0))&&(r=r.slice(0,-1)||"/");var a=r+t;if(t=this.decodeFragment(t.replace(D,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,a);else{if(!this._wantsHashChange)return this.location.assign(a);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,r){if(r){var a=t.href.replace(/(javascript:|#).*$/,"");t.replace(a+"#"+e)}else t.hash="#"+e}}),e.history=new E;var N=function(t,e){var a,o=this;a=t&&r.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},r.extend(a,o,e);var n=function(){this.constructor=a};return n.prototype=o.prototype,a.prototype=new n,t&&r.extend(a.prototype,t),a.__super__=o.prototype,a};y.extend=S.extend=j.extend=_.extend=E.extend=N;var W=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var r=e.error;e.error=function(a){r&&r.call(e.context,t,a,e),t.trigger("error",t,a,e)}};return e}),function(t,e){"object"==typeof exports&&"function"==typeof require?module.exports=e(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(r){return e(r||t.Backbone)}):e(Backbone)}(this,function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function r(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function a(t){return t===Object(t)}function o(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}function n(t,e){for(var r in e)t[r]=e[r];return t}function i(t,e){if(null==t)return void 0;var r=t[e];return"function"==typeof r?t[e]():r}return t.LocalStorage=window.Store=function(t,e){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t,this.serializer=e||{serialize:function(t){return a(t)?JSON.stringify(t):t},deserialize:function(t){return t&&JSON.parse(t)}};var r=this.localStorage().getItem(this.name);this.records=r&&r.split(",")||[]},n(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||0===t.id||(t.id=r(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t));var e=t.id.toString();return o(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(t.id)))},findAll:function(){for(var t,e,r=[],a=0;a<this.records.length;a++)t=this.records[a],e=this.serializer.deserialize(this.localStorage().getItem(this._itemName(t))),null!=e&&r.push(e);return r},destroy:function(t){this.localStorage().removeItem(this._itemName(t.id));for(var e=t.id.toString(),r=0;r<this.records.length;r++)this.records[r]===e&&this.records.splice(r,1);return this.save(),t},localStorage:function(){return localStorage},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var r in t)e.test(r)&&t.removeItem(r);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(t){return this.name+"-"+t}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,r,a){var o,n,s=i(r,"localStorage")||i(r.collection,"localStorage"),c=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":o=void 0!=r.id?s.find(r):s.findAll();break;case"create":o=s.create(r);break;case"update":o=s.update(r);break;case"delete":o=s.destroy(r)}}catch(d){n=22===d.code&&0===s._storageSize()?"Private browsing is unsupported":d.message}return o?(a&&a.success&&("0.9.10"===t.VERSION?a.success(r,o,a):a.success(o)),c&&c.resolve(o)):(n=n?n:"Record Not Found",a&&a.error&&("0.9.10"===t.VERSION?a.error(r,n,a):a.error(n)),c&&c.reject(n)),a&&a.complete&&a.complete(o),c&&c.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e,r){var a=r&&r.ajaxSync;return a||!i(e,"localStorage")&&!i(e.collection,"localStorage")?t.ajaxSync:t.localSync},t.sync=function(e,r,a){return t.getSyncMethod(r,a).apply(this,[e,r,a])},t.LocalStorage}),function(t){"function"==typeof define&&define.amd?define(t):window.purl=t()}(function(){function t(t,e){for(var r=decodeURI(t),a=p[e?"strict":"loose"].exec(r),o={attr:{},param:{},seg:{}},i=14;i--;)o.attr[u[i]]=a[i]||"";return o.param.query=n(o.attr.query),o.param.fragment=n(o.attr.fragment),o.seg.path=o.attr.path.replace(/^\/+|\/+$/g,"").split("/"),o.seg.fragment=o.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),o.attr.base=o.attr.host?(o.attr.protocol?o.attr.protocol+"://"+o.attr.host:o.attr.host)+(o.attr.port?":"+o.attr.port:""):"",o}function e(t){var e=t.tagName;return"undefined"!=typeof e?m[e.toLowerCase()]:e}function r(t,e){if(0===t[e].length)return t[e]={};var r={};for(var a in t[e])r[a]=t[e][a];return t[e]=r,r}function a(t,e,o,n){var i=t.shift();if(i){var s=e[o]=e[o]||[];"]"==i?d(s)?""!==n&&s.push(n):"object"==typeof s?s[f(s).length]=n:s=e[o]=[e[o],n]:~i.indexOf("]")?(i=i.substr(0,i.length-1),!g.test(i)&&d(s)&&(s=r(e,o)),a(t,s,i,n)):(!g.test(i)&&d(s)&&(s=r(e,o)),a(t,s,i,n))}else d(e[o])?e[o].push(n):"object"==typeof e[o]?e[o]=n:"undefined"==typeof e[o]?e[o]=n:e[o]=[e[o],n]}function o(t,e,r){if(~e.indexOf("]")){var o=e.split("[");a(o,t,"base",r)}else{if(!g.test(e)&&d(t.base)){var n={};for(var s in t.base)n[s]=t.base[s];t.base=n}""!==e&&i(t.base,e,r)}return t}function n(t){return c(String(t).split(/&|;/),function(t,e){try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}var a=e.indexOf("="),n=s(e),i=e.substr(0,n||a),c=e.substr(n||a,e.length);return c=c.substr(c.indexOf("=")+1,c.length),""===i&&(i=e,c=""),o(t,i,c)},{base:{}}).base}function i(t,e,r){var a=t[e];"undefined"==typeof a?t[e]=r:d(a)?a.push(r):t[e]=[a,r]}function s(t){for(var e,r,a=t.length,o=0;a>o;++o)if(r=t[o],"]"==r&&(e=!1),"["==r&&(e=!0),"="==r&&!e)return o}function c(t,e){for(var r=0,a=t.length>>0,o=arguments[2];a>r;)r in t&&(o=e.call(void 0,o,t[r],r,t)),++r;return o}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}function l(e,r){return 1===arguments.length&&e===!0&&(r=!0,e=void 0),r=r||!1,e=e||window.location.toString(),{data:t(e,r),attr:function(t){return t=h[t]||t,"undefined"!=typeof t?this.data.attr[t]:this.data.attr},param:function(t){return"undefined"!=typeof t?this.data.param.query[t]:this.data.param.query},fparam:function(t){return"undefined"!=typeof t?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return"undefined"==typeof t?this.data.seg.path:(t=0>t?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return"undefined"==typeof t?this.data.seg.fragment:(t=0>t?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}}var m={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},u=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],h={anchor:"fragment"},p={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},g=/^[0-9]+$/;return l.jQuery=function(t){null!=t&&(t.fn.url=function(r){var a="";return this.length&&(a=t(this).attr(e(this[0]))||""),l(a,r)},t.url=l)},l.jQuery(window.jQuery),l}),function(t,e,r){"use strict";function a(e,p,g){function V(r){var a=0,o=Mt.length;if(bt.old=t.extend({},bt),wt=yt?0:Ct[It.horizontal?"width":"height"](),xt=At[It.horizontal?"width":"height"](),kt=yt?e:St[It.horizontal?"outerWidth":"outerHeight"](),Mt.length=0,bt.start=0,bt.end=P(kt-wt,0),Ft){a=Bt.length,Pt=St.children(It.itemSelector),Bt.length=0;var n,i=d(St,It.horizontal?"paddingLeft":"paddingTop"),s=d(St,It.horizontal?"paddingRight":"paddingBottom"),c="border-box"===t(Pt).css("boxSizing"),l="none"!==Pt.css("float"),m=0,u=Pt.length-1;kt=0,Pt.each(function(e,r){var a=t(r),o=r.getBoundingClientRect(),c=M(It.horizontal?o.width||o.right-o.left:o.height||o.bottom-o.top),f=d(a,It.horizontal?"marginLeft":"marginTop"),h=d(a,It.horizontal?"marginRight":"marginBottom"),p=c+f+h,g=!f||!h,I={};I.el=r,I.size=g?c:p,I.half=I.size/2,I.start=kt+(g?f:0),I.center=I.start-M(wt/2-I.size/2),I.end=I.start-wt+I.size,e||(kt+=i),kt+=p,It.horizontal||l||h&&f&&e>0&&(kt-=B(f,h)),e===u&&(I.end+=s,kt+=s,m=g?h:0),Bt.push(I),n=I}),St[0].style[It.horizontal?"width":"height"]=(c?kt:kt-i-s)+"px",kt-=m,Bt.length?(bt.start=Bt[0][Ht?"center":"start"],bt.end=Ht?n.center:kt>wt?n.end:bt.start):bt.start=bt.end=0}if(bt.center=M(bt.end/2+bt.start/2),J(),_t.length&&xt>0&&(It.dynamicHandle?($t=bt.start===bt.end?xt:M(xt*wt/kt),$t=f($t,It.minHandleSize,xt),_t[0].style[It.horizontal?"width":"height"]=$t+"px"):$t=_t[It.horizontal?"outerWidth":"outerHeight"](),Tt.end=xt-$t,oe||N()),!yt&&wt>0){var h=bt.start,p="";if(Ft)t.each(Bt,function(t,e){Ht?Mt.push(e.center):e.start+e.size>h&&h<=bt.end&&(h=e.start,Mt.push(h),h+=wt,h>bt.end&&h<bt.end+wt&&Mt.push(bt.end))});else for(;h-wt<bt.end;)Mt.push(h),h+=wt;if(jt[0]&&o!==Mt.length){for(var g=0;g<Mt.length;g++)p+=It.pageBuilder.call(vt,g);zt=jt.html(p).children(),zt.eq(Et.activePage).addClass(It.activeClass)}}if(Et.slideeSize=kt,Et.frameSize=wt,Et.sbSize=xt,Et.handleSize=$t,Ft){r&&null!=It.startAt&&(U(It.startAt),vt[qt?"toCenter":"toStart"](It.startAt));var I=Bt[Et.activeItem];O(qt&&I?I.center:f(bt.dest,bt.start,bt.end))}else r?null!=It.startAt&&O(It.startAt,1):O(f(bt.dest,bt.start,bt.end));ht("load")}function O(t,e,r){if(Ft&&re.released&&!r){var a=L(t),o=t>bt.start&&t<bt.end;qt?(o&&(t=Bt[a.centerItem].center),Ht&&It.activateMiddle&&U(a.centerItem)):o&&(t=Bt[a.firstItem].start)}re.init&&re.slidee&&It.elasticBounds?t>bt.end?t=bt.end+(t-bt.end)/6:t<bt.start&&(t=bt.start+(t-bt.start)/6):t=f(t,bt.start,bt.end),te.start=+new Date,te.time=0,te.from=bt.cur,te.to=t,te.delta=t-bt.cur,te.tweesing=re.tweese||re.init&&!re.slidee,te.immediate=!te.tweesing&&(e||re.init&&re.slidee||!It.speed),re.tweese=0,t!==bt.dest&&(bt.dest=t,ht("change"),oe||D()),Q(),J(),G(),W()}function D(){if(vt.initialized){if(!oe)return oe=y(D),void(re.released&&ht("moveStart"));te.immediate?bt.cur=te.to:te.tweesing?(te.tweeseDelta=te.to-bt.cur,T(te.tweeseDelta)<.1?bt.cur=te.to:bt.cur+=te.tweeseDelta*(re.released?It.swingSpeed:It.syncSpeed)):(te.time=B(+new Date-te.start,It.speed),bt.cur=te.from+te.delta*t.easing[It.easing](te.time/It.speed,te.time,0,1,It.speed)),te.to===bt.cur?(bt.cur=te.to,re.tweese=oe=0):oe=y(D),ht("move"),yt||(m?St[0].style[m]=u+(It.horizontal?"translateX":"translateY")+"("+-bt.cur+"px)":St[0].style[It.horizontal?"left":"top"]=-M(bt.cur)+"px"),!oe&&re.released&&ht("moveEnd"),N()}}function N(){_t.length&&(Tt.cur=bt.start===bt.end?0:((re.init&&!re.slidee?bt.dest:bt.cur)-bt.start)/(bt.end-bt.start)*Tt.end,Tt.cur=f(M(Tt.cur),Tt.start,Tt.end),Zt.hPos!==Tt.cur&&(Zt.hPos=Tt.cur,m?_t[0].style[m]=u+(It.horizontal?"translateX":"translateY")+"("+Tt.cur+"px)":_t[0].style[It.horizontal?"left":"top"]=Tt.cur+"px"))}function W(){zt[0]&&Zt.page!==Et.activePage&&(Zt.page=Et.activePage,zt.removeClass(It.activeClass).eq(Et.activePage).addClass(It.activeClass),ht("activePage",Zt.page))}function H(){ee.speed&&bt.cur!==(ee.speed>0?bt.end:bt.start)||vt.stop(),se=re.init?y(H):0,ee.now=+new Date,ee.pos=bt.cur+(ee.now-ee.lastTime)/1e3*ee.speed,O(re.init?ee.pos:M(ee.pos)),re.init||bt.cur!==bt.dest||ht("moveEnd"),ee.lastTime=ee.now}function q(t,e,a){if("boolean"===o(e)&&(a=e,e=r),e===r)O(bt[t],a);else{if(qt&&"center"!==t)return;var n=vt.getPos(e);n&&O(n[t],a,!qt)}}function F(t){return null!=t?c(t)?t>=0&&t<Bt.length?t:-1:Pt.index(t):-1}function R(t){return F(c(t)&&0>t?t+Bt.length:t)}function U(t,e){var r=F(t);return!Ft||0>r?!1:((Zt.active!==r||e)&&(Pt.eq(Et.activeItem).removeClass(It.activeClass),Pt.eq(r).addClass(It.activeClass),Zt.active=Et.activeItem=r,G(),ht("active",r)),r)}function L(t){t=f(c(t)?t:bt.dest,bt.start,bt.end);var e={},r=Ht?0:wt/2;if(!yt)for(var a=0,o=Mt.length;o>a;a++){if(t>=bt.end||a===Mt.length-1){e.activePage=Mt.length-1;break}if(t<=Mt[a]+r){e.activePage=a;break}}if(Ft){for(var n=!1,i=!1,s=!1,d=0,l=Bt.length;l>d;d++)if(n===!1&&t<=Bt[d].start+Bt[d].half&&(n=d),s===!1&&t<=Bt[d].center+Bt[d].half&&(s=d),d===l-1||t<=Bt[d].end+Bt[d].half){i=d;break}e.firstItem=c(n)?n:0,e.centerItem=c(s)?s:e.firstItem,e.lastItem=c(i)?i:e.centerItem}return e}function J(e){t.extend(Et,L(e))}function G(){var t=bt.dest<=bt.start,e=bt.dest>=bt.end,r=(t?1:0)|(e?2:0);if(Zt.slideePosState!==r&&(Zt.slideePosState=r,Xt.is("button,input")&&Xt.prop("disabled",t),Qt.is("button,input")&&Qt.prop("disabled",e),Xt.add(Jt)[t?"addClass":"removeClass"](It.disabledClass),Qt.add(Lt)[e?"addClass":"removeClass"](It.disabledClass)),Zt.fwdbwdState!==r&&re.released&&(Zt.fwdbwdState=r,Jt.is("button,input")&&Jt.prop("disabled",t),Lt.is("button,input")&&Lt.prop("disabled",e)),Ft&&null!=Et.activeItem){var a=0===Et.activeItem,o=Et.activeItem>=Bt.length-1,n=(a?1:0)|(o?2:0);Zt.itemsButtonState!==n&&(Zt.itemsButtonState=n,Gt.is("button,input")&&Gt.prop("disabled",a),Yt.is("button,input")&&Yt.prop("disabled",o),Gt[a?"addClass":"removeClass"](It.disabledClass),Yt[o?"addClass":"removeClass"](It.disabledClass))}}function Y(t,e,r){if(t=R(t),e=R(e),t>-1&&e>-1&&t!==e&&(!r||e!==t-1)&&(r||e!==t+1)){Pt.eq(t)[r?"insertAfter":"insertBefore"](Bt[e].el);var a=e>t?t:r?e:e-1,o=t>e?t:r?e+1:e,n=t>e;null!=Et.activeItem&&(t===Et.activeItem?Zt.active=Et.activeItem=r?n?e+1:e:n?e:e-1:Et.activeItem>a&&Et.activeItem<o&&(Zt.active=Et.activeItem+=n?1:-1)),V()}}function X(t,e){for(var r=0,a=Kt[t].length;a>r;r++)if(Kt[t][r]===e)return r;return-1}function Q(){re.released&&!vt.isPaused&&vt.resume()}function K(t){return M(f(t,Tt.start,Tt.end)/Tt.end*(bt.end-bt.start))+bt.start}function Z(){re.history[0]=re.history[1],re.history[1]=re.history[2],re.history[2]=re.history[3],re.history[3]=re.delta}function tt(t){re.released=0,re.source=t,re.slidee="slidee"===t}function et(e){var r="touchstart"===e.type,a=e.data.source,o="slidee"===a;re.init||!r&&ot(e.target)||("handle"!==a||It.dragHandle&&Tt.start!==Tt.end)&&(!o||(r?It.touchDragging:It.mouseDragging&&e.which<2))&&(r||n(e),tt(a),re.init=0,re.$source=t(e.target),re.touch=r,re.pointer=r?e.originalEvent.touches[0]:e,re.initX=re.pointer.pageX,re.initY=re.pointer.pageY,re.initPos=o?bt.cur:Tt.cur,re.start=+new Date,re.time=0,re.path=0,re.delta=0,re.locked=0,re.history=[0,0,0,0],re.pathToLock=o?r?30:10:0,C.on(r?k:w,rt),vt.pause(1),(o?St:_t).addClass(It.draggedClass),ht("moveStart"),o&&(ne=setInterval(Z,10)))}function rt(t){if(re.released="mouseup"===t.type||"touchend"===t.type,re.pointer=re.touch?t.originalEvent[re.released?"changedTouches":"touches"][0]:t,re.pathX=re.pointer.pageX-re.initX,re.pathY=re.pointer.pageY-re.initY,re.path=j(z(re.pathX,2)+z(re.pathY,2)),re.delta=It.horizontal?re.pathX:re.pathY,re.released||!(re.path<1)){if(!re.init){if(re.path<It.dragThreshold)return re.released?at():r;if(!(It.horizontal?T(re.pathX)>T(re.pathY):T(re.pathX)<T(re.pathY)))return at();re.init=1}n(t),!re.locked&&re.path>re.pathToLock&&re.slidee&&(re.locked=1,re.$source.on(A,i)),re.released&&(at(),It.releaseSwing&&re.slidee&&(re.swing=(re.delta-re.history[0])/40*300,re.delta+=re.swing,re.tweese=T(re.swing)>10)),O(re.slidee?M(re.initPos-re.delta):K(re.initPos+re.delta))}}function at(){clearInterval(ne),re.released=!0,C.off(re.touch?k:w,rt),(re.slidee?St:_t).removeClass(It.draggedClass),setTimeout(function(){re.$source.off(A,i)}),bt.cur===bt.dest&&re.init&&ht("moveEnd"),vt.resume(1),re.init=0}function ot(e){return~t.inArray(e.nodeName,x)||t(e).is(It.interactive)}function nt(){vt.stop(),C.off("mouseup",nt)}function it(t){switch(n(t),this){case Lt[0]:case Jt[0]:vt.moveBy(Lt.is(this)?It.moveBy:-It.moveBy),C.on("mouseup",nt);break;case Gt[0]:vt.prev();break;case Yt[0]:vt.next();break;case Xt[0]:vt.prevPage();break;case Qt[0]:vt.nextPage()}}function st(t){return ae.curDelta=(It.horizontal?t.deltaY||t.deltaX:t.deltaY)||-t.wheelDelta,ae.curDelta/=1===t.deltaMode?3:100,Ft?(h=+new Date,ae.last<h-ae.resetTime&&(ae.delta=0),ae.last=h,ae.delta+=ae.curDelta,T(ae.delta)<1?ae.finalDelta=0:(ae.finalDelta=M(ae.delta/1),ae.delta%=1),ae.finalDelta):ae.curDelta}function ct(t){t.originalEvent[I]=vt;var e=+new Date;if(E+It.scrollHijack>e&&Rt[0]!==document&&Rt[0]!==window)return void(E=e);if(It.scrollBy&&bt.start!==bt.end){var r=st(t.originalEvent);(It.scrollTrap||r>0&&bt.dest<bt.end||0>r&&bt.dest>bt.start)&&n(t,1),vt.slideBy(It.scrollBy*r)}}function dt(t){It.clickBar&&t.target===At[0]&&(n(t),O(K((It.horizontal?t.pageX-At.offset().left:t.pageY-At.offset().top)-$t/2)))}function ft(t){if(It.keyboardNavBy)switch(t.which){case It.horizontal?37:38:n(t),vt["pages"===It.keyboardNavBy?"prevPage":"prev"]();break;case It.horizontal?39:40:n(t),vt["pages"===It.keyboardNavBy?"nextPage":"next"]()}}function lt(t){return ot(this)?void(t.originalEvent[I+"ignore"]=!0):void(this.parentNode!==St[0]||t.originalEvent[I+"ignore"]||vt.activate(this))}function mt(){this.parentNode===jt[0]&&vt.activatePage(zt.index(this))}function ut(t){It.pauseOnHover&&vt["mouseenter"===t.type?"pause":"resume"](2)}function ht(t,e){if(Kt[t]){for(gt=Kt[t].length,$.length=0,pt=0;gt>pt;pt++)$.push(Kt[t][pt]);for(pt=0;gt>pt;pt++)$[pt].call(vt,t,e)}}if(!(this instanceof a))return new a(e,p,g);var pt,gt,It=t.extend({},a.defaults,p),vt=this,yt=c(e),Ct=t(e),St=It.slidee?t(It.slidee).eq(0):Ct.children().eq(0),wt=0,kt=0,bt={start:0,center:0,end:0,cur:0,dest:0},At=t(It.scrollBar).eq(0),_t=At.children().eq(0),xt=0,$t=0,Tt={start:0,end:0,cur:0},jt=t(It.pagesBar),zt=0,Mt=[],Pt=0,Bt=[],Et={firstItem:0,lastItem:0,centerItem:0,activeItem:null,activePage:0},Vt=new l(Ct[0]),Ot=new l(St[0]),Dt=new l(At[0]),Nt=new l(_t[0]),Wt="basic"===It.itemNav,Ht="forceCentered"===It.itemNav,qt="centered"===It.itemNav||Ht,Ft=!yt&&(Wt||qt||Ht),Rt=It.scrollSource?t(It.scrollSource):Ct,Ut=It.dragSource?t(It.dragSource):Ct,Lt=t(It.forward),Jt=t(It.backward),Gt=t(It.prev),Yt=t(It.next),Xt=t(It.prevPage),Qt=t(It.nextPage),Kt={},Zt={},te={},ee={},re={released:1},ae={last:0,delta:0,resetTime:200},oe=0,ne=0,ie=0,se=0;yt||(e=Ct[0]),vt.initialized=0,vt.frame=e,vt.slidee=St[0],vt.pos=bt,vt.rel=Et,vt.items=Bt,vt.pages=Mt,vt.isPaused=0,vt.options=It,vt.dragging=re,vt.reload=function(){V()},vt.getPos=function(t){if(Ft){var e=F(t);return-1!==e?Bt[e]:!1}var r=St.find(t).eq(0);if(r[0]){var a=It.horizontal?r.offset().left-St.offset().left:r.offset().top-St.offset().top,o=r[It.horizontal?"outerWidth":"outerHeight"]();return{start:a,center:a-wt/2+o/2,end:a-wt+o,size:o}}return!1},vt.moveBy=function(t){ee.speed=t,!re.init&&ee.speed&&bt.cur!==(ee.speed>0?bt.end:bt.start)&&(ee.lastTime=+new Date,ee.startPos=bt.cur,tt("button"),re.init=1,ht("moveStart"),v(se),H())},vt.stop=function(){"button"===re.source&&(re.init=0,re.released=1)},vt.prev=function(){vt.activate(null==Et.activeItem?0:Et.activeItem-1)},vt.next=function(){vt.activate(null==Et.activeItem?0:Et.activeItem+1)},vt.prevPage=function(){vt.activatePage(Et.activePage-1)},vt.nextPage=function(){vt.activatePage(Et.activePage+1)},vt.slideBy=function(t,e){t&&(Ft?vt[qt?"toCenter":"toStart"](f((qt?Et.centerItem:Et.firstItem)+It.scrollBy*t,0,Bt.length)):O(bt.dest+t,e))},vt.slideTo=function(t,e){O(t,e)},vt.toStart=function(t,e){q("start",t,e)},vt.toEnd=function(t,e){q("end",t,e)},vt.toCenter=function(t,e){q("center",t,e)},vt.getIndex=F,vt.activate=function(t,e){var r=U(t);It.smart&&r!==!1&&(qt?vt.toCenter(r,e):r>=Et.lastItem?vt.toStart(r,e):r<=Et.firstItem?vt.toEnd(r,e):Q())},vt.activatePage=function(t,e){c(t)&&O(Mt[f(t,0,Mt.length-1)],e)},vt.resume=function(t){It.cycleBy&&It.cycleInterval&&("items"!==It.cycleBy||Bt[0]&&null!=Et.activeItem)&&!(t<vt.isPaused)&&(vt.isPaused=0,ie?ie=clearTimeout(ie):ht("resume"),ie=setTimeout(function(){switch(ht("cycle"),It.cycleBy){case"items":vt.activate(Et.activeItem>=Bt.length-1?0:Et.activeItem+1);break;case"pages":vt.activatePage(Et.activePage>=Mt.length-1?0:Et.activePage+1)}},It.cycleInterval))},vt.pause=function(t){t<vt.isPaused||(vt.isPaused=t||100,ie&&(ie=clearTimeout(ie),ht("pause")))},vt.toggle=function(){vt[ie?"pause":"resume"]()},vt.set=function(e,r){t.isPlainObject(e)?t.extend(It,e):It.hasOwnProperty(e)&&(It[e]=r)},vt.add=function(e,r){var a=t(e);Ft?(null==r||!Bt[0]||r>=Bt.length?a.appendTo(St):Bt.length&&a.insertBefore(Bt[r].el),null!=Et.activeItem&&r<=Et.activeItem&&(Zt.active=Et.activeItem+=a.length)):St.append(a),V()},vt.remove=function(e){if(Ft){var r=R(e);if(r>-1){Pt.eq(r).remove();var a=r===Et.activeItem;null!=Et.activeItem&&r<Et.activeItem&&(Zt.active=--Et.activeItem),V(),a&&(Zt.active=null,vt.activate(Et.activeItem))}}else t(e).remove(),V()},vt.moveAfter=function(t,e){Y(t,e,1)},vt.moveBefore=function(t,e){Y(t,e)},vt.on=function(t,e){if("object"===o(t))for(var r in t)t.hasOwnProperty(r)&&vt.on(r,t[r]);else if("function"===o(e))for(var a=t.split(" "),n=0,i=a.length;i>n;n++)Kt[a[n]]=Kt[a[n]]||[],-1===X(a[n],e)&&Kt[a[n]].push(e);else if("array"===o(e))for(var s=0,c=e.length;c>s;s++)vt.on(t,e[s])},vt.one=function(t,e){function r(){e.apply(vt,arguments),vt.off(t,r)}vt.on(t,r)},vt.off=function(t,e){if(e instanceof Array)for(var r=0,a=e.length;a>r;r++)vt.off(t,e[r]);else for(var o=t.split(" "),n=0,i=o.length;i>n;n++)if(Kt[o[n]]=Kt[o[n]]||[],null==e)Kt[o[n]].length=0;else{var s=X(o[n],e);-1!==s&&Kt[o[n]].splice(s,1)}},vt.destroy=function(){return a.removeInstance(e),Rt.add(_t).add(At).add(jt).add(Lt).add(Jt).add(Gt).add(Yt).add(Xt).add(Qt).off("."+I),C.off("keydown",ft),Gt.add(Yt).add(Xt).add(Qt).removeClass(It.disabledClass),Pt&&null!=Et.activeItem&&Pt.eq(Et.activeItem).removeClass(It.activeClass),jt.empty(),yt||(Ct.off("."+I),Vt.restore(),Ot.restore(),Dt.restore(),Nt.restore(),t.removeData(e,I)),Bt.length=Mt.length=0,Zt={},vt.initialized=0,vt},vt.init=function(){if(!vt.initialized){if(a.getInstance(e))throw new Error("There is already a Sly instance on this element");a.storeInstance(e,vt),vt.on(g);var t=["overflow","position"],r=["position","webkitTransform","msTransform","transform","left","top","width","height"];Vt.save.apply(Vt,t),Dt.save.apply(Dt,t),Ot.save.apply(Ot,r),Nt.save.apply(Nt,r);var o=_t;return yt||(o=o.add(St),Ct.css("overflow","hidden"),m||"static"!==Ct.css("position")||Ct.css("position","relative")),m?u&&o.css(m,u):("static"===At.css("position")&&At.css("position","relative"),o.css({position:"absolute"})),It.forward&&Lt.on(_,it),It.backward&&Jt.on(_,it),It.prev&&Gt.on(A,it),It.next&&Yt.on(A,it),It.prevPage&&Xt.on(A,it),It.nextPage&&Qt.on(A,it),Rt.on(b,ct),At[0]&&At.on(A,dt),Ft&&It.activateOn&&Ct.on(It.activateOn+"."+I,"*",lt),jt[0]&&It.activatePageOn&&jt.on(It.activatePageOn+"."+I,"*",mt),Ut.on(S,{source:"slidee"},et),_t&&_t.on(S,{source:"handle"},et),C.on("keydown",ft),yt||(Ct.on("mouseenter."+I+" mouseleave."+I,ut),Ct.on("scroll."+I,s)),vt.initialized=1,V(!0),It.cycleBy&&!yt&&vt[It.startPaused?"pause":"resume"](),vt}}}function o(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function n(t,e){t.preventDefault(),e&&t.stopPropagation()}function i(e){n(e,1),t(this).off(e.type,i)}function s(){this.scrollLeft=0,this.scrollTop=0}function c(t){return!isNaN(parseFloat(t))&&isFinite(t)}function d(t,e){return 0|M(String(t.css(e)).replace(/[^\-0-9.]/g,""))}function f(t,e,r){return e>t?e:t>r?r:t}function l(t){var e={};return e.style={},e.save=function(){if(t&&t.nodeType){for(var r=0;r<arguments.length;r++)e.style[arguments[r]]=t.style[arguments[r]];return e}},e.restore=function(){if(t&&t.nodeType){for(var r in e.style)e.style.hasOwnProperty(r)&&(t.style[r]=e.style[r]);return e}},e}var m,u,h,p="sly",g="Sly",I=p,v=e.cancelAnimationFrame||e.cancelRequestAnimationFrame,y=e.requestAnimationFrame,C=t(document),S="touchstart."+I+" mousedown."+I,w="mousemove."+I+" mouseup."+I,k="touchmove."+I+" touchend."+I,b=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+I,A="click."+I,_="mousedown."+I,x=["INPUT","SELECT","BUTTON","TEXTAREA"],$=[],T=Math.abs,j=Math.sqrt,z=Math.pow,M=Math.round,P=Math.max,B=Math.min,E=0;C.on(b,function(t){var e=t.originalEvent[I],r=+new Date;(!e||e.options.scrollHijack<r-E)&&(E=r)}),a.getInstance=function(e){return t.data(e,I)},a.storeInstance=function(e,r){return t.data(e,I,r)},a.removeInstance=function(e){return t.removeData(e,I)},function(t){function e(t){var e=(new Date).getTime(),a=Math.max(0,16-(e-r)),o=setTimeout(t,a);return r=e,o}y=t.requestAnimationFrame||t.webkitRequestAnimationFrame||e;var r=(new Date).getTime(),a=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;v=function(e){a.call(t,e)}}(window),function(){function t(t){for(var a=0,o=e.length;o>a;a++){var n=e[a]?e[a]+t.charAt(0).toUpperCase()+t.slice(1):t;if(null!=r.style[n])return n}}var e=["","Webkit","Moz","ms","O"],r=document.createElement("div");m=t("transform"),u=t("perspective")?"translateZ(0) ":""}(),e[g]=a,t.fn[p]=function(e,r){var n,i;return t.isPlainObject(e)||(("string"===o(e)||e===!1)&&(n=e===!1?"destroy":e,i=Array.prototype.slice.call(arguments,1)),e={}),this.each(function(t,o){var s=a.getInstance(o);s||n?s&&n&&s[n]&&s[n].apply(s,i):s=new a(o,e,r).init()})},a.defaults={slidee:null,horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,dragThreshold:3,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(t){return"<li>"+(t+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:null,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window);var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Type=Backbone.Model.extend({defaults:{name:"Type",uid:"type"}});var CoC=CoC||{};CoC.model=CoC.model||{},function(){var t={1:{1:{levels:10,min:100,max:175},2:{levels:20,min:175,max:250},ranks:2},2:{1:{levels:10,min:150,max:250
},2:{levels:20,min:250,max:400},3:{levels:30,min:400,max:600},ranks:3},3:{1:{levels:10,min:300,max:500},2:{levels:20,min:500,max:900},3:{levels:30,min:900,max:1200},4:{levels:40,min:1200,max:1500},ranks:4},4:{1:{levels:10,min:600,max:1e3},2:{levels:20,min:1e3,max:1500},3:{levels:30,min:1500,max:2e3},4:{levels:40,min:2e3,max:2800},5:{levels:50,min:2800,max:3500},ranks:5}};CoC.model.Champion=Backbone.Model.extend({defaults:{uid:"champion",stars:2,name:"Champion",shortname:null,typeId:"mutant",awakened:0,rank:1,level:1,grade:0,gradeAwakened:0,quest:!1},value:function(){var e=this.get("stars"),r=this.get("rank"),a=this.get("level"),o=this.get("awakened");if(1>a||void 0===t[e])return 0;var n=t[e][r];if(void 0===n||a>n.levels)return 0;var i=n.min+a/n.levels*(n.max-n.min);return o>0&&(i*=1.05+.005*Math.min(Math.max(1,o),99)),i},ranks:function(){var e=t[this.get("stars")];return void 0===e?null:e.ranks},levels:function(){var e=t[this.get("stars")];if(void 0===e)return null;var r=e[this.get("rank")];return void 0===r?null:r.levels},stars:function(){return void 0===this._stars&&(this._stars=["","★","★★","★★★","★★★★","★★★★★"][this.get("stars")]),this._stars},fid:function(){return void 0===this._fid&&(this._fid=this.get("uid")+"_"+this.get("stars")),this._fid},portrait:function(){return void 0===this._portrait&&(this._portrait="images/champions/portrait_"+this.get("uid")+".png"),this._portrait},image:function(){return void 0===this._image&&(this._image="images/champions/fullsize_"+this.get("uid")+".png"),this._image},type:function(){return void 0===this._type&&(this._type=CoC.data.types.findWhere({uid:this.get("typeId")})),this._type},crystals:function(){if(void 0===this._crystals){this._crystals=[];for(var t=CoC.data.crystalChampions.find({championId:this.get("uid"),championStars:this.get("stars")}),e=0;e<t.length;e++)this._crystals.push(t.crystal())}return this._crystals},update:function(){var t=CoC.data.champions.findWhere({uid:this.get("uid"),stars:this.get("stars")});return t?(this.set("name",t.get("name")),this.set("shortname",t.get("shortname")),this.set("typeId",t.get("typeId")),this.set("stars",parseInt(this.get("stars"),10)||1),this.set("rank",parseInt(this.get("rank"),10)||1),this.set("level",parseInt(this.get("level"),10)||1),this.set("awakened",parseInt(this.get("awakened"),10)||0),!0):!1}})}();var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Effect=Backbone.Model.extend({defaults:{name:"Effect Name",uid:"effect",base:10,amount:0,image:"",altimage:""},image:function(){return this.get("image")+".jpg"},imageOff:function(){return this.get("image")+"_off.jpg"},championIds:function(t){if(t){this._championIds=[];for(var e in t)this._championIds.push(e)}return this._championIds}});var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Synergy=Backbone.Model.extend({defaults:{fromId:"champion",fromStars:1,toId:"champion",effectId:"effect",effectAmount:20},to:function(){return void 0===this._to&&(this._to=CoC.data.champions.findWhere({uid:this.get("toId")})),this._to},from:function(){return void 0===this._from&&(this._from=CoC.data.champions.findWhere({uid:this.get("fromId"),stars:this.get("fromStars")})),this._from},effect:function(){return void 0===this._effect&&(this._effect=CoC.data.effects.findWhere({uid:this.get("effectId")})),this._effect}});var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Crystal=Backbone.Model.extend({defaults:{name:"Crystal",uid:"crystal",image:"crystal"},image:function(){return void 0===this._image&&(this._image="images/crystals/crystal_"+this.get("image")+".png"),this._image},hologram:function(){return void 0===this._hologram&&(this._hologram="images/crystals/hologram_"+this.get("hologram")+".png"),this._hologram},champions:function(t){var e;if(void 0===this._champions&&(this._champions=[]),void 0===t){if(e=this._champions[0],void 0===e){e=[];for(var r=CoC.data.crystalChampions.where({crystalId:this.get("uid")}),a=0;a<r.length;a++)void 0!==r[a].champion()&&e.push(r[a].champion());e=_(e),this._champions[0]=e}}else if(e=this._champions[t],void 0===e){e=[];for(var r=CoC.data.crystalChampions.where({crystalId:this.get("uid"),championStars:t}),a=0;a<r.length;a++)void 0!==r[a].champion()&&e.push(r[a].champion());e=_(e),this._champions[t]=e}return e}});var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.CrystalChampion=Backbone.Model.extend({defaults:{crystalId:"crystal",championId:"champion",championStars:1},crystal:function(){return void 0===this._crystal&&(this._crystal=CoC.data.crystals.findWhere({uid:this.get("crystalId")})),this._crystal},champion:function(){return void 0===this._champion&&(this._champion=CoC.data.champions.findWhere({uid:this.get("championId"),stars:this.get("championStars")})),void 0===this._champion&&console.error(this.toJSON()),this._champion}});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.effects=new Backbone.Collection([{uid:"attack",name:"Attack",description:"Increases damage on all attacks.",image:"images/effects/attack",base:5},{uid:"stun",name:"Stun",description:"Chance to Stun on special attacks.",image:"images/effects/stun",base:15},{uid:"critrate",name:"Critical Rate",description:"Increases the chance for Critical hit.",image:"images/effects/critical",base:5},{uid:"critdamage",name:"Critical Damage",description:"Increases damage multiplier for Critical hits.",image:"images/effects/critical",base:15},{uid:"powergain",name:"Power Gain",description:"Gain additional Power (used to trigger a special) whenever Power is gained.",image:"images/effects/mana",base:3},{uid:"powersteal",name:"Power Steal",description:"Gain Power (used to trigger a special) when attacking.",image:"images/effects/mana_steal",base:3},{uid:"perfectblock",name:"Perfect Block",description:"Increased chance to Perfect Block for 0 damage.",image:"images/effects/block",base:3},{uid:"block",name:"Block Proficiency",description:"Increases Block effectiveness for less damage taken.",image:"images/effects/block",base:10},{uid:"armor",name:"Armor",description:"Increases Armor so that all damage taken is decreased.",image:"images/effects/armor",base:4},{uid:"health",name:"Health",description:"Increases champion Health.",image:"images/effects/health",base:4},{uid:"healthsteal",name:"Health Steal",description:"Gain Health when attacking.",image:"images/effects/health_steal",base:4}],{model:CoC.model.Effect});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.types=new Backbone.Collection([{uid:"cosmic",name:"Cosmic",image:"images/icons/cosmic.png"},{uid:"tech",name:"Tech",image:"images/icons/tech.png"},{uid:"mutant",name:"Mutant",image:"images/icons/mutant.png"},{uid:"skill",name:"Skill",image:"images/icons/skill.png"},{uid:"science",name:"Science",image:"images/icons/science.png"},{uid:"mystic",name:"Mystic",image:"images/icons/mystic.png"}],{model:CoC.model.Type});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.champions=new Backbone.Collection([{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:2},{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:3},{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:4},{uid:"captainmarvel",name:"Captain Marvel",shortname:"Cap. Marvel",typeId:"cosmic",stars:3},{uid:"captainmarvel",name:"Captain Marvel",shortname:"Cap. Marvel",typeId:"cosmic",stars:4},{uid:"drax",name:"Drax",typeId:"cosmic",stars:2},{uid:"drax",name:"Drax",typeId:"cosmic",stars:3},{uid:"drax",name:"Drax",typeId:"cosmic",stars:4},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:1},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:2},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:3},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:4},{uid:"msmarvel",name:"Ms. Marvel",typeId:"cosmic",stars:3},{uid:"msmarvel",name:"Ms. Marvel",typeId:"cosmic",stars:4},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:2},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:3},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:4},{uid:"spidermanblack",name:"Spider-Man Symbiote",shortname:"Spider-Man",typeId:"cosmic",stars:3},{uid:"spidermanblack",name:"Spider-Man Symbiote",shortname:"Spider-Man",typeId:"cosmic",stars:4},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:2},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:3},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:4},{uid:"thor",name:"Thor",typeId:"cosmic",stars:2},{uid:"thor",name:"Thor",typeId:"cosmic",stars:3},{uid:"thor",name:"Thor",typeId:"cosmic",stars:4},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:1},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:2},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:3},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:4},{uid:"ironpatriot",name:"Iron Patriot",typeId:"tech",stars:3},{uid:"ironpatriot",name:"Iron Patriot",typeId:"tech",stars:4},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:2},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:3},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:4},{uid:"kang",name:"Kang",typeId:"tech",stars:4},{uid:"rocket",name:"Rocket Raccoon",shortname:"Rocket",typeId:"tech",stars:3},{uid:"rocket",name:"Rocket Raccoon",shortname:"Rocket",typeId:"tech",stars:4},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:2},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:3},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:4},{uid:"vision",name:"Vision",typeId:"tech",stars:1},{uid:"vision",name:"Vision",typeId:"tech",stars:2},{uid:"vision",name:"Vision",typeId:"tech",stars:3},{uid:"vision",name:"Vision",typeId:"tech",stars:4},{uid:"thevision",name:"The Vision",typeId:"tech",stars:2},{uid:"thevision",name:"The Vision",typeId:"tech",stars:3},{uid:"thevision",name:"The Vision",typeId:"tech",stars:4},{uid:"ultron",name:"Ultron",typeId:"tech",stars:2},{uid:"ultron",name:"Ultron",typeId:"tech",stars:3},{uid:"ultron",name:"Ultron",typeId:"tech",stars:4},{uid:"warmachine",name:"War Machine",typeId:"tech",stars:3},{uid:"warmachine",name:"War Machine",typeId:"tech",stars:4},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:1},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:2},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:3},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:4},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:2},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:3},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:4},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:2},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:3},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:4},{uid:"deadpoolxforce",name:"Deadpool X-Force",shortname:"Deadpool",typeId:"mutant",stars:3},{uid:"deadpoolxforce",name:"Deadpool X-Force",shortname:"Deadpool",typeId:"mutant",stars:4},{uid:"magneto",name:"Magneto",typeId:"mutant",stars:3},{uid:"magneto",name:"Magneto",typeId:"mutant",stars:4},{uid:"magnetomarvelnow",name:"Magneto Marvel Now",shortname:"Magneto",typeId:"mutant",stars:3},{uid:"magnetomarvelnow",name:"Magneto Marvel Now",shortname:"Magneto",typeId:"mutant",stars:4},{uid:"storm",name:"Storm",typeId:"mutant",stars:2},{uid:"storm",name:"Storm",typeId:"mutant",stars:3},{uid:"storm",name:"Storm",typeId:"mutant",stars:4},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:1},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:2},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:3},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:4},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:1},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:2},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:3},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:4},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:2},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:3},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:4},{uid:"daredevil",name:"Daredevil",typeId:"skill",stars:3},{uid:"daredevil",name:"Daredevil",typeId:"skill",stars:4},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:1},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:2},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:3},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:4},{uid:"moonknight",name:"Moon Knight",typeId:"skill",stars:3},{uid:"moonknight",name:"Moon Knight",typeId:"skill",stars:4},{uid:"punisher",name:"Punisher",typeId:"skill",stars:2},{uid:"punisher",name:"Punisher",typeId:"skill",stars:3},{uid:"punisher",name:"Punisher",typeId:"skill",stars:4},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:2},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:3},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:4},{uid:"abomination",name:"Abomination",typeId:"science",stars:2},{uid:"abomination",name:"Abomination",typeId:"science",stars:3},{uid:"abomination",name:"Abomination",typeId:"science",stars:4},{uid:"antman",name:"Ant-Man",typeId:"science",stars:2},{uid:"antman",name:"Ant-Man",typeId:"science",stars:3},{uid:"antman",name:"Ant-Man",typeId:"science",stars:4},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:2},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:3},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:4},{uid:"captainamericawwii",name:"Captain America WWII",shortname:"Cap. America",typeId:"science",stars:3},{uid:"captainamericawwii",name:"Captain America WWII",shortname:"Cap. America",typeId:"science",stars:4},{uid:"electro",name:"Electro",typeId:"science",stars:3},{uid:"electro",name:"Electro",typeId:"science",stars:4},{uid:"hulk",name:"Hulk",typeId:"science",stars:1},{uid:"hulk",name:"Hulk",typeId:"science",stars:2},{uid:"hulk",name:"Hulk",typeId:"science",stars:3},{uid:"hulk",name:"Hulk",typeId:"science",stars:4},{uid:"rhino",name:"Rhino",typeId:"science",stars:2},{uid:"rhino",name:"Rhino",typeId:"science",stars:3},{uid:"rhino",name:"Rhino",typeId:"science",stars:4},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:1},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:2},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:3},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:4},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:2},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:3},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:4},{uid:"drstrange",name:"Doctor Strange",shortname:"Dr. Strange",typeId:"mystic",stars:3},{uid:"drstrange",name:"Doctor Strange",shortname:"Dr. Strange",typeId:"mystic",stars:4},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:2},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:3},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:4},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:1},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:2},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:3},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:4},{uid:"magik",name:"Magik",typeId:"mystic",stars:2},{uid:"magik",name:"Magik",typeId:"mystic",stars:3},{uid:"magik",name:"Magik",typeId:"mystic",stars:4},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:1},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:2},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:3},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:4},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:2},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:3},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:4}],{model:CoC.model.Champion});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.synergies=new Backbone.Collection([{fromId:"blackbolt",fromStars:2,toId:"cyclops",effectId:"block",effectAmount:10},{fromId:"blackbolt",fromStars:3,toId:"cyclops",effectId:"block",effectAmount:15},{fromId:"blackbolt",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"blackbolt",fromStars:3,toId:"ronan",effectId:"attack",effectAmount:4},{fromId:"blackbolt",fromStars:3,toId:"hulk",effectId:"critdamage",effectAmount:20},{fromId:"blackbolt",fromStars:4,toId:"cyclops",effectId:"block",effectAmount:20},{fromId:"blackbolt",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"blackbolt",fromStars:4,toId:"ronan",effectId:"attack",effectAmount:5},{fromId:"blackbolt",fromStars:4,toId:"hulk",effectId:"critdamage",effectAmount:25},{fromId:"captainmarvel",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:3,toId:"gamora",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"gamora",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"wolverine",effectId:"powergain",effectAmount:5},{fromId:"drax",fromStars:2,toId:"starlord",effectId:"perfectblock",effectAmount:3},{fromId:"drax",fromStars:2,toId:"gamora",effectId:"critdamage",effectAmount:15},{fromId:"drax",fromStars:3,toId:"starlord",effectId:"perfectblock",effectAmount:4},{fromId:"drax",fromStars:3,toId:"gamora",effectId:"critdamage",effectAmount:20},{fromId:"drax",fromStars:4,toId:"starlord",effectId:"perfectblock",effectAmount:5},{fromId:"drax",fromStars:4,toId:"gamora",effectId:"critdamage",effectAmount:25},{fromId:"gamora",fromStars:2,toId:"starlord",effectId:"armor",effectAmount:4},{fromId:"gamora",fromStars:3,toId:"starlord",effectId:"armor",effectAmount:5},{fromId:"gamora",fromStars:3,toId:"drax",effectId:"critdamage",effectAmount:20},{fromId:"gamora",fromStars:4,toId:"starlord",effectId:"armor",effectAmount:6},{fromId:"gamora",fromStars:4,toId:"drax",effectId:"critdamage",effectAmount:25},{fromId:"msmarvel",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"msmarvel",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:3,toId:"hulk",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"msmarvel",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"msmarvel",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:5},{fromId:"msmarvel",fromStars:4,toId:"hulk",effectId:"perfectblock",effectAmount:5},{fromId:"ronan",fromStars:2,toId:"blackbolt",effectId:"critdamage",effectAmount:15},{fromId:"ronan",fromStars:3,toId:"blackbolt",effectId:"critdamage",effectAmount:20},{fromId:"ronan",fromStars:3,toId:"ironman",effectId:"critrate",effectAmount:6},{fromId:"ronan",fromStars:3,toId:"gamora",effectId:"critdamage",effectAmount:20},{fromId:"ronan",fromStars:4,toId:"blackbolt",effectId:"critdamage",effectAmount:25},{fromId:"ronan",fromStars:4,toId:"ironman",effectId:"critrate",effectAmount:7},{fromId:"ronan",fromStars:4,toId:"gamora",effectId:"critdamage",effectAmount:25},{fromId:"spidermanblack",fromStars:3,toId:"storm",effectId:"armor",effectAmount:5},{fromId:"spidermanblack",fromStars:3,toId:"electro",effectId:"critrate",effectAmount:6},{fromId:"spidermanblack",fromStars:4,toId:"storm",effectId:"armor",effectAmount:6},{fromId:"spidermanblack",fromStars:4,toId:"electro",effectId:"critrate",effectAmount:7},{fromId:"superiorironman",fromStars:2,toId:"captainamerica",effectId:"critrate",effectAmount:5},{fromId:"superiorironman",fromStars:2,toId:"daredevil",effectId:"critdamage",effectAmount:15},{fromId:"superiorironman",fromStars:2,toId:"thor",effectId:"perfectblock",effectAmount:3},{fromId:"superiorironman",fromStars:3,toId:"captainamerica",effectId:"critrate",effectAmount:6},{fromId:"superiorironman",fromStars:3,toId:"daredevil",effectId:"critdamage",effectAmount:20},{fromId:"superiorironman",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"superiorironman",fromStars:4,toId:"captainamerica",effectId:"critrate",effectAmount:7},{fromId:"superiorironman",fromStars:4,toId:"daredevil",effectId:"critdamage",effectAmount:25},{fromId:"superiorironman",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"thor",fromStars:2,toId:"drstrange",effectId:"armor",effectAmount:4},{fromId:"thor",fromStars:2,toId:"ironman",effectId:"armor",effectAmount:4},{fromId:"thor",fromStars:3,toId:"drstrange",effectId:"armor",effectAmount:5},{fromId:"thor",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"thor",fromStars:3,toId:"juggernaut",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"drstrange",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"juggernaut",effectId:"armor",effectAmount:7},{fromId:"ironman",fromStars:2,toId:"thor",effectId:"perfectblock",effectAmount:3},{fromId:"ironman",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"ironman",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"ironman",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"ironman",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:5},{fromId:"ironpatriot",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"ironpatriot",fromStars:3,toId:"spiderman",effectId:"critrate",effectAmount:6},{fromId:"ironpatriot",fromStars:3,toId:"captainamerica",effectId:"critdamage",effectAmount:20},{fromId:"ironpatriot",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"ironpatriot",fromStars:4,toId:"spiderman",effectId:"critrate",effectAmount:7},{fromId:"ironpatriot",fromStars:4,toId:"captainamerica",effectId:"critdamage",effectAmount:25},{fromId:"kang",fromStars:4,toId:"blackbolt",effectId:"armor",effectAmount:6},{fromId:"kang",fromStars:4,toId:"thevision",effectId:"critrate",effectAmount:7},{fromId:"kang",fromStars:4,toId:"thor",effectId:"critrate",effectAmount:7},{fromId:"kang",fromStars:4,toId:"spidermanblack",effectId:"critrate",effectAmount:7},{fromId:"hulkbuster",fromStars:2,toId:"hulk",effectId:"critdamage",effectAmount:15},{fromId:"hulkbuster",fromStars:3,toId:"hulk",effectId:"critdamage",effectAmount:20},{fromId:"hulkbuster",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"hulkbuster",fromStars:3,toId:"superiorironman",effectId:"perfectblock",effectAmount:5},{fromId:"hulkbuster",fromStars:4,toId:"hulk",effectId:"critdamage",effectAmount:25},{fromId:"hulkbuster",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:6},{fromId:"hulkbuster",fromStars:4,toId:"superiorironman",effectId:"perfectblock",effectAmount:6},{fromId:"rocket",fromStars:3,toId:"starlord",effectId:"armor",effectAmount:5},{fromId:"rocket",fromStars:3,toId:"ronan",effectId:"critrate",effectAmount:6},{fromId:"rocket",fromStars:3,toId:"gamora",effectId:"perfectblock",effectAmount:4},{fromId:"rocket",fromStars:3,toId:"drax",effectId:"perfectblock",effectAmount:4},{fromId:"rocket",fromStars:4,toId:"starlord",effectId:"armor",effectAmount:6},{fromId:"rocket",fromStars:4,toId:"ronan",effectId:"critrate",effectAmount:7},{fromId:"rocket",fromStars:4,toId:"gamora",effectId:"perfectblock",effectAmount:5},{fromId:"rocket",fromStars:4,toId:"drax",effectId:"perfectblock",effectAmount:5},{fromId:"starlord",fromStars:2,toId:"rocket",effectId:"armor",effectAmount:4},{fromId:"starlord",fromStars:2,toId:"drax",effectId:"perfectblock",effectAmount:3},{fromId:"starlord",fromStars:3,toId:"rocket",effectId:"armor",effectAmount:5},{fromId:"starlord",fromStars:3,toId:"drax",effectId:"perfectblock",effectAmount:4},{fromId:"starlord",fromStars:3,toId:"gamora",effectId:"perfectblock",effectAmount:4},{fromId:"starlord",fromStars:4,toId:"rocket",effectId:"armor",effectAmount:6},{fromId:"starlord",fromStars:4,toId:"drax",effectId:"perfectblock",effectAmount:5},{fromId:"starlord",fromStars:4,toId:"gamora",effectId:"perfectblock",effectAmount:5},{fromId:"vision",fromStars:2,toId:"scarletwitch",effectId:"powergain",effectAmount:3},{fromId:"vision",fromStars:2,toId:"ironman",effectId:"perfectblock",effectAmount:3},{fromId:"vision",fromStars:3,toId:"scarletwitch",effectId:"powergain",effectAmount:4},{fromId:"vision",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"vision",fromStars:4,toId:"scarletwitch",effectId:"powergain",effectAmount:5},{fromId:"vision",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"thevision",fromStars:2,toId:"ironman",effectId:"health",effectAmount:4},{fromId:"thevision",fromStars:2,toId:"scarletwitch",effectId:"perfectblock",effectAmount:3},{fromId:"thevision",fromStars:3,toId:"ironman",effectId:"health",effectAmount:5},{fromId:"thevision",fromStars:3,toId:"scarletwitch",effectId:"perfectblock",effectAmount:4},{fromId:"thevision",fromStars:3,toId:"ultron",effectId:"attack",effectAmount:4},{fromId:"thevision",fromStars:4,toId:"ironman",effectId:"health",effectAmount:6},{fromId:"thevision",fromStars:4,toId:"scarletwitch",effectId:"perfectblock",effectAmount:5},{fromId:"thevision",fromStars:4,toId:"ultron",effectId:"attack",effectAmount:5},{fromId:"ultron",fromStars:2,toId:"ironman",effectId:"health",effectAmount:4},{fromId:"ultron",fromStars:2,toId:"scarletwitch",effectId:"armor",effectAmount:4},{fromId:"ultron",fromStars:3,toId:"ironman",effectId:"health",effectAmount:5},{fromId:"ultron",fromStars:3,toId:"scarletwitch",effectId:"armor",effectAmount:5},{fromId:"ultron",fromStars:4,toId:"ironman",effectId:"health",effectAmount:6},{fromId:"ultron",fromStars:4,toId:"scarletwitch",effectId:"armor",effectAmount:6},{fromId:"warmachine",fromStars:3,toId:"hulkbuster",effectId:"armor",effectAmount:5},{fromId:"warmachine",fromStars:3,toId:"hawkeye",effectId:"block",effectAmount:15},{fromId:"warmachine",fromStars:3,toId:"blackwidow",effectId:"perfectblock",effectAmount:4},{fromId:"warmachine",fromStars:4,toId:"hulkbuster",effectId:"armor",effectAmount:6},{fromId:"warmachine",fromStars:4,toId:"blackpanther",effectId:"critrate",effectAmount:7},{fromId:"warmachine",fromStars:4,toId:"hawkeye",effectId:"block",effectAmount:20},{fromId:"warmachine",fromStars:4,toId:"blackwidow",effectId:"perfectblock",effectAmount:5},{fromId:"colossus",fromStars:2,toId:"juggernaut",effectId:"critrate",effectAmount:5},{fromId:"colossus",fromStars:3,toId:"juggernaut",effectId:"critrate",effectAmount:6},{fromId:"colossus",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"colossus",fromStars:3,toId:"magik",effectId:"health",effectAmount:4},{fromId:"colossus",fromStars:4,toId:"juggernaut",effectId:"critrate",effectAmount:7},{fromId:"colossus",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"colossus",fromStars:4,toId:"magik",effectId:"health",effectAmount:5},{fromId:"cyclops",fromStars:2,toId:"wolverine",effectId:"critdamage",effectAmount:15},{fromId:"cyclops",fromStars:3,toId:"wolverine",effectId:"critdamage",effectAmount:20},{fromId:"cyclops",fromStars:3,toId:"magneto",effectId:"attack",effectAmount:4},{fromId:"cyclops",fromStars:4,toId:"wolverine",effectId:"critdamage",effectAmount:25},{fromId:"cyclops",fromStars:4,toId:"magneto",effectId:"attack",effectAmount:5},{fromId:"deadpool",fromStars:2,toId:"punisher",effectId:"perfectblock",effectAmount:3},{fromId:"deadpool",fromStars:3,toId:"rhino",effectId:"critrate",effectAmount:6},{fromId:"deadpool",fromStars:3,toId:"wolverine",effectId:"health",effectAmount:4},{fromId:"deadpool",fromStars:3,toId:"punisher",effectId:"perfectblock",effectAmount:4},{fromId:"deadpool",fromStars:4,toId:"rhino",effectId:"critrate",effectAmount:7},{fromId:"deadpool",fromStars:4,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"deadpool",fromStars:4,toId:"punisher",effectId:"perfectblock",effectAmount:5},{fromId:"deadpoolxforce",fromStars:3,toId:"moonknight",effectId:"critdamage",effectAmount:20},{fromId:"deadpoolxforce",fromStars:3,toId:"deadpool",effectId:"critdamage",effectAmount:20},{fromId:"deadpoolxforce",fromStars:4,toId:"magnetomarvelnow",effectId:"armor",effectAmount:6},{fromId:"deadpoolxforce",fromStars:4,toId:"moonknight",effectId:"critdamage",effectAmount:25},{fromId:"deadpoolxforce",fromStars:4,toId:"deadpool",effectId:"critdamage",effectAmount:25},{fromId:"magneto",fromStars:3,toId:"wolverine",effectId:"critrate",effectAmount:6},{fromId:"magneto",fromStars:3,toId:"cyclops",effectId:"block",effectAmount:15},{fromId:"magneto",fromStars:3,toId:"storm",effectId:"critdamage",effectAmount:20},{fromId:"magneto",fromStars:4,toId:"wolverine",effectId:"critrate",effectAmount:7},{fromId:"magneto",fromStars:4,toId:"cyclops",effectId:"block",effectAmount:20},{fromId:"magneto",fromStars:4,toId:"storm",effectId:"critdamage",effectAmount:25},{fromId:"magnetomarvelnow",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"magnetomarvelnow",fromStars:3,toId:"magik",effectId:"perfectblock",effectAmount:4},{fromId:"magnetomarvelnow",fromStars:3,toId:"wolverine",effectId:"critdamage",effectAmount:20},{fromId:"magnetomarvelnow",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"magnetomarvelnow",fromStars:4,toId:"magik",effectId:"perfectblock",effectAmount:5},{fromId:"magnetomarvelnow",fromStars:4,toId:"wolverine",effectId:"critdamage",effectAmount:25},{fromId:"storm",fromStars:2,toId:"blackpanther",effectId:"powergain",effectAmount:3},{fromId:"storm",fromStars:3,toId:"magik",effectId:"armor",effectAmount:6},{fromId:"storm",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"storm",fromStars:3,toId:"blackpanther",effectId:"powergain",effectAmount:4},{fromId:"storm",fromStars:4,toId:"magik",effectId:"armor",effectAmount:7},{fromId:"storm",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"storm",fromStars:4,toId:"blackpanther",effectId:"powergain",effectAmount:5},{fromId:"storm",fromStars:4,toId:"magneto",effectId:"critrate",effectAmount:7},{fromId:"wolverine",fromStars:2,toId:"cyclops",effectId:"critdamage",effectAmount:15},{fromId:"wolverine",fromStars:3,toId:"cyclops",effectId:"critdamage",effectAmount:20},{fromId:"wolverine",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"wolverine",fromStars:3,toId:"magneto",effectId:"critrate",effectAmount:6},{fromId:"wolverine",fromStars:4,toId:"cyclops",effectId:"critdamage",effectAmount:25},{fromId:"wolverine",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"wolverine",fromStars:4,toId:"magneto",effectId:"critrate",effectAmount:7},{fromId:"blackpanther",fromStars:2,toId:"ironfist",effectId:"critdamage",effectAmount:15},{fromId:"blackpanther",fromStars:3,toId:"ironfist",effectId:"critdamage",effectAmount:20},{fromId:"blackpanther",fromStars:3,toId:"storm",effectId:"powergain",effectAmount:4},{fromId:"blackpanther",fromStars:3,toId:"deadpool",effectId:"critrate",effectAmount:6},{fromId:"blackpanther",fromStars:4,toId:"ironfist",effectId:"critdamage",effectAmount:25},{fromId:"blackpanther",fromStars:4,toId:"storm",effectId:"powergain",effectAmount:5},{fromId:"blackpanther",fromStars:4,toId:"deadpool",effectId:"critrate",effectAmount:7},{fromId:"daredevil",fromStars:3,toId:"superiorironman",effectId:"critdamage",effectAmount:20},{fromId:"daredevil",fromStars:3,toId:"blackwidow",effectId:"powergain",effectAmount:4},{fromId:"daredevil",fromStars:4,toId:"superiorironman",effectId:"critdamage",effectAmount:25},{fromId:"daredevil",fromStars:4,toId:"blackwidow",effectId:"powergain",effectAmount:5},{fromId:"hawkeye",fromStars:2,
toId:"scarletwitch",effectId:"powergain",effectAmount:3},{fromId:"hawkeye",fromStars:3,toId:"scarletwitch",effectId:"powergain",effectAmount:4},{fromId:"hawkeye",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"hawkeye",fromStars:4,toId:"scarletwitch",effectId:"powergain",effectAmount:5},{fromId:"hawkeye",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"hawkeye",fromStars:4,toId:"hulk",effectId:"armor",effectAmount:6},{fromId:"punisher",fromStars:2,toId:"spiderman",effectId:"critdamage",effectAmount:15},{fromId:"punisher",fromStars:3,toId:"spiderman",effectId:"critdamage",effectAmount:20},{fromId:"punisher",fromStars:3,toId:"rhino",effectId:"perfectblock",effectAmount:4},{fromId:"punisher",fromStars:4,toId:"spiderman",effectId:"critdamage",effectAmount:25},{fromId:"punisher",fromStars:4,toId:"rhino",effectId:"perfectblock",effectAmount:5},{fromId:"wintersoldier",fromStars:2,toId:"wolverine",effectId:"armor",effectAmount:4},{fromId:"wintersoldier",fromStars:2,toId:"captainamerica",effectId:"perfectblock",effectAmount:3},{fromId:"wintersoldier",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"wintersoldier",fromStars:3,toId:"captainamerica",effectId:"perfectblock",effectAmount:4},{fromId:"wintersoldier",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"wintersoldier",fromStars:4,toId:"captainamerica",effectId:"perfectblock",effectAmount:5},{fromId:"blackwidow",fromStars:2,toId:"captainmarvel",effectId:"armor",effectAmount:4},{fromId:"blackwidow",fromStars:2,toId:"wintersoldier",effectId:"powergain",effectAmount:3},{fromId:"blackwidow",fromStars:3,toId:"hulk",effectId:"stun",effectAmount:20},{fromId:"blackwidow",fromStars:3,toId:"captainmarvel",effectId:"armor",effectAmount:5},{fromId:"blackwidow",fromStars:3,toId:"wintersoldier",effectId:"powergain",effectAmount:4},{fromId:"blackwidow",fromStars:3,toId:"hawkeye",effectId:"powergain",effectAmount:4},{fromId:"blackwidow",fromStars:4,toId:"hulk",effectId:"stun",effectAmount:25},{fromId:"blackwidow",fromStars:4,toId:"captainmarvel",effectId:"armor",effectAmount:6},{fromId:"blackwidow",fromStars:4,toId:"wintersoldier",effectId:"powergain",effectAmount:5},{fromId:"blackwidow",fromStars:4,toId:"hawkeye",effectId:"powergain",effectAmount:5},{fromId:"abomination",fromStars:2,toId:"rhino",effectId:"armor",effectAmount:4},{fromId:"abomination",fromStars:3,toId:"rhino",effectId:"armor",effectAmount:5},{fromId:"abomination",fromStars:3,toId:"hulk",effectId:"attack",effectAmount:4},{fromId:"abomination",fromStars:4,toId:"rhino",effectId:"armor",effectAmount:6},{fromId:"abomination",fromStars:4,toId:"hulk",effectId:"attack",effectAmount:5},{fromId:"antman",fromStars:2,toId:"yellowjacket",effectId:"attack",effectAmount:4},{fromId:"antman",fromStars:2,toId:"ironman",effectId:"perfectblock",effectAmount:3},{fromId:"antman",fromStars:3,toId:"yellowjacket",effectId:"attack",effectAmount:5},{fromId:"antman",fromStars:3,toId:"spiderman",effectId:"perfectblock",effectAmount:4},{fromId:"antman",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"antman",fromStars:4,toId:"hulk",effectId:"armor",effectAmount:6},{fromId:"antman",fromStars:4,toId:"yellowjacket",effectId:"attack",effectAmount:6},{fromId:"antman",fromStars:4,toId:"spiderman",effectId:"perfectblock",effectAmount:5},{fromId:"antman",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"captainamerica",fromStars:2,toId:"spiderman",effectId:"armor",effectAmount:4},{fromId:"captainamerica",fromStars:2,toId:"superiorironman",effectId:"critrate",effectAmount:5},{fromId:"captainamerica",fromStars:2,toId:"ironman",effectId:"armor",effectAmount:3},{fromId:"captainamerica",fromStars:3,toId:"wintersoldier",effectId:"armor",effectAmount:5},{fromId:"captainamerica",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"captainamerica",fromStars:3,toId:"superiorironman",effectId:"critrate",effectAmount:6},{fromId:"captainamerica",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"captainamerica",fromStars:4,toId:"wintersoldier",effectId:"armor",effectAmount:6},{fromId:"captainamerica",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"captainamerica",fromStars:4,toId:"superiorironman",effectId:"critrate",effectAmount:7},{fromId:"captainamerica",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"captainamericawwii",fromStars:3,toId:"wintersoldier",effectId:"armor",effectAmount:5},{fromId:"captainamericawwii",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"captainamericawwii",fromStars:4,toId:"wintersoldier",effectId:"armor",effectAmount:6},{fromId:"captainamericawwii",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"electro",fromStars:3,toId:"spiderman",effectId:"attack",effectAmount:4},{fromId:"electro",fromStars:3,toId:"rhino",effectId:"armor",effectAmount:5},{fromId:"electro",fromStars:4,toId:"spiderman",effectId:"attack",effectAmount:5},{fromId:"electro",fromStars:4,toId:"rhino",effectId:"armor",effectAmount:6},{fromId:"hulk",fromStars:2,toId:"thor",effectId:"critdamage",effectAmount:15},{fromId:"hulk",fromStars:3,toId:"thor",effectId:"critdamage",effectAmount:5},{fromId:"hulk",fromStars:3,toId:"abomination",effectId:"critrate",effectAmount:6},{fromId:"hulk",fromStars:3,toId:"hawkeye",effectId:"armor",effectAmount:20},{fromId:"hulk",fromStars:4,toId:"thor",effectId:"critdamage",effectAmount:6},{fromId:"hulk",fromStars:4,toId:"abomination",effectId:"critrate",effectAmount:7},{fromId:"hulk",fromStars:4,toId:"hawkeye",effectId:"armor",effectAmount:25},{fromId:"rhino",fromStars:2,toId:"spiderman",effectId:"critrate",effectAmount:5},{fromId:"rhino",fromStars:2,toId:"abomination",effectId:"armor",effectAmount:4},{fromId:"rhino",fromStars:3,toId:"spiderman",effectId:"critrate",effectAmount:6},{fromId:"rhino",fromStars:3,toId:"abomination",effectId:"armor",effectAmount:5},{fromId:"rhino",fromStars:3,toId:"electro",effectId:"perfectblock",effectAmount:4},{fromId:"rhino",fromStars:4,toId:"spiderman",effectId:"critrate",effectAmount:7},{fromId:"rhino",fromStars:4,toId:"abomination",effectId:"armor",effectAmount:6},{fromId:"rhino",fromStars:4,toId:"electro",effectId:"perfectblock",effectAmount:5},{fromId:"spiderman",fromStars:1,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:1,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:2,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:2,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"electro",effectId:"health",effectAmount:6},{fromId:"spiderman",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"spiderman",fromStars:4,toId:"wolverine",effectId:"health",effectAmount:6},{fromId:"spiderman",fromStars:4,toId:"hawkeye",effectId:"attack",effectAmount:6},{fromId:"spiderman",fromStars:4,toId:"electro",effectId:"health",effectAmount:7},{fromId:"spiderman",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"yellowjacket",fromStars:2,toId:"antman",effectId:"attack",effectAmount:4},{fromId:"yellowjacket",fromStars:3,toId:"antman",effectId:"attack",effectAmount:5},{fromId:"yellowjacket",fromStars:4,toId:"antman",effectId:"attack",effectAmount:6},{fromId:"drstrange",fromStars:3,toId:"thor",effectId:"armor",effectAmount:5},{fromId:"drstrange",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"drstrange",fromStars:3,toId:"scarletwitch",effectId:"block",effectAmount:15},{fromId:"drstrange",fromStars:3,toId:"blackbolt",effectId:"perfectblock",effectAmount:4},{fromId:"drstrange",fromStars:4,toId:"thor",effectId:"armor",effectAmount:6},{fromId:"drstrange",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"drstrange",fromStars:4,toId:"scarletwitch",effectId:"block",effectAmount:20},{fromId:"drstrange",fromStars:4,toId:"blackbolt",effectId:"perfectblock",effectAmount:5},{fromId:"ironfist",fromStars:2,toId:"blackpanther",effectId:"armor",effectAmount:4},{fromId:"ironfist",fromStars:3,toId:"blackpanther",effectId:"armor",effectAmount:5},{fromId:"ironfist",fromStars:3,toId:"drstrange",effectId:"armor",effectAmount:5},{fromId:"ironfist",fromStars:4,toId:"blackpanther",effectId:"armor",effectAmount:6},{fromId:"ironfist",fromStars:4,toId:"drstrange",effectId:"armor",effectAmount:6},{fromId:"ironfist",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"juggernaut",fromStars:2,toId:"colossus",effectId:"critrate",effectAmount:5},{fromId:"juggernaut",fromStars:3,toId:"drstrange",effectId:"attack",effectAmount:4},{fromId:"juggernaut",fromStars:3,toId:"colossus",effectId:"critrate",effectAmount:6},{fromId:"juggernaut",fromStars:3,toId:"hulk",effectId:"critrate",effectAmount:6},{fromId:"juggernaut",fromStars:4,toId:"drstrange",effectId:"attack",effectAmount:5},{fromId:"juggernaut",fromStars:4,toId:"colossus",effectId:"critrate",effectAmount:7},{fromId:"juggernaut",fromStars:4,toId:"hulk",effectId:"critrate",effectAmount:7},{fromId:"magik",fromStars:2,toId:"colossus",effectId:"health",effectAmount:4},{fromId:"magik",fromStars:3,toId:"storm",effectId:"armor",effectAmount:5},{fromId:"magik",fromStars:3,toId:"colossus",effectId:"health",effectAmount:5},{fromId:"magik",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"magik",fromStars:4,toId:"storm",effectId:"armor",effectAmount:6},{fromId:"magik",fromStars:4,toId:"colossus",effectId:"health",effectAmount:6},{fromId:"magik",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"magik",fromStars:4,toId:"juggernaut",effectId:"critrate",effectAmount:7},{fromId:"scarletwitch",fromStars:2,toId:"captainmarvel",effectId:"armor",effectAmount:4},{fromId:"scarletwitch",fromStars:3,toId:"captainmarvel",effectId:"armor",effectAmount:5},{fromId:"scarletwitch",fromStars:3,toId:"vision",effectId:"powergain",effectAmount:4},{fromId:"scarletwitch",fromStars:4,toId:"captainmarvel",effectId:"armor",effectAmount:6},{fromId:"scarletwitch",fromStars:4,toId:"vision",effectId:"powergain",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:2,toId:"magik",effectId:"health",effectAmount:4},{fromId:"unstoppablecolossus",fromStars:2,toId:"juggernaut",effectId:"critdamage",effectAmount:15},{fromId:"unstoppablecolossus",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:3,toId:"magik",effectId:"health",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"unstoppablecolossus",fromStars:3,toId:"juggernaut",effectId:"critdamage",effectAmount:20},{fromId:"unstoppablecolossus",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"unstoppablecolossus",fromStars:4,toId:"magik",effectId:"health",effectAmount:6},{fromId:"unstoppablecolossus",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:4,toId:"juggernaut",effectId:"critdamage",effectAmount:25}],{model:CoC.model.Synergy});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.crystals=new Backbone.Collection([{uid:"versus",name:"Versus",image:"versus",description:"Acquired when you win a versus match."},{uid:"arena",name:"Arena",image:"battlechips",description:"Buy for 2000 $BATTLECHIPS$."},{uid:"alliance",name:"Alliance",image:"alliance",description:"Buy for 1000 $LOYALTY$."},{uid:"daily",name:"Daily",image:"daily",description:"Acquired once every 24 hours."},{uid:"2star",name:"2-Star",image:"2star"},{uid:"premium",name:"Premium",image:"premium",description:"Buy for 100 $UNITS$."},{uid:"3star",name:"3-Star",image:"3star",description:"Buy for 400 $UNITS$, rare event."},{uid:"4star",name:"4-Star",image:"4star",description:"Buy for 2500 $UNITS$, very rare event."}],{model:CoC.model.Crystal}),CoC.data.crystalChampions=new Backbone.Collection([],{model:CoC.model.CrystalChampion}),CoC.data.crystalChampions.add([{crystalId:"versus",championId:"punisher",championStars:2}]),CoC.data.crystalChampions.add([{crystalId:"arena",championId:"punisher",championStars:3},{crystalId:"arena",championId:"punisher",championStars:4}]),CoC.data.crystalChampions.add([{crystalId:"alliance",championId:"unstoppablecolossus",championStars:2},{crystalId:"alliance",championId:"unstoppablecolossus",championStars:3}]),CoC.data.crystalChampions.add([{crystalId:"daily",championId:"gamora",championStars:1},{crystalId:"daily",championId:"vision",championStars:1},{crystalId:"daily",championId:"colossus",championStars:1},{crystalId:"daily",championId:"blackpanther",championStars:1},{crystalId:"daily",championId:"hawkeye",championStars:1},{crystalId:"daily",championId:"hulk",championStars:1},{crystalId:"daily",championId:"scarletwitch",championStars:1},{crystalId:"daily",championId:"gamora",championStars:2},{crystalId:"daily",championId:"vision",championStars:2},{crystalId:"daily",championId:"colossus",championStars:2},{crystalId:"daily",championId:"blackpanther",championStars:2},{crystalId:"daily",championId:"hawkeye",championStars:2},{crystalId:"daily",championId:"gamora",championStars:3},{crystalId:"daily",championId:"colossus",championStars:3},{crystalId:"daily",championId:"blackpanther",championStars:3}]),CoC.data.crystalChampions.add([{crystalId:"2star",championId:"blackbolt",championStars:2},{crystalId:"2star",championId:"drax",championStars:2},{crystalId:"2star",championId:"gamora",championStars:2},{crystalId:"2star",championId:"superiorironman",championStars:2},{crystalId:"2star",championId:"thor",championStars:2},{crystalId:"2star",championId:"hulkbuster",championStars:2},{crystalId:"2star",championId:"ironman",championStars:2},{crystalId:"2star",championId:"starlord",championStars:2},{crystalId:"2star",championId:"thevision",championStars:2},{crystalId:"2star",championId:"ultron",championStars:2},{crystalId:"2star",championId:"vision",championStars:2},{crystalId:"2star",championId:"colossus",championStars:2},{crystalId:"2star",championId:"cyclops",championStars:2},{crystalId:"2star",championId:"storm",championStars:2},{crystalId:"2star",championId:"wolverine",championStars:2},{crystalId:"2star",championId:"blackpanther",championStars:2},{crystalId:"2star",championId:"blackwidow",championStars:2},{crystalId:"2star",championId:"hawkeye",championStars:2},{crystalId:"2star",championId:"wintersoldier",championStars:2},{crystalId:"2star",championId:"abomination",championStars:2},{crystalId:"2star",championId:"antman",championStars:2},{crystalId:"2star",championId:"captainamerica",championStars:2},{crystalId:"2star",championId:"hulk",championStars:2},{crystalId:"2star",championId:"rhino",championStars:2},{crystalId:"2star",championId:"spiderman",championStars:2},{crystalId:"2star",championId:"ironfist",championStars:2},{crystalId:"2star",championId:"juggernaut",championStars:2},{crystalId:"2star",championId:"magik",championStars:2},{crystalId:"2star",championId:"scarletwitch",championStars:2}]),CoC.data.crystalChampions.add([{crystalId:"premium",championId:"blackbolt",championStars:2},{crystalId:"premium",championId:"drax",championStars:2},{crystalId:"premium",championId:"gamora",championStars:2},{crystalId:"premium",championId:"ronan",championStars:2},{crystalId:"premium",championId:"superiorironman",championStars:2},{crystalId:"premium",championId:"thor",championStars:2},{crystalId:"premium",championId:"hulkbuster",championStars:2},{crystalId:"premium",championId:"ironman",championStars:2},{crystalId:"premium",championId:"starlord",championStars:2},{crystalId:"premium",championId:"thevision",championStars:2},{crystalId:"premium",championId:"ultron",championStars:2},{crystalId:"premium",championId:"vision",championStars:2},{crystalId:"premium",championId:"colossus",championStars:2},{crystalId:"premium",championId:"cyclops",championStars:2},{crystalId:"premium",championId:"storm",championStars:2},{crystalId:"premium",championId:"wolverine",championStars:2},{crystalId:"premium",championId:"blackpanther",championStars:2},{crystalId:"premium",championId:"blackwidow",championStars:2},{crystalId:"premium",championId:"hawkeye",championStars:2},{crystalId:"premium",championId:"wintersoldier",championStars:2},{crystalId:"premium",championId:"abomination",championStars:2},{crystalId:"premium",championId:"antman",championStars:2},{crystalId:"premium",championId:"captainamerica",championStars:2},{crystalId:"premium",championId:"hulk",championStars:2},{crystalId:"premium",championId:"rhino",championStars:2},{crystalId:"premium",championId:"spiderman",championStars:2},{crystalId:"premium",championId:"ironfist",championStars:2},{crystalId:"premium",championId:"juggernaut",championStars:2},{crystalId:"premium",championId:"magik",championStars:2},{crystalId:"premium",championId:"scarletwitch",championStars:2},{crystalId:"premium",championId:"blackbolt",championStars:3},{crystalId:"premium",championId:"captainmarvel",championStars:3},{crystalId:"premium",championId:"msmarvel",championStars:3},{crystalId:"premium",championId:"drax",championStars:3},{crystalId:"premium",championId:"gamora",championStars:3},{crystalId:"premium",championId:"ronan",championStars:3},{crystalId:"premium",championId:"superiorironman",championStars:3},{crystalId:"premium",championId:"thor",championStars:3},{crystalId:"premium",championId:"hulkbuster",championStars:3},{crystalId:"premium",championId:"ironman",championStars:3},{crystalId:"premium",championId:"ironpatriot",championStars:3},{crystalId:"premium",championId:"rocket",championStars:3},{crystalId:"premium",championId:"starlord",championStars:3},{crystalId:"premium",championId:"ultron",championStars:3},{crystalId:"premium",championId:"thevision",championStars:3},{crystalId:"premium",championId:"colossus",championStars:3},{crystalId:"premium",championId:"cyclops",championStars:3},{crystalId:"premium",championId:"magneto",championStars:3},{crystalId:"premium",championId:"storm",championStars:3},{crystalId:"premium",championId:"wolverine",championStars:3},{crystalId:"premium",championId:"blackpanther",championStars:3},{crystalId:"premium",championId:"blackwidow",championStars:3},{crystalId:"premium",championId:"daredevil",championStars:3},{crystalId:"premium",championId:"hawkeye",championStars:3},{crystalId:"premium",championId:"wintersoldier",championStars:3},{crystalId:"premium",championId:"abomination",championStars:3},{crystalId:"premium",championId:"antman",championStars:3},{crystalId:"premium",championId:"captainamerica",championStars:3},{crystalId:"premium",championId:"captainamericawwii",championStars:3},{crystalId:"premium",championId:"electro",championStars:3},{crystalId:"premium",championId:"hulk",championStars:3},{crystalId:"premium",championId:"rhino",championStars:3},{crystalId:"premium",championId:"spiderman",championStars:3},{crystalId:"premium",championId:"drstrange",championStars:3},{crystalId:"premium",championId:"ironfist",championStars:3},{crystalId:"premium",championId:"juggernaut",championStars:3},{crystalId:"premium",championId:"magik",championStars:3},{crystalId:"premium",championId:"scarletwitch",championStars:3},{crystalId:"premium",championId:"blackbolt",championStars:4},{crystalId:"premium",championId:"captainmarvel",championStars:4},{crystalId:"premium",championId:"msmarvel",championStars:4},{crystalId:"premium",championId:"drax",championStars:4},{crystalId:"premium",championId:"gamora",championStars:4},{crystalId:"premium",championId:"superiorironman",championStars:4},{crystalId:"premium",championId:"thor",championStars:4},{crystalId:"premium",championId:"hulkbuster",championStars:4},{crystalId:"premium",championId:"ironman",championStars:4},{crystalId:"premium",championId:"ironpatriot",championStars:4},{crystalId:"premium",championId:"rocket",championStars:4},{crystalId:"premium",championId:"starlord",championStars:4},{crystalId:"premium",championId:"ultron",championStars:4},{crystalId:"premium",championId:"thevision",championStars:4},{crystalId:"premium",championId:"colossus",championStars:4},{crystalId:"premium",championId:"magneto",championStars:4},{crystalId:"premium",championId:"storm",championStars:4},{crystalId:"premium",championId:"wolverine",championStars:4},{crystalId:"premium",championId:"blackpanther",championStars:4},{crystalId:"premium",championId:"blackwidow",championStars:4},{crystalId:"premium",championId:"daredevil",championStars:4},{crystalId:"premium",championId:"hawkeye",championStars:4},{crystalId:"premium",championId:"wintersoldier",championStars:4},{crystalId:"premium",championId:"abomination",championStars:4},{crystalId:"premium",championId:"antman",championStars:4},{crystalId:"premium",championId:"captainamerica",championStars:4},{crystalId:"premium",championId:"captainamericawwii",championStars:4},{crystalId:"premium",championId:"electro",championStars:4},{crystalId:"premium",championId:"hulk",championStars:4},{crystalId:"premium",championId:"spiderman",championStars:4},{crystalId:"premium",championId:"drstrange",championStars:4},{crystalId:"premium",championId:"ironfist",championStars:4},{crystalId:"premium",championId:"juggernaut",championStars:4},{crystalId:"premium",championId:"magik",championStars:4},{crystalId:"premium",championId:"scarletwitch",championStars:4}]),CoC.data.crystalChampions.add([{crystalId:"3star",championId:"blackbolt",championStars:3},{crystalId:"3star",championId:"captainmarvel",championStars:3},{crystalId:"3star",championId:"msmarvel",championStars:3},{crystalId:"3star",championId:"drax",championStars:3},{crystalId:"3star",championId:"gamora",championStars:3},{crystalId:"3star",championId:"ronan",championStars:3},{crystalId:"3star",championId:"superiorironman",championStars:3},{crystalId:"3star",championId:"thor",championStars:3},{crystalId:"3star",championId:"hulkbuster",championStars:3},{crystalId:"3star",championId:"ironman",championStars:3},{crystalId:"3star",championId:"ironpatriot",championStars:3},{crystalId:"3star",championId:"rocket",championStars:3},{crystalId:"3star",championId:"starlord",championStars:3},{crystalId:"3star",championId:"ultron",championStars:3},{crystalId:"3star",championId:"thevision",championStars:3},{crystalId:"3star",championId:"colossus",championStars:3},{crystalId:"3star",championId:"cyclops",championStars:3},{crystalId:"3star",championId:"magneto",championStars:3},{crystalId:"3star",championId:"storm",championStars:3},{crystalId:"3star",championId:"wolverine",championStars:3},{crystalId:"3star",championId:"blackpanther",championStars:3},{crystalId:"3star",championId:"blackwidow",championStars:3},{crystalId:"3star",championId:"daredevil",championStars:3},{crystalId:"3star",championId:"hawkeye",championStars:3},{crystalId:"3star",championId:"wintersoldier",championStars:3},{crystalId:"3star",championId:"abomination",championStars:3},{crystalId:"3star",championId:"antman",championStars:3},{crystalId:"3star",championId:"captainamerica",championStars:3},{crystalId:"3star",championId:"captainamericawwii",championStars:3},{crystalId:"3star",championId:"electro",championStars:3},{crystalId:"3star",championId:"hulk",championStars:3},{crystalId:"3star",championId:"rhino",championStars:3},{crystalId:"3star",championId:"spiderman",championStars:3},{crystalId:"3star",championId:"drstrange",championStars:3},{crystalId:"3star",championId:"ironfist",championStars:3},{crystalId:"3star",championId:"juggernaut",championStars:3},{crystalId:"3star",championId:"magik",championStars:3},{crystalId:"3star",championId:"scarletwitch",championStars:3}]),CoC.data.crystalChampions.add([{crystalId:"4star",championId:"captainmarvel",championStars:4},{crystalId:"4star",championId:"msmarvel",championStars:4},{crystalId:"4star",championId:"drax",championStars:4},{crystalId:"4star",championId:"gamora",championStars:4},{crystalId:"4star",championId:"superiorironman",championStars:4},{crystalId:"4star",championId:"thor",championStars:4},{crystalId:"4star",championId:"hulkbuster",championStars:4},{crystalId:"4star",championId:"ironman",championStars:4},{crystalId:"4star",championId:"ironpatriot",championStars:4},{crystalId:"4star",championId:"rocket",championStars:4},{crystalId:"4star",championId:"starlord",championStars:4},{crystalId:"4star",championId:"ultron",championStars:4},{crystalId:"4star",championId:"thevision",championStars:4},{crystalId:"4star",championId:"colossus",championStars:4},{crystalId:"4star",championId:"magneto",championStars:4},{crystalId:"4star",championId:"storm",championStars:4},{crystalId:"4star",championId:"wolverine",championStars:4},{crystalId:"4star",championId:"blackpanther",championStars:4},{crystalId:"4star",championId:"blackwidow",championStars:4},{crystalId:"4star",championId:"daredevil",championStars:4},{crystalId:"4star",championId:"hawkeye",championStars:4},{crystalId:"4star",championId:"wintersoldier",championStars:4},{crystalId:"4star",championId:"abomination",championStars:4},{crystalId:"4star",championId:"antman",championStars:4},{crystalId:"4star",championId:"captainamerica",championStars:4},{crystalId:"4star",championId:"captainamericawwii",championStars:4},{crystalId:"4star",championId:"electro",championStars:4},{crystalId:"4star",championId:"hulk",championStars:4},{crystalId:"4star",championId:"spiderman",championStars:4},{crystalId:"4star",championId:"drstrange",championStars:4},{crystalId:"4star",championId:"ironfist",championStars:4},{crystalId:"4star",championId:"juggernaut",championStars:4},{crystalId:"4star",championId:"magik",championStars:4},{crystalId:"4star",championId:"scarletwitch",championStars:4}]);var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.guides=CoC.data.guides||{},function(){var t={},e=_.uniq(CoC.data.champions.pluck("uid"));_(e).each(function(e){var r=t[e]={uid:e,champion:function(){var t=CoC.data.champions.findWhere({uid:e}).clone();return t.set("stars",0),t}(),data:{unavailable:!0}};CoC.data.guides.raw[e]&&(r.data=CoC.data.guides.raw[e],void 0!==r.data.grades&&(void 0!==r.data.grades.normal&&r.champion.set("grade",r.data.grades.normal),void 0!==r.data.grades.awakened&&r.champion.set("gradeAwakened",r.data.grades.awakened)))}),CoC.data.guides.each=function(r){_(e).each(function(e){r.call(CoC.data.guides,t[e])})},CoC.data.guides.get=function(e){return t[e]}}();var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.MessageView=Backbone.View.extend({tagName:"div",template:_.template('<div class="message selectable"><%= message %></div>'),render:function(){return this.$el.html(this.template(this.model)),this}});var CoC=CoC||{};CoC.view=CoC.view||{},function(){var t={};CoC.view.ChampionView=Backbone.View.extend({tagName:"div",template:_.template($("#championTemplate").html()),render:function(){var e=this.model,r=e.toJSON();r.portrait=e.portrait();var a=this.$el;a.html(this.template(r)),a.addClass("champion").addClass(e.get("typeId")),a.attr("uid",e.get("uid")).attr("stars",e.get("stars"));var o=a.find(".portrait"),n=a.find(".portrait-placeholder");return t[o[0].src]?(o.addClass("loaded"),n.addClass("loaded")):(o.addClass("fade"),n.addClass("fade")),this}}),CoC.view.championPortraitLoaded=function(e){t[e.src]=!0;var r=$(e.parentNode),a=r.find(".portrait"),o=r.find(".portrait-placeholder");a.addClass("loaded"),o.addClass("loaded")}}();var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.RosterView=Backbone.View.extend({initialize:function(){var t=this;t._championViews={},CoC.data.roster.bind("remove",function(e){t.render()})},events:{"click .champion":"clicked"},clicked:function(t){t.preventDefault(),t.stopPropagation();var e=$(t.currentTarget).attr("uid"),r=parseInt($(t.currentTarget).attr("stars")),a=CoC.data.roster.findWhere({uid:e,stars:r});a&&CoC.ui.roster.popup(t.currentTarget,a)},championView:function(t){var e=this,r=t.fid(),a=this._championViews[r];return void 0===a&&(a=new CoC.view.ChampionView({model:t}),a.render(),t.bind("change",function(){a.render()}),t.bind("destroy",function(){delete e._championViews[r]}),this._championViews[r]=a),a},render:function(){var t=this,e=[],r=0;CoC.data.roster.sortBy(CoC.settings.getValue("roster-sort"),"descending"===CoC.settings.getValue("roster-sort-direction"));var a={1:CoC.settings.getValue("roster-filter-stars-1"),2:CoC.settings.getValue("roster-filter-stars-2"),3:CoC.settings.getValue("roster-filter-stars-3"),4:CoC.settings.getValue("roster-filter-stars-4"),5:CoC.settings.getValue("roster-filter-stars-5")};CoC.data.roster.each(function(o){if(a[o.get("stars")]===!0){var n=t.championView(o);n&&(e.push(n.el),r++)}}),e.unshift(new CoC.view.MessageView({model:{message:r+" of "+CoC.data.roster.length+" Champions"}}).render().el),this.$el.empty();var o=document.createDocumentFragment();return _(e).each(function(t){o.appendChild(t)}),this.$el.append(o),this}});var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.AddChampionsView=Backbone.View.extend({initialize:function(){var t=this;t._championViews={},CoC.data.champions.each(function(e){var r=new CoC.view.ChampionView({model:e});r.render(),t._championViews[e.fid()]=r}),t._addChampion=function(t){var e=$(t).attr("uid"),r=parseInt($(t).attr("stars"),10),a=CoC.data.roster.findWhere({uid:e,stars:r});if(!a){var o=CoC.data.champions.findWhere({uid:e,stars:r}).clone();CoC.data.roster.add(o),o.save(),CoC.tracking.event("roster","add",e+"-"+r)}}},events:{"click .champion":"championClicked","click .add-all":"addAllClicked"},championClicked:function(t){t.preventDefault(),this._addChampion(t.currentTarget),this.render()},addAllClicked:function(t){t.preventDefault();var e=this,r=$(t.currentTarget).parent().find(".champion");r.each(function(t,r){e._addChampion(r)}),this.render()},render:function(){var t=this;t.$el.empty();var e=new Backbone.Collection(CoC.data.champions.where({stars:t._stars}));_(CoC.data.roster.where({stars:t._stars})).each(function(t){var r=e.findWhere({uid:t.get("uid"),stars:t.get("stars")});e.remove(r)});var r=document.createDocumentFragment();return r.appendChild($("<button>",{"class":"add-all","data-theme":"b",disabled:e.length>0?void 0:""}).text("Add All")[0]),e.each(function(e){var a=t._championViews[e.fid()];r.appendChild(a.el)}),t.$el.append(r),this.$el.trigger("create"),this},stars:function(t){this._stars=t},destroy:function(){this.remove(),this.unbind()}});var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.TeamView=Backbone.View.extend({template:_.template($("#teamsTemplate").html()),events:{"click .champion":"championClicked","tap .synergy":"synergyTapped","click .synergy":"synergyClicked","mouseover .synergy":"synergyHoverBegin","mouseout .synergy":"synergyHoverEnd"},championClicked:function(t){t.preventDefault();var e=$(t.currentTarget).attr("uid");CoC.ui.guides.open(e)},synergyTapped:function(t){var e=$(t.currentTarget).hasClass("selected");return this.synergyHoverEnd(t),e||this.synergyHoverBegin(t),t.preventDefault(),!1},synergyClicked:function(t){var e=$(t.currentTarget),r=e.closest(".team");return r.hasClass("locked")?(r.removeClass("locked"),e.hasClass("selected")||(this.synergyHoverEnd.call(this,t),this.synergyHoverBegin.call(this,t),r.addClass("locked"))):r.addClass("locked"),t.preventDefault(),!1},synergyHoverBegin:function(t){var e=$(t.currentTarget),r=e.closest(".team"),a=r.find(".champion"),o=e.attr("championIds").split(" ");r.hasClass("locked")||(r.addClass("selected"),e.addClass("selected"),a.each(function(t,e){var r=$(e);-1!==o.indexOf(r.attr("uid"))&&r.addClass("selected")}))},synergyHoverEnd:function(t){var e=$(t.currentTarget).closest(".team");e.hasClass("locked")||(e.removeClass("selected"),e.find(".champion").removeClass("selected"),e.find(".synergy").removeClass("selected"))},size:function(t){this._size=t},teams:function(t){if(void 0===t||0===t.length)return this._teams=void 0,void(this._message="Found 0 Teams");var e=0;this._teams=[];for(var r=0;r<t.length;r++){
for(var a=t[r],o={},n=[],i=0;i<a.length;i++)for(var s=0;s<a.length;s++)if(i!==s){var c=CoC.data.synergies.findWhere({fromId:a[i].get("uid"),fromStars:a[i].get("stars"),toId:a[s].get("uid")});if(void 0!==c){e++;var d=o[c.get("effectId")];void 0===d&&(d=o[c.get("effectId")]={uid:c.get("effectId"),amount:0,champions:{}}),d.amount+=c.get("effectAmount"),d.champions[c.get("fromId")]=!0,d.champions[c.get("toId")]=!0}}n=[];for(var f in o){var d=CoC.data.effects.findWhere({uid:o[f].uid}).clone();d.set("amount",o[f].amount),d.championIds(o[f].champions),n.push(d)}this._teams.push({champions:a,effects:n})}this._message="Found "+this._teams.length+" "+(1===this._teams.length?"Team":"Teams"),e>0?this._message+=" with "+e+" Synergies":this._message+="."},extras:function(t){this._extras=void 0===t||0===t.length?void 0:t},render:function(){return this.$el.html(this.template({message:this._message,size:this._size,teams:this._teams,extras:this._extras,renderMessage:function(t){var e=new CoC.view.MessageView({model:{message:t}});return e.render().el.outerHTML},renderChampion:function(t){var e=new CoC.view.ChampionView({model:t});return e.render().el.outerHTML}})),this}});var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.GuideViewHelpers={gradeSpan:function(t){if(void 0===t)return"";var e="grade-"+t.toLowerCase().replace("-","").replace("+","").replace(" ","-");return'<span class="'+e+'">'+t+"</span>"},ratingSpan:function(t){return void 0===t?"":'<span class="rating"><span class="rating-'+t+'"> '+t+" </span>/ 5</span>"},damageTypeSpan:function(t){if(void 0===t)return"";var e="damage-"+t.toLowerCase().replace(" ","-");return'<span class="'+e+'">'+t+"</span>"},abilitySpan:function(t){if(void 0===t)return"";var e="ability-"+t.toLowerCase().replace(" ","-");return'<span class="'+e+'">'+t+"</span>"},rangeSpan:function(t){if(void 0===t)return"";var e="range-"+t.toLowerCase().replace(" ","-");return'<span class="'+e+'">'+t+"</span>"},crystalStarsSpan:function(t){if(void 0===t)return"";string="";for(var e=0;e<t.champions.length;e++)e>0&&(string+=e==t.champions.length-1?" and ":", "),string+=t.champions[e].stars();return'<span class="stars">'+string+"</span>"},availabilityImage:function(t){for(var e in t)return'<img class="crystal" src="images/crystals/crystal_'+e.toLowerCase().replace(" ","_")+'.png" />';return""},availabilitySpan:function(t){if(void 0===t)return"";var e="availability-"+t.toLowerCase().replace(" ","-");return'<span class="'+e+'">'+t+" Crystal</span>"},joinSpans:function(t,e){if(void 0===t||!t.length)return"";for(var r=[],a=0;a<t.length;a++)r.push(e.call(this,t[a]));return r.join(", ")},definition:function(t,e){if(void 0===t)return"";if("string"==typeof t)return"<b>"+e.call(this,t)+"</b>";for(var r in t)return"<b>"+e.call(this,r)+":</b> "+t[r];return""},crystals:function(t){void 0===this._crystals&&(this._crystals=[]);var e=this._crystals[t];if(void 0===e){for(var r={},a=[],o=CoC.data.crystalChampions.where({championId:t}),n=0;n<o.length;n++){var i=o[n].crystal(),s=o[n].champion(),c=i.get("name");void 0===r[c]&&(r[c]={crystal:i,champions:[]},a.push(c)),r[c].champions.push(s)}e=[];for(var n=0;n<a.length;n++)e.push(r[a[n]]);this._crystals[t]=e}return e},synergiesFrom:function(t){var e,r=this._synergiesFrom[t];if(void 0===r){r=CoC.data.synergies.where({fromId:t}),e={};for(var a=0;a<r.length;a++){var o=r[a].get("toId"),n=e[o];(!n||n.from().get("stars")>=r[a].from().get("stars"))&&(e[o]=r[a])}r=[];for(var o in e)r.push(e[o]);this._synergiesFrom[t]=r}return _(r)},_synergiesFrom:{},synergiesTo:function(t){var e,r=this._synergiesTo[t];if(void 0===r){r=CoC.data.synergies.where({toId:t}),e={};for(var a=0;a<r.length;a++){var o=r[a].get("fromId"),n=e[o];(!n||n.to().get("stars")<r[a].to().get("stars"))&&(e[o]=r[a])}r=[];for(var o in e)r.push(e[o]);this._synergiesTo[t]=r}return _(r)},_synergiesTo:{}},CoC.view.GuideView=Backbone.View.extend({tagName:"div",guideTemplate:_.template($("#guideTemplate").html()),initialize:function(){this._guides={},this._guideChampionsView=this.model},events:{"click .synergy .champion-title":"synergyChampionClick","click .synergy .effect":"synergyEffectClick"},synergyChampionClick:function(t){var e=$(t.currentTarget).attr("uid");void 0!==e&&this._guideChampionsView.select(e)},synergyEffectClick:function(t){if(!CoC.ui.hasSelection()){var e=$(t.currentTarget),r=e.attr("uid");if(void 0!==r){var a=CoC.data.effects.findWhere({uid:r});a&&($("#popup-guide-effect .ui-content").text(a.get("description")),$("#popup-guide-effect").popup("open",{positionTo:e}))}}},render:function(t){if(void 0===t)return this;var e=this._guides[t];if(void 0===e){var r=CoC.data.guides.get(t),a={};_.extend(a,r),_.extend(a,CoC.view.GuideViewHelpers),this._guides[t]=e=this.guideTemplate(a)}return void 0===e?this:(this.$el.empty(),this.$el.append(e),this.$el.trigger("create"),this.$el.removeClass("dirty"),this)}});var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.GuideChampionsView=Backbone.View.extend({optionTemplate:_.template($("#guideSelectOptionTemplate").html()),optgroupTemplate:_.template($("#guideSelectOptgroupTemplate").html()),initialize:function(){var t=this;t._init=!0,t._instant=!0,t._championViews=[],t._uids=[],t._indices={},t._selector=$("#guide-champions-selector"),t._guideView=new CoC.view.GuideView({model:t,el:$("#guide-content")[0]});var e={},r=[];CoC.data.guides.each(function(a){var o=a.champion,n=new CoC.view.ChampionView({model:o});t._championViews.push($("<li>").append(n.render().el)[0]);var i=o.get("typeId");void 0===e[i]&&(e[i]=$("<optgroup>",{label:o.get("typeId")}),t._selector.append(e[i]),r.push(i)),e[i].append($("<option>",{value:a.uid}).text(o.get("name"))),t._indices[a.uid]=t._uids.length,t._uids.push(a.uid)}),t._selector.change(function(e){var r=this.value,a=t._indices[r];void 0!==t._indices[r]&&setTimeout(function(){t._instant=!0,t.sly.activate(a)},0)}),$.mobile.document.on("pagebeforeshow","#guide-champions-selector-dialog",function(e,a){var o=$(e.currentTarget);o.find("li[role=option]").each(function(e){$(this).addClass("ui-li-has-icon").find("a").html(t.optionTemplate({champion:CoC.data.guides.get(t._uids[e]).champion}))}),o.find("li[role=heading]").each(function(e){var a=$(this),o=r[e];a.data("typeId"),a.html(t.optgroupTemplate({type:CoC.data.types.findWhere({uid:o})}))})}),t.sly=new Sly("#guide-champions-frame",{horizontal:1,itemNav:"forceCentered",activateMiddle:1,smart:1,activateOn:"click",scrollBy:1,mouseDragging:1,touchDragging:1,releaseSwing:1,speed:0},{active:function(e,r){t.activate.call(t,e,r,t._instant?0:300)}}).init(),$(window).bind("resize",function(){t.reload.call(t)})},events:{"click li.active":"openMenu"},openMenu:function(t){t.stopPropagation(),t.preventDefault();var e=$(t.currentTarget).find(".champion");e&&e.attr("uid")===this._selected&&$("#guide-champions-selector").selectmenu("open")},disable:function(){this.sly.set("keyboardNavBy",null)},enable:function(){this.sly.set("keyboardNavBy","items")},reload:function(){var t=this;CoC.hasUrlParam("page-guide")!==!1&&(t.sly.reload(),t._reloadTimeout&&clearTimeout(t._reloadTimeout),t._reloadTimeout=setTimeout(function(){CoC.hasUrlParam("page-guide")!==!1&&(t.sly.reload(),t._reloadTimeout=void 0)},250))},selected:function(){return this._selected?this._selected:0},select:function(t){var e=void 0===t?void 0:"string"==typeof t?this._indices[t]:t;void 0===e&&(e=0),this._instant=!0,this.sly.activate(e,!0)},activate:function(t,e,r){this._init&&(this._init=!1,r=0);var a=this,o=$(a.sly.items[e].el).find(".champion").attr("uid");a._activateTimeout&&clearTimeout(a._activateTimeout),r>0?a._activateTimeout=setTimeout(function(){a.guide.call(a,o),a._activateTimeout=void 0},r):a.guide.call(a,o)},guide:function(t){CoC.hasUrlParam("page-guide")!==!1&&(this._selected=t,this._instant=!1,this._selector.val(t).selectmenu("refresh"),this._guideView.render(t),$.mobile.silentScroll(0),CoC.setUrlParam("page-guide","guide",t))},render:function(){this.$el.empty();var t=document.createDocumentFragment();return _(this._championViews).each(function(e){t.appendChild(e)}),this.$el.append(t),this},destroy:function(){this.remove(),this.unbind()}});var CoC=CoC||{};CoC.view=CoC.view||{},CoC.view.CrystalsViewHelpers={parseDescription:function(t){return t.get("description").replace(/([0-9]+)\s*[$]([A-Z]+)[$]/gi,function(t,e,r){return'<span class="amount"><img class="currency" src="images/currency/'+r.toLowerCase()+'.png" />'+e+"</span>"})}},CoC.view.CrystalsView=Backbone.View.extend({template:_.template($("#crystalsTemplate").html()),initialize:function(){var t=this;t._views=[],CoC.data.crystals.each(function(e){var r,a={};_.extend(a,{crystal:e}),_.extend(a,CoC.view.CrystalsViewHelpers),r=$(t.template(a));for(var o=0;o<r.length;o++)t._views.push(r[o])})},render:function(){var t=document.createDocumentFragment();return this.$el.empty(),_(this._views).each(function(e){t.appendChild(e)}),this.$el.append(t),this.$el.trigger("create"),this}});var CoC=CoC||{};CoC.tracking=CoC.tracking||{},function(t,e,r,a,o,n,i){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,n=e.createElement(r),i=e.getElementsByTagName(r)[0],n.async=1,n.src=a,i.parentNode.insertBefore(n,i)}(window,document,"script","//www.google-analytics.com/analytics.js","_gaTracker"),_gaTracker("create","UA-64735733-1","auto"),CoC.tracking.pageView=function(){if("localhost"!==location.hostname){for(var t=["send","pageview"],e=0;e<arguments.length;e++)t.push(arguments[e]);_gaTracker.apply(_gaTracker,t)}},CoC.tracking.event=function(){if("localhost"!==location.hostname){for(var t=["send","event"],e=0;e<arguments.length;e++)t.push(arguments[e]);_gaTracker.apply(_gaTracker,t)}},window.onerror=function(t,e,r){if("localhost"!==location.hostname){for(var a="	"+(-1!==e.lastIndexOf("/")?e.substr(e.lastIndexOf("/")+1):e)+":"+r,o=155-unescape(encodeURIComponent(a)).length;unescape(encodeURIComponent(t)).length>o;)t=t.substr(0,t.length-1);_gaTracker("send","exception",{exDescription:t+a,exFatal:!0})}};var CoC=CoC||{};CoC.manager=CoC.manager||{},CoC.manager.version="1.1.0",CoC.manager.initialize=function(){console.log("Contest of Champions - Roster Manager v"+CoC.manager.version),(CoC.settings.getValue("hasDefaults")!==!0||CoC.settings.getValue("version")!==CoC.manager.version)&&(CoC.settings.preset.apply("defaults",!0,!0),CoC.settings.setValue("hasDefaults",!0),CoC.settings.setValue("version",CoC.manager.version))},CoC.manager.reset=function(){localStorage.clear(),location.reload()},CoC.hasUrlParam=function(t,e){return void 0===t?!1:void 0!==e?void 0!==$.url().fparam(t+"?"+e):$.url().attr("fragment").replace(/[?].*/,"")===t},CoC.getUrlParam=function(t,e){return void 0===t||void 0===e?void 0:$.url().fparam(t+"?"+e)},CoC.setUrlParam=function(t,e,r){if(void 0!==t&&void 0!==e&&void 0!==r){var a="#"+t+"?"+e+"="+r;window.location.hash=a;var o=location.pathname;location.hash&&(o+=location.hash),CoC.tracking.pageView(o)}},CoC.settings=CoC.settings||{},CoC.settings.loadObjectFromLocalStorage=function(t){var e={};if(window&&window.Storage){var r=localStorage.getItem(t);e=JSON.parse(r)}return(null===e||void 0===e)&&(e={}),e},CoC.settings.saveObjectToLocalStorage=function(t,e){window&&window.Storage&&localStorage.setItem(t,JSON.stringify(e))},CoC.settings.misc=CoC.settings.loadObjectFromLocalStorage("misc"),CoC.settings.getValue=function(t){return CoC.settings.misc[t]},CoC.settings.setValue=function(t,e){CoC.settings.misc[t]=e,CoC.settings.saveObjectToLocalStorage("misc",CoC.settings.misc)},CoC.settings.weights=CoC.settings.loadObjectFromLocalStorage("weights"),CoC.settings.getWeight=function(t){var e=CoC.settings.weights[t];return void 0===e?1:e},CoC.settings.setWeight=function(t,e){CoC.settings.weights[t]=e,CoC.settings.saveObjectToLocalStorage("weights",CoC.settings.weights)},CoC.settings.keys=CoC.settings.keys||{},CoC.settings.keys.duplicates=new function(){this.map={},this.get=function(t){var e=this.map[t];return void 0===e&&(e=this.map[t]="duplicates-"+t),e}},CoC.settings.setDuplicateWeight=function(t,e){NaN===parseInt(t)||2>t||t>5||CoC.settings.setWeight(CoC.settings.keys.duplicates.get(t),e)},CoC.settings.getDuplicateWeight=function(t){return CoC.settings.getWeight(CoC.settings.keys.duplicates.get(t))};var CoC=CoC||{};CoC.algorithm=CoC.algorithm||{},function(){"use strict";function t(t,e){return e===!1?1:t.value()}function e(t){if(void 0===e.cache&&(e.cache={0:1,1:1,length:1}),e.cache.length<t){for(var r=e.cache.length;t>=r;r++)e.cache[r]=r*e.cache[r-1];e.cache.length=t}return e.cache[t]}function r(t,r){for(var a=t/e(r),o=t-1;o>t-r;o--)a*=o;return a}function a(t){for(var e,r,a=t.length;a>0;)r=Math.floor(Math.random()*a),a--,r!=a&&(e=t[a],t[a]=t[r],t[r]=e)}CoC.algorithm.greedy=new function(){function e(e,r,a,o){for(var n=2;5>=n;n++)a[n]=CoC.settings.getDuplicateWeight(n);for(var i,s,n=0;n<e.length;n++)i=e[n],s={},_(CoC.data.synergies.where({fromId:i.get("uid"),fromStars:i.get("stars")})).each(function(t){var e=t.effect();s[t.get("toId")]={id:t.get("toId"),fromId:t.get("fromId"),fromStars:t.get("fromStars"),value:CoC.settings.getWeight(t.get("effectId"))*t.get("effectAmount")/e.get("base")}}),r.push({id:i.get("uid"),stars:i.get("stars"),quest:i.get("quest"),data:i,type:CoC.data.types.indexOf(i.type()),synergies:s,value:t(i,o)})}function a(t,e){var r={teams:[],extras:[]};for(var a in t){var o=[];for(var n in t[a].champions)o.push(t[a].champions[n].data);r.teams.push(o)}if(void 0!==e)for(var n in e)r.extras.push(e[n].data);return r}function o(t,e,r,a,s){if(e>=t.length)return null;var d=n(t,i([],t[e]),[],c([t[e]]),e+1,r,a,s);if(null==d)return null;var f=o(t,e+1,r,a,s);return l(d,f)>=0?d:f}function n(t,e,r,a,o,c,m,u){if(e.length==c)return u&&u.callback(++u.current,u.max),{champions:e,synergies:r,value:f(e,r,a,m)};if(o==t.length)return null;var h=n(t,i(e,t[o]),d(r,e,t[o]),s(a,t[o]),o+1,c,m,u),p=n(t,e,r,a,o+1,c,m,u);return l(h,p)>=0?h:p}function i(t,e){var r=t.slice();return r.push(e),r}function s(t,e){var r=t.slice();return r[e.type]++,r}function c(t){var e,r=[0,0,0,0,0,0];if(void 0!==t)for(var e=0;e<t.length;e++)r[t[e].type]++;return r}function d(t,e,r){for(var a,o=t.slice(),a=0;a<e.length;a++)void 0!==e[a].synergies[r.id]&&o.push(e[a].synergies[r.id]),void 0!==r.synergies[e[a].id]&&o.push(r.synergies[e[a].id]);return o}function f(t,e,r,a){var o,n=0,i=0,s=1;for(o in e)n+=e[o].value;for(o in t)i+=t[o].value;for(o in r)r[o]>1&&(s*=a[r[o]]);return n*i*s}function l(t,e){return null==e?1:t.value-e.value}function m(t,e){var r,a,o,n=[0,0,0,0,0,0],i={champions:[],synergies:t.synergies,value:0};for(r=0;r<t.champions.length;r++){o=!0;t:for(a=0;a<t.synergies.length;a++){var c=t.synergies[a].fromId===t.champions[r].id&&t.synergies[a].fromStars===t.champions[r].stars,d=t.synergies[a].id===t.champions[r].id;if(d||c){s(n,t.champions[r]),i.champions.push(t.champions[r]);break t}}}return i.value=f(i.champions,i.synergies,n,e),i}this.uid="greedy",this.name="Greedy",this.description="Slow & Consistent. Finds the best possible team and then does the same with remainders.",this.canQuest=!0,this.build=function(t){var i,s=parseInt(t.size,10),d={},f=[],l=[],u=[],h=null;if(e(t.champions,f,u,t.levels),t.quest)for(var p=f.length-1;p>=0;p--)f[p].quest&&(l.push(f[p]),f.splice(p,1));if(t.progress&&(h={current:0,max:function(e){for(var a=0,o=f.length;o>e&&(a+=r(o,e),!t.quest);o-=e);return a}(l.length?s-l.length:s),callback:t.progress}),l.length>0){if(l.length>s)i=o(l,0,s,u,h);else{var g=[],I=c(l);i=n(f,l,g,I,0,s,u,h)}i&&i.value>0&&(d[0]=i)}else{var v=0;do if(i=o(f,0,s,u,h)){if(!i.value)break;t.quest||(i=m(i,u)),d[v]=i,d.length=++v;for(var y in i.champions)f.splice(f.indexOf(i.champions[y]),1);if(t.quest)break}while(null!=i);var C=0;for(var p in d)"length"!==p&&(C+=s-d[p].champions.length);for(;f.length<C;){var p=d.length-1;for(var S in d[p].champions)f.push(d[p].champions[S]),C--;delete d[p],d.length--}for(var w,p=d.length-1;p>=0;p--){var i;if(d[p].champions.length<s){var i=n(f,d[p].champions,d[p].synergies,c(d[p].champions),0,s,u,h);if(i){for(var y in i.champions)w=f.indexOf(i.champions[y]),-1!=w&&f.splice(w,1);d[p]=i}else{for(var y in d[p].champions)f.push(d[p].champions[y]);delete d[p]}}}delete d.length}return a(d,t.extras&&t.quest!==!0?f:void 0)}},CoC.algorithm.shuffle=new function(){function e(e,r,a,n,i){for(f=2;5>=f;f++)n[f]=CoC.settings.getDuplicateWeight(f);for(var s,c,d,f=0;f<e.length;f++){c=e[f],s=o(c),r[s]={id:c.get("uid"),fid:s,type:c.get("typeId"),value:t(c,i),data:c},a[s]={},d=CoC.data.synergies.where({fromId:c.get("uid"),fromStars:c.get("stars")});for(var l=0;l<d.length;l++){var m=d[l],u=m.effect();a[s][m.get("toId")]={value:CoC.settings.getWeight(m.get("effectId"))*m.get("effectAmount")/u.get("base")}}}}function r(t,e,r,a){for(var n={teams:[],extras:[]},i=[],s=0;s<t.length;s+=e){var c=a(t,s);if(c>0){for(var d=[],f=0;e>f;f++)d.push(t[s+f].data);d.sort(function(t,e){return o(t).localeCompare(o(e))}),i.push({team:d,value:c})}else if(r)for(var f=0;e>f&&s+f<t.length;f++)n.extras.push(t[s+f].data)}i.sort(function(t,e){return e.value-t.value});for(var s=0;s<i.length;s++)n.teams.push(i[s].team);return n}function o(t){return[t.get("uid"),t.get("stars")].join("-")}function n(t){var e=[];for(var r in t)e.push(t[r].fid);return e.sort(),e.join("-")}this.uid="shuffle",this.name="Shuffle",this.description="Fast & Varied. Does iterated scans and swaps, balancing teams as best as possible.",this.canQuest=!1,this.build=function(t){function o(t,e,r){var a=i(t,e),o=i(t,r),n=i(t,e,r),s=i(t,r,e),c=(a>0?1:0)+(o>0?1:0),d=(n>0?1:0)+(s>0?1:0);if(c>d)return!1;if(d>c||n+s>a+o){var f=t[e];return t[e]=t[r],t[r]=f,p++,!0}return!1}function i(t,e,r){if(e>=f)return 0;var a=Math.floor(e/c)*c,o=t.slice(a,a+c);void 0!==r&&(o[e%c]=t[r]);var i=n(o),s=h[i];if(void 0===s){for(var d=0,l=0,p={},g=0;g<o.length;g++){var I=o[g];d+=I.value;for(var v=m[I.fid],y=0;y<o.length;y++){var C=v[o[y].id];C&&(l+=C.value)}p[I.type]=(p[I.type]||0)+1}var S=1;for(g in p)p[g]>1&&(S*=u[p[g]]||1);h[i]=s=d*l*S}return s}function s(){I=[];for(var t in l)I.push(l[t]);a(I),y.push(I),g=!1}var c=parseInt(t.size,10),d=Math.floor(t.champions.length/c),f=d*c,l={},m={},u={},h={};e(t.champions,l,m,u,t.levels);var p,g,I,v=16,y=[];s();for(var C=0;v>C;C++){t.progress&&t.progress(C,v),p=0;for(var S=0;f>S;S++)for(var w=(Math.floor(S/c)+1)*c;w<I.length&&!o(I,S,w);w++);for(var k=!0,S=0;f>S;S+=c)0===i(I,S)&&(k=!1);if(0===p){if(!g&&!k){for(var b=-1,S=0;f>S;S+=c)0===i(I,S)&&(b=S);if(-1!==b){for(var A,S=0;c>S&&f+S<I.length;S++)A=I[b+S],I[b+S]=I[f+S],I[f+S]=A;g=!0;continue}}s()}}t.progress&&t.progress(v,v);for(var _={},S=0;S<y.length;S++){for(var x=y[S],$=0,w=0;f>w;w+=c)$+=i(x,w);(void 0===_.value||_.value<$)&&(_.value=$,_.array=x)}return r(_.array,c,t.extras,function(t,e){return i(t,e)})}},CoC.algorithm.distinct=new function(){function e(t,e,a,s,c,d){var f=d-t.length,l=d-e.length;f==l&&(f=l=e.length-1);var m=r(o(n(e,s))[0],a,s,c,f).champions,u=r(o(n(t,s))[0],a,s,c,l).champions,h=[e,m],p=[t,u],g={};for(var I in h)for(var v in p){var y=h[I].length>p[v].length?[h[I],p[v]]:[p[v],h[I]],C=y[0].concat(y[1]);for(i(C,s);C.length>d;){for(var S=void 0,w=0;w<C.length;w++){var k=C.slice();k.splice(w,1);var b=i(k,s);(void 0===S||b<S.value)&&(S={index:w,value:b})}S&&C.splice(S.index,1)}(void 0===g.count||C.length<=d&&C.length>g.count)&&(g.team=C,g.count=C.length)}var C=g.team;if(C.length<d){for(var A=[],I=0;I<t.length;I++)A.push(t[I]);for(var I=0;I<e.length;I++)A.push(e[I]);for(;C.length<d&&A.length;)C.push(A.shift())}return C}function r(t,e,r,a,o){for(var n={},c=l(t.synergies,e,a),d=0;d<t.synergies.length;d++){var f=t.synergies[d];void 0===n[f.fromId]&&(n[f.fromId]={hero:c[d],synergies:[],count:0}),n[f.fromId].synergies.push(f),n[f.fromId].count++,void 0===n[f.toId]&&(n[f.toId]={hero:c[d],synergies:[],count:0}),n[f.toId].synergies.push(f),n[f.toId].count++}for(var m={},d=0;d<c.length;d++){var u=0,h=c[d].id,p=s(c[d]);n[p]&&(u+=n[p].count),n[h]&&(u+=n[h].count),(void 0===m.value||u>m.value)&&(m={id:c[d].id,fid:c[d].fid,hero:c[d],value:u})}for(var g=[],I=0;I<t.synergies.length;I++){var f=t.synergies[I];(f.toId===m.id||f.fromId===m.fid)&&g.push(f)}var v=l(g,e,a);if(v.length>o){v.splice(v.indexOf(m.hero),1);for(var y=[m.hero];y.length<o;){for(var C=null,d=0;d<v.length;d++){var u=i(y.concat([v[d]]),r);(!C||u>C.value)&&(C={index:d,value:u,hero:v[d]})}C&&(v.splice(C.index,1),y.push(C.hero))}v=y}(1===v.length||0===i(v,r))&&(v=[]);for(var d=0;d<v.length;d++)c.splice(c.indexOf(v[d]),1);return{champions:v,extras:c}}function a(t,e){var r=[];for(var a in e.fids)t.heroIds[a]||r.push(e.fids[a]);return r}function o(t){for(var e,r,a,o,n=[],i={},s=0;s<t.length;s++)if(e=t[s],0!==e.value){if(r=a=i[e.toId],o=i[e.fromId],a){if(o&&a!=o){a.synergies=a.synergies.concat(o.synergies);for(var c in o.synergies)i[o.synergies[c].toId]=a,i[o.synergies[c].fromId]=a;n.splice(n.indexOf(o),1),r=a}}else r=o;r||(r={synergies:[]},n.push(r)),i[e.toId]=r,i[e.fromId]=r,r.synergies.push(e)}return n.sort(function(t,e){return t.synergies.length-e.synergies.length}),n}function n(t,e){for(var r=[],a={},o={},n=0;n<t.length;n++){var i=s(t[n]);o[i]=t[n],a[t[n].id]=!0}for(var i in o)for(var c in e.from[i])a[c]&&r.push(e.from[i][c]);return r}function i(t,e){for(var r=0,a=0;a<t.length;a++)r+=t[a].value;if(0===r)return 0;for(var o=0,i=n(t,e),a=0;a<i.length;a++)o+=i[a].value;if(0===o)return 0;for(var s=1,c={},a=0;a<t.length;a++)c[t[a].type]=(c[t[a].type]||0)+1;for(a in c)c[a]>1&&(s*=CoC.settings.getDuplicateWeight(c[a])||1);return r*o*s}function s(t){return[t.id,t.stars].join("-")}function c(t){for(var e=[],r=0;r<t.length;r++)e.push(s(t[r]));return e.join("#")}function d(t){function e(t,e,a,o){var n=r[t][e];void 0===n&&(r[t][e]=n={}),n[a]=o}for(var r={to:{},from:{}},a=0;a<t.length;a++)for(var o=t[a],n=CoC.data.synergies.where({fromId:o.get("uid"),fromStars:o.get("stars")}),i=0;i<n.length;i++){var c=n[i],d=c.effect(),f={fromId:s({id:o.get("uid"),stars:o.get("stars")}),toId:c.get("toId"),value:CoC.settings.getWeight(c.get("effectId"))*c.get("effectAmount")/d.get("base")};e("from",f.fromId,f.toId,f),e("to",f.toId,o.get("uid"),f)}return r}function f(e,r){for(var a={fids:{},ids:{}},o=0;o<e.length;o++){var n=e[o],i={id:n.get("uid"),stars:n.get("stars"),type:n.get("typeId"),value:t(n,r),champion:n};i.fid=s(i),a.fids[i.fid]=i;var c=a.ids[i.id];c||(a.ids[i.id]=c=[]),c.push(e[o])}return a}function l(t,e,r){for(var a=[],o={},n={},i=0;i<t.length;i++)o[t[i].toId]=!0,n[t[i].fromId]=!0;for(var s in e.fids){var c=e.fids[s],d=c.id;r.heroIds[s]||(o[d]?a.push(c):n[s]&&a.push(c))}return a}function m(t,e,r){var a=s(r);t.heroIds[a]||(t.heroCount++,t.heroIds[a]=!0,e.heroIds[a]=!0,e.champions.push(r),e.tid=c(e.champions))}function u(t,e){var r={champions:[],heroIds:{},tid:c(e)};if(!t.map[r.tid]){for(var a=0;a<e.length;a++){var o=s(e[a]);t.heroCount++,t.heroIds[o]=!0,r.heroIds[o]=!0,r.champions.push(e[a])}t.map[r.tid]=r,t.list.push(r)}}function h(t,e){if(t.map[e.tid]){for(var r in e.heroIds)t.heroCount--,delete t.heroIds[r];for(var a=0;a<t.list.length;a++)if(e.tid===t.list[a].tid){t.list.splice(a,1);break}delete t.map[e.tid]}}function p(t){for(var e=[],r=0;r<t.list.length;r++){for(var a=[],o=0;o<t.list[r].champions.length;o++)a.push(t.list[r].champions[o].champion);e.push(a)}return e}function g(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].champion);return e}this.uid="distinct",this.name="Distinct",this.description="Fast & Consistent. Gets available synergy connections and then splits distinct groups into teams.",this.canQuest=!1,this.build=function(t){var s,c,I,v,y=parseInt(t.size,10),C=f(t.champions,t.levels),S=d(t.champions),w={map:{},list:[],heroIds:{},heroCount:0},k=a(w,C);t.progress&&t.progress(10,t.champions.length);var b=Math.floor(t.champions.length/y);do{s=n(a(w,C),S),c=o(s);do{t.progress&&t.progress(w.heroCount,t.champions.length);for(var A=c.length-1;A>=0;A--){var s=c[A].synergies,_=l(s,C,w);if(_.length<=y&&i(_,S)>0){var x=i(_,S);u(w,_),c.splice(A,1)}}for(var $=!1,T=-1,j=0,A=0;A<c.length;A++){var s=c[A].synergies;if(s){var _=l(s,C,w);_.length>y&&_.length>j&&(T=A,j=_.length)}}if(-1!==T){var z=c[T];c.splice(T,1);var M=r(z,C,S,w,y);if(i(M.champions,S)>0&&u(w,M.champions),M.extras){var s=o(n(M.extras,S));for(var A in s)c.push(s[A])}$=!0}}while($);k=a(w,C);var P=function(){for(var t={},e=0,r=1;y>r;r++)t[r]=[];for(var r=0;r<w.list.length;r++){var a=w.list[r].champions.length;y-a>0&&(e+=y-a,t[a].push({size:a,team:w.list[r]}))}return t};t:for(;w.list.length>b;){k=a(w,C);for(var B=P(),E=y;E>1;E--)for(var A=2;E>A;A++){var V=B[A],O=B[E-A];for(var D in V)for(var N in O)if(V[D]!==O[N]){var W=V[D].team.champions.concat(O[N].team.champions);if(i(W,S)>0){h(w,V[D].team),h(w,O[N].team),u(w,W);continue t}}}k=a(w,C),B=P();for(var A=2;y>A;A++){var V=B[A],O=B[y-A+1];for(var D in V)for(var N in O)if(V[D]!==O[N]){var W=e(V[D].team.champions,O[N].team.champions,C,S,w,y);if(i(W,S)>0){h(w,V[D].team),h(w,O[N].team),u(w,W);continue t}}}k=a(w,C);for(var H=void 0,A=0;A<w.list.length;A++)if(w.list[A].champions.length<y){var x=i(w.list[A].champions,S);(void 0===H||x<H.value)&&(H={value:x,team:w.list[A]})}H&&h(w,H.team)}k=a(w,C),w.list.sort(function(t,e){return e.champions.length-t.champions.length});for(var A=0;A<w.list.length;A++)for(;w.list[A].champions.length<y&&k.length>0;){for(var W=w.list[A],q=void 0,F=0;F<k.length;F++){var x=i([k[F]].concat(W.champions),S);(void 0===q||x>q.value)&&(q={index:F,hero:k[F],value:x})}q&&(m(w,W,q.hero),k=a(w,C))}k=a(w,C),I=!1;for(var A=0;A<w.list.length;A++)w.list[A].champions.length!=y&&(I=!0);v=w.list.length==b;var R=function(){for(var t=n(k,S),e=0;e<t.length;e++)if(t[e].value>0)return!0;return!1}()}while(I||!v&&R);return t.progress&&t.progress(t.champions.length,t.champions.length),{teams:p(w),extras:t.extras?g(k):void 0}}}}();var CoC=CoC||{};CoC.roster={},CoC.roster.initialize=function(){var t={};CoC.data.types.each(function(e,r){t[e.get("uid")]=r});var e=Backbone.Collection.extend({model:CoC.model.Champion,localStorage:new Backbone.LocalStorage("coc-roster"),sortBy:function(e,r){this._order="name"===e?[{field:"name",order:r?"asc":"desc"},{field:"stars",order:"desc"}]:"type"===e?[{field:"typeId",order:r?"asc":"desc",map:t},{field:"stars",order:"desc"},{field:"name",order:"asc"}]:"stars"===e?[{field:"stars",order:r?"desc":"asc"},{field:"typeId",order:"asc",map:t},{field:"name",order:"asc"}]:void 0,this.sort()},comparator:function(t,e){if(this._order)for(var r=0;r<this._order.length;r++){var a;if(a=this._order[r].map?this._order[r].map[t.get(this._order[r].field)]>this._order[r].map[e.get(this._order[r].field)]:t.get(this._order[r].field)>e.get(this._order[r].field))return"desc"!==this._order[r].order?1:-1;if(t.get(this._order[r].field)!==e.get(this._order[r].field))return"desc"!==this._order[r].order?-1:1}return 0}});CoC.data.roster=new e,CoC.data.roster.sortBy("stars"),CoC.data.roster.fetch(),CoC.data.roster.each(function(t){var e=t.update();e?t.save():t.destroy()})},CoC.roster.clear=function(){for(;CoC.data.roster.length>0;)CoC.data.roster.first().destroy()},CoC.roster.filtered=function(){var t={1:CoC.settings.getValue("build-filter-stars-1"),2:CoC.settings.getValue("build-filter-stars-2"),3:CoC.settings.getValue("build-filter-stars-3"),4:CoC.settings.getValue("build-filter-stars-4"),5:CoC.settings.getValue("build-filter-stars-5")};return CoC.data.roster.filter(function(e){return t[e.get("stars")]})},CoC.roster.csvExport=function(t,e){var t=t||"\n",r=[];return r.push(["Id","Stars","Rank","Level","Awakened"].join(",")),CoC.data.roster.each(function(t){r.push(['"'+t.get("uid")+'"',t.get("stars"),t.get("rank"),t.get("level"),t.get("awakened")].join(","))}),r.join(t)},CoC.roster.csvImport=function(t,e){for(var r=t.match(/[^\r\n]+/g),a=0;a<r.length;a++)if(0!==a||"Id,Stars,Rank,Level,Awakened"!==r[a].replace(/["]/g,"")){var o=r[a].split(",");if(5!=o.length)throw"Invalid roster CSV";var n=o[0].replace(/["]/g,"").toLowerCase(),i=parseInt(o[1].replace(/["]/g,""),10),s=parseInt(o[2].replace(/["]/g,""),10),c=parseInt(o[3].replace(/["]/g,""),10),d=parseInt(o[4].replace(/["]/g,""),10);if("string"!=typeof n||isNaN(i)||isNaN(s)||isNaN(c)||isNaN(d))console.error("Invalid line in "+e+":"+(a+1));else{var f=CoC.data.roster.findWhere({uid:n,stars:i});void 0===f&&(f=CoC.data.champions.findWhere({uid:n,stars:i}).clone(),CoC.data.roster.add(f)),void 0!==f?(f.set("rank",s),f.set("level",c),f.set("awakened",d),f.save()):console.error('Champion not found "'+n+'" in '+e+":"+(a+1))}}};var CoC=CoC||{};CoC.settings=CoC.settings||{},CoC.settings.preset=CoC.settings.preset||{},CoC.settings.preset.list=[],CoC.settings.preset.ids=function(t){var e=[];for(var r in CoC.settings.preset.list)(void 0===t||t===CoC.settings.preset.list[r].category)&&e.push(CoC.settings.preset.list[r].id);return e},CoC.settings.preset.get=function(t){for(var e in CoC.settings.preset.list)if(CoC.settings.preset.list[e].id===t)return CoC.settings.preset.list[e];return null},CoC.settings.preset.info=function(t){var e=CoC.settings.preset.get(t);return e?{id:e.id,name:e.name,category:e.category}:null},CoC.settings.preset.apply=function(t,e,r){var a=CoC.settings.preset.get(t);if(a){if(void 0!==e)for(var o in a.weights)(e===!0||e(o,a.weights[o]))&&CoC.settings.setWeight(o,a.weights[o]);if(void 0!==r)for(var o in a.settings)(r===!0||r(o,a.settings[o]))&&CoC.settings.setValue(o,a.settings[o])}},CoC.settings.preset.add=function(t,e,r,a){var o=t?[t,e].join("-").toLowerCase():e.toLowerCase();CoC.settings.preset.list.push({id:o,name:e,category:t,weights:r,settings:a})},CoC.settings.preset.add(null,"Defaults",{attack:6,stun:5,critrate:4,critdamage:4,powergain:2,perfectblock:1,block:1,armor:1,health:1,"duplicates-2":.8,"duplicates-3":.4,"duplicates-4":.2,"duplicates-5":.1},{"roster-sort":"stars","roster-sort-direction":"descending","roster-filter-stars-5":!0,"roster-filter-stars-4":!0,"roster-filter-stars-3":!0,"roster-filter-stars-2":!0,"roster-filter-stars-1":!0,"build-algorithm":"shuffle","build-size":3,"build-levels":!0,"build-filter-stars-5":!0,"build-filter-stars-4":!0,"build-filter-stars-3":!0,"build-filter-stars-2":!0,"build-filter-stars-1":!0,"build-quest-group":!1,"build-include-extras":!0}),CoC.settings.preset.add("Synergies","Offensive",{attack:6,stun:5,critrate:4,critdamage:4,powergain:2,perfectblock:1,block:1,armor:1,health:1}),CoC.settings.preset.add("Synergies","Balanced",{attack:1,stun:1,critrate:1,critdamage:1,powergain:1,perfectblock:1,block:1,armor:1,health:1}),CoC.settings.preset.add("Synergies","Defensive",{attack:1,stun:3,critrate:1,critdamage:1,powergain:2,perfectblock:5,block:5,armor:4,health:3}),CoC.settings.preset.add("Duplicates","All",{"duplicates-2":1,"duplicates-3":1,"duplicates-4":1,"duplicates-5":1}),CoC.settings.preset.add("Duplicates","Balanced",{"duplicates-2":.8,"duplicates-3":.4,"duplicates-4":.2,"duplicates-5":.1}),CoC.settings.preset.add("Duplicates","None",{"duplicates-2":0,"duplicates-3":0,"duplicates-4":0,"duplicates-5":0});var CoC=CoC||{};CoC.ui=CoC.ui||{},CoC.ui.workerScriptUrl="js/worker-teams.min.js?1",CoC.ui.initialize=function(){$("#popup-share").css("display","block").enhanceWithin().popup(),$("#share-facebook").click(function(){CoC.tracking.event("share","facebook")}),$("#share-twitter").click(function(){CoC.tracking.event("share","twitter")}),$("#share-googleplus").click(function(){CoC.tracking.event("share","googleplus")})},CoC.ui.roster=new function(){this.initialize=function(){this._initialized||(this.view=new CoC.view.RosterView({el:$("#roster")[0]}),this._initialized=!0)},this.popup=function(t,e){function r(){$("#roster-configure-level").empty();for(var t=1,r=e.levels();r>=t;t++)$("#roster-configure-level").append($("<option>").val(t).text(t));$("#roster-configure-level").unbind("change").change(function(t){var r=parseInt(t.target.value,10);e.set("level",r),e.save(),$("#roster-configure-level").selectmenu("refresh")}).val(e.get("level")).selectmenu("refresh")}$(t).addClass("selected"),$("#popup-roster-configure").one("popupafterclose",function(){$(t).removeClass("selected");
}),$("#roster-configure-stars").text(""),$("#roster-configure-stars").append(function(){for(var t="",r=0;r<e.get("stars");r++)t+="<span class='star'></span>";return t}()),e.get("awakened")>0?$("#roster-configure-stars").addClass("awakened"):$("#roster-configure-stars").removeClass("awakened"),$(".roster-configure-guide").unbind("click").bind("click",function(t){t.preventDefault(),$("#popup-roster-configure").one("popupafterclose",function(){CoC.ui.guides.open(e.get("uid"))}),$("#popup-roster-configure").popup("close")}),$("#roster-configure-image").prop("src",e.image()),$("#roster-configure-name").prop("class",e.get("typeId")).text(e.get("name")),$("#roster-configure-type").prop("src",CoC.data.types.findWhere({uid:e.get("typeId")}).get("image")),$("#roster-configure-rank").empty();for(var a=1,o=e.ranks();o>=a;a++)$("#roster-configure-rank").append($("<option>").val(a).text(a));$("#roster-configure-rank").unbind("change").change(function(t){var a=parseInt(t.target.value,10);e.set("rank",a),e.set("level",1),e.save(),r(),$("#roster-configure-rank").selectmenu("refresh")}).val(e.get("rank")).selectmenu("refresh"),r(),$("#roster-configure-awakened").empty(),$("#roster-configure-awakened").append($("<option>").val(0).text("None"));for(var a=1;99>=a;a++)$("#roster-configure-awakened").append($("<option>").val(a).text(a));$("#roster-configure-awakened").unbind("change").change(function(t){var r=parseInt(t.target.value,10);e.set("awakened",r),e.save(),$("#roster-configure-awakened").selectmenu("refresh"),$("#roster-configure-stars").attr("class",r>0?"awakened":"")}).val(e.get("awakened")).selectmenu("refresh"),$("#roster-configure-quest").prop("checked",e.get("quest")).checkboxradio("refresh").unbind("change").change(function(t){e.set("quest",t.target.checked?!0:!1),e.save()}),$("#roster-configure-delete").unbind("click").click(function(t){t.preventDefault(),$("#roster .champion").removeClass("selected"),$("#popup-roster-configure").one("popupafterclose",function(){$("#popup-roster-delete-confirm").popup("open",{positionTo:"window"})}),$("#popup-roster-configure").popup("close")}),$("#roster-delete-confirm-name").attr("class",e.get("typeId")).text(e.get("name")),$("#roster-delete-confirm-stars").text("").attr("class",e.get("awakened")>0?"awakened":"");for(var a=0;a<e.get("stars");a++)$("#roster-delete-confirm-stars").append($("<span>",{"class":"star"}));$("#roster-delete-confirm-yes").unbind("click").click(function(t){t.preventDefault();var r=e.get("uid"),a=e.get("stars");$("#popup-roster-delete-confirm").popup("close"),e.destroy(),CoC.tracking.event("roster","delete",r+"-"+a)}),$("#roster-delete-confirm-no").unbind("click").click(function(t){t.preventDefault(),$("#popup-roster-delete-confirm").popup("close")}),$("#popup-roster-configure").popup("open",{positionTo:$(t)})},this.render=function(){this.view.render()}},CoC.ui.add=new function(){this.initialize=function(){this._initialized||(this._stars=2,this.view=new CoC.view.AddChampionsView({el:$("#add-champions")[0]}),this.view.stars(this._stars),this._initialized=!0)},this.setStars=function(t){this._stars=t,this.view.stars(this._stars),this.render()},this.render=function(){this.view.render(),$("#page-add #add-stars button").removeClass("ui-btn-active"),$("#page-add #add-stars button[stars="+this._stars+"]").addClass("ui-btn-active")},this.show=function(){}},CoC.ui.teams=new function(){var t=void 0!==window.Worker&&!("file:"==window.location.protocol&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1);this.initialize=function(){this._initialized||(this.initWorker(),this.view=new CoC.view.TeamView({el:$("#teams")[0]}),this._initialized=!0)},this.empty=!0,this.render=function(t,e){$("#teams").removeClass("dirty"),this.empty=!1,this.view.size(e),this.view.teams(t.teams),this.view.extras(t.extras),this.view.render()},this.initWorker=function(){t&&(this._nextWorker=new Worker(CoC.ui.workerScriptUrl))},this.getWorker=function(){return t?(this.destroyWorker(),this._currentWorker=this._nextWorker||new Worker(CoC.ui.workerScriptUrl),this._nextWorker=new Worker(CoC.ui.workerScriptUrl),this._currentWorker):null},this.destroyWorker=function(){t&&this._currentWorker&&(this._currentWorker.terminate(),delete this._currentWorker)},this.build=function(){$("#teams").addClass("dirty");var t=CoC.settings.getValue("build-size");void 0===t&&(t=3);var e=CoC.roster.filtered(),r=CoC.algorithm[CoC.settings.getValue("build-algorithm")]||CoC.algorithm.shuffle,a=CoC.settings.getValue("build-quest-group")===!0,o=CoC.settings.getValue("build-quest-group")===!1||!r.canQuest,n=CoC.settings.getValue("build-levels")===!0;$("#team-build-progress input").val(0).slider("refresh"),$("#team-build-progress").removeClass("hidden");var i=new Date,s=!1,c=CoC.ui.teams.getWorker();if(c)try{for(var d=[],f=0;f<e.length;f++)d.push(e[f].toJSON());c.onmessage=function(e){if("progress"===e.data.type){var a=e.data.current,o=e.data.max,n=e.data.description;n&&($("#onboarding-progress .text").text(n),$("#onboarding-progress").addClass("show")),$("#team-build-progress input").val(Math.min(1e3*(a/o),1e3)).slider("refresh")}if("failed"===e.data.type&&($("#team-build-progress input").val(1e4).slider("refresh"),$("#team-build-progress").addClass("hidden"),$("#onboarding-progress").removeClass("show"),CoC.ui.teams.render(e.data.result,t),console.log(e.data.message)),"complete"===e.data.type){console.log(r.name+" search completed in "+(new Date-i)/1e3+" seconds.");var s={};if(void 0!==e.data.result.teams){s.teams=[];for(var c=0;c<e.data.result.teams.length;c++){for(var d=[],f=0;f<e.data.result.teams[c].length;f++)d.push(new CoC.model.Champion(e.data.result.teams[c][f]));s.teams.push(d)}}if(void 0!==e.data.result.extras){s.extras=[];for(var c=0;c<e.data.result.extras.length;c++)s.extras.push(new CoC.model.Champion(e.data.result.extras[c]))}$("#team-build-progress input").val(1e4).slider("refresh"),$("#team-build-progress").addClass("hidden"),$("#onboarding-progress").removeClass("show"),CoC.ui.teams.render(s,t),CoC.tracking.event("teams","build",r.uid+"-"+t)}},c.postMessage({algorithm:r.uid,roster:d,size:t,levels:n,quest:a,extras:o,weights:CoC.settings.weights,update:250}),s=!0}catch(l){console.error(l)}s||setTimeout(function(){var s=((new Date).getTime(),r.build({champions:e,size:t,levels:n,quest:a,extras:o}));$("#team-build-progress input").val(1e4).slider("refresh"),setTimeout(function(){CoC.ui.teams.render(s,t),$("#team-build-progress").addClass("hidden"),$("#onboarding-progress").removeClass("show"),console.log(r.name+" search completed in "+(new Date-i)/1e3+" seconds. (worker failed)")},0)},0)}},CoC.ui.guides=new function(){this.initialized=!1,this.shown=!1,this.seen=!1,this.initialize=function(){this._initialized||(this.view=new CoC.view.GuideChampionsView({el:$("#guide-champions")[0]}),this.view.render(),this.shown&&this.show(),this._initialized=!0)},this.open=function(t){this._uid=t,$.mobile.changePage("#page-guide",{transition:"fade"})},this.render=function(){this.view&&this.view.render()},this.show=function(){if(!this.view)return void(this.shown=!0);var t=CoC.getUrlParam("page-guide","guide")||this.view.selected();this._uid&&(t=this._uid,delete this._uid),this.seen=!0,this.view.enable(),this.view.reload(),this.view.select(t)},this.hide=function(){this.view&&this.view.disable()}},CoC.ui.crystals=new function(){this.initialize=function(){this._initialized||(this.view=new CoC.view.CrystalsView({el:$("#crystals")[0]}),this._initialized=!0)},this.render=function(){this.view.render()}},$("#page-roster").on("pageshow",function(){0===CoC.data.roster.length&&($("#onboarding-roster").addClass("show"),$("#page-roster").one("click",function(){$("#onboarding-roster").removeClass("show")}))}),$("#page-teams").on("pageshow",function(){CoC.ui.teams.empty&&$("#team-build-progress").hasClass("hidden")&&($("#onboarding-teams").addClass("show"),$("#page-teams").one("click",function(){$("#onboarding-teams").removeClass("show")}))}),CoC.ui.hasSelection=function(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),t.length>0},CoC.ui.clearSelection=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},$(document).on("pagecreate","#page-roster",function(){$(document).on("swiperight","#page-roster",function(t){CoC.ui.hasSelection()||$("#page-roster").find(".ui-popup-active").length||$("#page-roster").find(".ui-panel-open").length||($("#page-roster").find("#header a[href=#panel-roster-options]").click(),setTimeout(CoC.ui.clearSelection,50))})}),$(document).on("pagecreate","#page-teams",function(){$(document).on("swiperight","#page-teams",function(t){CoC.ui.hasSelection()||$("#page-teams").find(".panel").hasClass("ui-panel-open")||($("#page-teams").find("#header a[href=#panel-team-settings]").click(),setTimeout(CoC.ui.clearSelection,50))})}),$("#page-roster").on("pagebeforeshow",function(){CoC.ui.roster.initialize(),CoC.ui.roster.render()}),$("#page-add").on("pagebeforeshow",function(){CoC.ui.add.initialize(),CoC.ui.add.render()}),$("#page-teams").on("pagebeforeshow",function(){CoC.ui.teams.initialize()}),$("#page-add").on("pageshow",function(){CoC.ui.add.show()}),$("#page-guide").on("pagebeforeshow",function(){CoC.ui.guides.initialize(),CoC.ui.guides.render()}),$("#page-guide").on("pageshow",function(){CoC.ui.guides.show()}),$("#page-guide").on("pagehide",function(){CoC.ui.guides.hide()}),$("#page-crystals").on("pagebeforeshow",function(){CoC.ui.crystals.initialize(),CoC.ui.crystals.render()}),$("#page-roster").on("pagecreate",function(){function t(){return-1!==window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1}window.FileReader?($("#roster-import-input").change(function(t){if(this.files&&this.files[0]){var e=new FileReader,r=this.files[0];e.onload=function(t){var e=t.target.result;CoC.roster.csvImport(e,r.name||void 0),CoC.ui.roster.render()},e.readAsText(r),$(this).val("")}}),$("#roster-import").click(function(){console.log("importing csv..."),$("#roster-import-input").click(),$("#panel-roster-options").panel("close"),CoC.tracking.event("roster","import")})):$("#roster-import").addClass("ui-disabled"),$("#roster-export").click(function(){if(console.log("exporting to csv..."),t()){var e=CoC.roster.csvExport("\r\n");rosterExportFrame.document.open("text/html","replace"),rosterExportFrame.document.write("sep=,\r\n"+e),rosterExportFrame.document.close(),rosterExportFrame.focus(),rosterExportFrame.document.execCommand("SaveAs",!0,"champions.csv")}else{var e=CoC.roster.csvExport();$("#roster-export").attr("href","data:text/csv;charset=utf-8,"+encodeURIComponent(e))}$("#panel-roster-options").panel("close"),CoC.tracking.event("roster","export")}),$("#roster-clear-all").click(function(){$("#popup-roster-clear-confirm").popup("open",{positionTo:"window"})}),$("#roster-clear-confirm-no").click(function(){$("#popup-roster-clear-confirm").popup("close")}),$("#roster-clear-confirm-yes").click(function(){CoC.roster.clear(),CoC.ui.roster.render(),$("#popup-roster-clear-confirm").popup("close"),$("#panel-roster-options").panel("close"),CoC.tracking.event("roster","delete","all")});var e=["stars","type","name"];_(e).each(function(t){function e(){"ascending"===CoC.settings.getValue("roster-sort-direction")?$("label[for=roster-sort-"+t+"]").removeClass("ui-descending").addClass("ui-ascending"):$("label[for=roster-sort-"+t+"]").removeClass("ui-ascending").addClass("ui-descending")}var r=$("#roster-sort-"+t);r.change(function(){var r=CoC.settings.getValue("roster-sort")!==t,a="ascending"===CoC.settings.getValue("roster-sort-direction");CoC.settings.setValue("roster-sort-direction",r||a?"descending":"ascending"),CoC.settings.setValue("roster-sort",t),e(),CoC.ui.roster.render()}),r.prop("checked",CoC.settings.getValue("roster-sort")===t?!0:!1).checkboxradio("refresh"),e()});for(var r=["roster-filter-stars-1","roster-filter-stars-2","roster-filter-stars-3","roster-filter-stars-4","roster-filter-stars-5"],a=0;a<r.length;a++)(function(t){$("#"+t).change(function(){CoC.settings.setValue(t,this.checked),CoC.ui.roster.render()}).prop("checked",CoC.settings.getValue(t)?!0:!1).checkboxradio("refresh")})(r[a])}),$("#page-add").on("pagecreate",function(){$("#page-add #add-stars button").each(function(t,e){var r=$(e),a=parseInt(r.attr("stars"),10);r.on("click",function(){CoC.ui.add.setStars(a)})})}),$("#page-teams").on("pagecreate",function(){function t(){var t=CoC.settings.getValue("build-algorithm"),e=CoC.settings.getValue("build-quest-group"),r=!0;CoC.algorithm[t].canQuest||(e=!1,r=!1);var a=!1;e||(a=!0),$("#build-settings-algorithm-description").text(CoC.algorithm[t].description),$("#build-settings-quest").checkboxradio(r?"enable":"disable").checkboxradio("refresh"),$("#build-settings-extras").checkboxradio(a?"enable":"disable").checkboxradio("refresh")}CoC.settings.getValue("algorithm")||"greedy";for(var e in CoC.algorithm)$("#build-settings-algorithm").append($("<option>",{value:e}).text(CoC.algorithm[e].name));$("#team-build-progress").addClass("hidden"),$("#team-build-progress input").css("opacity",0).css("pointer-events","none"),$("#team-build-progress .ui-slider-handle").remove(),$("#team-build-progress .ui-slider-track").css("margin","0 15px 0 15px").css("pointer-events","none");var r=$("input:radio[name=build-settings-size]");r.filter("[value="+CoC.settings.getValue("build-size")+"]").prop("checked",!0).checkboxradio("refresh"),r.change(function(){CoC.settings.setValue("build-size",this.value)}),$("#build-settings-algorithm").change(function(){CoC.settings.setValue("build-algorithm",this.value),t()}).val(CoC.settings.getValue("build-algorithm")||"greedy").selectmenu("refresh"),$("#build-settings-quest").change(function(){CoC.settings.setValue("build-quest-group",this.checked),t()}).prop("checked",CoC.settings.getValue("build-quest-group")===!0).checkboxradio("refresh"),$("#build-settings-extras").change(function(){CoC.settings.setValue("build-include-extras",this.checked)}).prop("checked",CoC.settings.getValue("build-include-extras")===!0).checkboxradio("refresh");for(var a=["build-filter-stars-1","build-filter-stars-2","build-filter-stars-3","build-filter-stars-4","build-filter-stars-5"],e=0;e<a.length;e++)(function(t){$("#"+t).change(function(){CoC.settings.setValue(t,this.checked)}).prop("checked",CoC.settings.getValue(t)?!0:!1).checkboxradio("refresh")})(a[e]);t(),$("#button-build-settings-apply").click(function(){$("#panel-team-settings").panel("close"),CoC.ui.teams.build()})}),$("#page-settings-advanced").on("pagecreate",function(){function t(t,e){var r="#settings-advanced-"+e,o="#settings-advanced-preset-"+t,n=CoC.settings.getWeight(e);$(r).val(100*n).slider("refresh").change(function(){CoC.settings.setWeight(e,parseInt(this.value)/100),$(o).val(null).selectmenu("refresh")}),a[e]=r}function e(t,e){var r=CoC.settings.getValue(e);$(t).prop("checked",r).checkboxradio("refresh").change(function(){CoC.settings.setValue(e,this.checked)}),o[e]=t}function r(t){var e=$("#settings-advanced-preset-"+t.toLowerCase()),r=CoC.settings.preset.ids(t);for(var a in r){var o=CoC.settings.preset.info(r[a]);e.append($("<option>",{value:o.id}).text(o.name))}}var a={},o={};t("synergies","attack"),t("synergies","stun"),t("synergies","critrate"),t("synergies","critdamage"),t("synergies","perfectblock"),t("synergies","block"),t("synergies","powergain"),t("synergies","armor"),t("synergies","health"),t("duplicates","duplicates-2"),t("duplicates","duplicates-3"),t("duplicates","duplicates-4"),t("duplicates","duplicates-5"),e("#settings-advanced-levels","build-levels"),r("Synergies"),r("Duplicates"),$("#settings-advanced-preset-defaults").click(function(){CoC.settings.preset.apply("defaults",function(t,e){var r=$(a[t]);return r.length?(r.val(100*e).slider("refresh"),!0):!1},function(t,e){var r=$(o[t]);return r.length?(r.prop("checked",e).checkboxradio("refresh"),!0):!1}),$("#settings-advanced-preset-synergies, #settings-advanced-preset-duplicates").val(null).selectmenu("refresh")}),$("#settings-advanced-preset-synergies, #settings-advanced-preset-duplicates").change(function(){CoC.settings.preset.apply(this.value,function(t,e){var r=$(a[t]);return r.length?(r.val(100*e).slider("refresh"),!0):!1})})}),$.mobile.document.on("tap click","[data-role=dialog]",function(t,e){t.target===this&&$(this).dialog("close")}).on("keyup","[data-role=dialog]",function(t,e){27==t.keyCode&&$(this).dialog("close")}),$("[data-tracking=true]").on("pageshow",function(){var t=location.pathname;location.hash&&(t+=location.hash),CoC.tracking.pageView(t)}),function(){var t=location.hash.replace(/([&][u][i][-][s][t][a][t][e][=][d][i][a][l][o][g])/g,"");t!==location.hash&&(location.hash=t)}(),CoC.manager.initialize(),CoC.roster.initialize(),CoC.ui.initialize();