<!doctype html>
<html>
  <head>
    <title>Champion Synergies</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <!-- Viewport and theme color -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#5393c5">
    <!-- Icons, description and sharing information -->
    <link rel="icon" sizes="192x192" href="images/icon.png">
    <link rel="image_src" href="images/icon.png">
    <meta name="keywords" content="Marvel,Kabam,Contest of Champions,Synergies,Synergy">
    <meta name="description" content="A tool for analyzing champion synergies in Marvel/Kabam's Contest of Champions." />
    <meta property="og:title" content="Champions - Synergy Tool" />
    <meta property="og:description" content="A tool for analyzing champion synergies in Marvel/Kabam's Contest of Champions." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="images/icon.png" />
    <meta property="og:url" content="http://tiny.cc/synergies" />
    <meta property="og:site_name" content="Champion Synergies" />
    <!-- all external stylesheets and scripts -->
    <link rel="stylesheet" href="css/fonts.css" media="all">
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.css" media="all">
    <link rel="stylesheet" href="css/jquery.mobile-theme-classic.css" media="all">
    <link rel="stylesheet" href="css/coc-synergies.css" media="all">
    <script type="text/javascript" src="scripts/lib/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="scripts/lib/jquery.mobile-1.4.5.min.js"></script>
  </head>
  <body>  

    <div id="popup-share" 
      data-role="popup" 
      data-tolerance="0,0"
      data-corners="false"
      data-theme="c" 
      data-overlay-theme="a"
      data-transition="slidedown"
      style="display:none;">
      <ul data-role="listview">
        <li data-role="list-divider">Share to...</li>
        <li>
          <a id="share-facebook" class="share-button" href="http://www.facebook.com/sharer/sharer.php?u=http://tiny.cc/synergies" target="_blank">
            <img src="images/share/facebook_32.png" class="ui-li-icon ui-corner-none">
            Facebook
          </a>
        </li>
        <li>
          <a id="share-twitter" class="share-button" href="https://twitter.com/share?url=http://tiny.cc/synergies" target="_blank">
            <img src="images/share/twitter_32.png" class="ui-li-icon ui-corner-none">
            Twitter
          </a>
        </li>
        <li>
          <a id="share-googleplus" class="share-button" href="https://plus.google.com/share?url=http://tiny.cc/synergies" target="_blank">
            <img src="images/share/googleplus_32.png" class="ui-li-icon ui-corner-none">
            Google+
          </a>
        </li>
        <li data-role="list-divider">Tools</li>
        <li>
          <a href="/contest-of-champions/" target="_blank">
            <img src="images/icon.png" class="ui-li-icon ui-corner-none">
            Roster Manager
          </a>
        </li>
      </ul>
    </div>
    
    <div class="page" data-role="page" data-theme="b">
      <div class="header">
        <div class="buttons">
          <a class="ui-btn button stars" href="?stars=1" stars="1" data-ajax="false"><span class="narrow">1 ★</span><span class="wide">★</span></a>
          <a class="ui-btn button stars" href="?stars=2" stars="2" data-ajax="false"><span class="narrow">2 ★</span><span class="wide">★ ★</span></a>
          <a class="ui-btn button stars" href="?stars=3" stars="3" data-ajax="false"><span class="narrow">3 ★</span><span class="wide">★ ★ ★</span></a>
          <a class="ui-btn button stars" href="?stars=4" stars="4" data-ajax="false"><span class="narrow">4 ★</span><span class="wide">★ ★ ★ ★</span></a>
        </div>
        <div class="ui-btn button legend"><span class="on">-</span><span class="off">+</span></div>
        <a class="ui-btn button share" href="#popup-share"
          data-rel="popup">
          <span>s</span>
        </a>
      </div>
      <canvas style="width:100%; height:100%;"></canvas>
      <div id="legend"></div>
      <div id="roster-hint">
        Use the roster manager tool to add more <span id="roster-hint-stars"></span> champions to your roster.
      </div>
    </div>
    <!-- Libraries -->
    <script type="text/javascript" src="scripts/lib/underscore-min.js"></script>
    <script type="text/javascript" src="scripts/lib/backbone-min.js"></script>
    <script type="text/javascript" src="scripts/lib/backbone.localStorage-min.js"></script>
    <!-- Model definitions -->
    <script type="text/javascript" src="scripts/model/champion.js"></script>
    <script type="text/javascript" src="scripts/model/effect.js"></script>
    <script type="text/javascript" src="scripts/model/synergy.js"></script>
    <script type="text/javascript" src="scripts/model/type.js"></script>
    <!-- Collections data -->
    <script type="text/javascript" src="scripts/data/champions.js"></script>
    <script type="text/javascript" src="scripts/data/effects.js"></script>
    <script type="text/javascript" src="scripts/data/synergies.js"></script>
    <script type="text/javascript" src="scripts/data/types.js"></script>
    <!-- Springy canvas rendering -->
    <script type="text/javascript" src="scripts/lib/springy.js"></script>
    <script type="text/javascript" src="scripts/lib/springyui.js"></script>
    <!-- App logic -->
    <script type="text/javascript" src="scripts/coc-tracking.js"></script>
    <script type="text/javascript" src="scripts/coc-synergies.js"></script>
    <script type="text/javascript" src="scripts/coc-roster.js"></script>
    <!-- Init -->
    <script type="text/javascript">
      function checkStars(search, key){
        var query = '?'+key+'=', value, stars;
        if(search.indexOf(query) !== 0)
          return false;
        value = parseInt(location.search.substr(query.length), 10);
        stars = Math.min(4, Math.max(1, value)) || 2;
        return (search === query + stars)? stars: false;
      }
      var stars;
      if(stars = checkStars(location.search, 'roster')){
        CoC.roster.initialize();
        $('.page').on('pageshow', function(){
            CoC.synergies.initialize(stars, true);
        });
      }
      else if(stars = checkStars(location.search, 'stars')){
        $('.page').on('pageshow', function(){
            CoC.synergies.initialize(stars);
        });
      }
      else
        location.search = "?stars=" + (stars || 2);
    </script>
  </body>
</html>
