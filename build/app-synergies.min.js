function delayedResize(){delayedResizeTimeout&&clearTimeout(delayedResizeTimeout),delayedResizeTimeout=setTimeout(function(){CoC.synergies.canvasResize(),delayedResizeTimeout=null},10)}function checkStars(t,e){var r,o,n="?"+e+"=";return 0!==t.indexOf(n)?!1:(r=parseInt(location.search.substr(n.length),10),o=Math.min(5,Math.max(1,r))||2,t===n+o?o:!1)}(function(){function t(t){function e(e,r,o,n,a,i){for(;a>=0&&i>a;a+=t){var s=n?n[a]:a;o=r(o,e[s],s,e)}return o}return function(r,o,n,a){o=y(o,a,4);var i=!C(r)&&v.keys(r),s=(i||r).length,f=t>0?0:s-1;return arguments.length<3&&(n=r[i?i[f]:f],f+=t),e(r,o,n,i,f,s)}}function e(t){return function(e,r,o){r=b(r,o);for(var n=x(e),a=t>0?0:n-1;a>=0&&n>a;a+=t)if(r(e[a],a,e))return a;return-1}}function r(t,e,r){return function(o,n,a){var i=0,s=x(o);if("number"==typeof a)t>0?i=a>=0?a:Math.max(a+s,i):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(o,n),o[a]===n?a:-1;if(n!==n)return a=e(d.call(o,i,s),v.isNaN),a>=0?a+i:-1;for(a=t>0?i:s-1;a>=0&&s>a;a+=t)if(o[a]===n)return a;return-1}}function o(t,e){var r=N.length,o=t.constructor,n=v.isFunction(o)&&o.prototype||s,a="constructor";for(v.has(t,a)&&!v.contains(e,a)&&e.push(a);r--;)a=N[r],a in t&&t[a]!==n[a]&&!v.contains(e,a)&&e.push(a)}var n=this,a=n._,i=Array.prototype,s=Object.prototype,f=Function.prototype,c=i.push,d=i.slice,u=s.toString,m=s.hasOwnProperty,l=Array.isArray,h=Object.keys,p=f.bind,I=Object.create,g=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):n._=v,v.VERSION="1.8.3";var y=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,o){return t.call(e,r,o)};case 3:return function(r,o,n){return t.call(e,r,o,n)};case 4:return function(r,o,n,a){return t.call(e,r,o,n,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,r){return null==t?v.identity:v.isFunction(t)?y(t,e,r):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return b(t,e,1/0)};var S=function(t,e){return function(r){var o=arguments.length;if(2>o||null==r)return r;for(var n=1;o>n;n++)for(var a=arguments[n],i=t(a),s=i.length,f=0;s>f;f++){var c=i[f];e&&void 0!==r[c]||(r[c]=a[c])}return r}},k=function(t){if(!v.isObject(t))return{};if(I)return I(t);g.prototype=t;var e=new g;return g.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,x=w("length"),C=function(t){var e=x(t);return"number"==typeof e&&e>=0&&A>=e};v.each=v.forEach=function(t,e,r){e=y(e,r);var o,n;if(C(t))for(o=0,n=t.length;n>o;o++)e(t[o],o,t);else{var a=v.keys(t);for(o=0,n=a.length;n>o;o++)e(t[a[o]],a[o],t)}return t},v.map=v.collect=function(t,e,r){e=b(e,r);for(var o=!C(t)&&v.keys(t),n=(o||t).length,a=Array(n),i=0;n>i;i++){var s=o?o[i]:i;a[i]=e(t[s],s,t)}return a},v.reduce=v.foldl=v.inject=t(1),v.reduceRight=v.foldr=t(-1),v.find=v.detect=function(t,e,r){var o;return o=C(t)?v.findIndex(t,e,r):v.findKey(t,e,r),void 0!==o&&-1!==o?t[o]:void 0},v.filter=v.select=function(t,e,r){var o=[];return e=b(e,r),v.each(t,function(t,r,n){e(t,r,n)&&o.push(t)}),o},v.reject=function(t,e,r){return v.filter(t,v.negate(b(e)),r)},v.every=v.all=function(t,e,r){e=b(e,r);for(var o=!C(t)&&v.keys(t),n=(o||t).length,a=0;n>a;a++){var i=o?o[a]:a;if(!e(t[i],i,t))return!1}return!0},v.some=v.any=function(t,e,r){e=b(e,r);for(var o=!C(t)&&v.keys(t),n=(o||t).length,a=0;n>a;a++){var i=o?o[a]:a;if(e(t[i],i,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,r,o){return C(t)||(t=v.values(t)),("number"!=typeof r||o)&&(r=0),v.indexOf(t,e,r)>=0},v.invoke=function(t,e){var r=d.call(arguments,2),o=v.isFunction(e);return v.map(t,function(t){var n=o?e:t[e];return null==n?n:n.apply(t,r)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,r){var o,n,a=-(1/0),i=-(1/0);if(null==e&&null!=t){t=C(t)?t:v.values(t);for(var s=0,f=t.length;f>s;s++)o=t[s],o>a&&(a=o)}else e=b(e,r),v.each(t,function(t,r,o){n=e(t,r,o),(n>i||n===-(1/0)&&a===-(1/0))&&(a=t,i=n)});return a},v.min=function(t,e,r){var o,n,a=1/0,i=1/0;if(null==e&&null!=t){t=C(t)?t:v.values(t);for(var s=0,f=t.length;f>s;s++)o=t[s],a>o&&(a=o)}else e=b(e,r),v.each(t,function(t,r,o){n=e(t,r,o),(i>n||n===1/0&&a===1/0)&&(a=t,i=n)});return a},v.shuffle=function(t){for(var e,r=C(t)?t:v.values(t),o=r.length,n=Array(o),a=0;o>a;a++)e=v.random(0,a),e!==a&&(n[a]=n[e]),n[e]=r[a];return n},v.sample=function(t,e,r){return null==e||r?(C(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,r){return e=b(e,r),v.pluck(v.map(t,function(t,r,o){return{value:t,index:r,criteria:e(t,r,o)}}).sort(function(t,e){var r=t.criteria,o=e.criteria;if(r!==o){if(r>o||void 0===r)return 1;if(o>r||void 0===o)return-1}return t.index-e.index}),"value")};var _=function(t){return function(e,r,o){var n={};return r=b(r,o),v.each(e,function(o,a){var i=r(o,a,e);t(n,o,i)}),n}};v.groupBy=_(function(t,e,r){v.has(t,r)?t[r].push(e):t[r]=[e]}),v.indexBy=_(function(t,e,r){t[r]=e}),v.countBy=_(function(t,e,r){v.has(t,r)?t[r]++:t[r]=1}),v.toArray=function(t){return t?v.isArray(t)?d.call(t):C(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:C(t)?t.length:v.keys(t).length},v.partition=function(t,e,r){e=b(e,r);var o=[],n=[];return v.each(t,function(t,r,a){(e(t,r,a)?o:n).push(t)}),[o,n]},v.first=v.head=v.take=function(t,e,r){return null==t?void 0:null==e||r?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,r){return d.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},v.last=function(t,e,r){return null==t?void 0:null==e||r?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,r){return d.call(t,null==e||r?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var E=function(t,e,r,o){for(var n=[],a=0,i=o||0,s=x(t);s>i;i++){var f=t[i];if(C(f)&&(v.isArray(f)||v.isArguments(f))){e||(f=E(f,e,r));var c=0,d=f.length;for(n.length+=d;d>c;)n[a++]=f[c++]}else r||(n[a++]=f)}return n};v.flatten=function(t,e){return E(t,e,!1)},v.without=function(t){return v.difference(t,d.call(arguments,1))},v.uniq=v.unique=function(t,e,r,o){v.isBoolean(e)||(o=r,r=e,e=!1),null!=r&&(r=b(r,o));for(var n=[],a=[],i=0,s=x(t);s>i;i++){var f=t[i],c=r?r(f,i,t):f;e?(i&&a===c||n.push(f),a=c):r?v.contains(a,c)||(a.push(c),n.push(f)):v.contains(n,f)||n.push(f)}return n},v.union=function(){return v.uniq(E(arguments,!0,!0))},v.intersection=function(t){for(var e=[],r=arguments.length,o=0,n=x(t);n>o;o++){var a=t[o];if(!v.contains(e,a)){for(var i=1;r>i&&v.contains(arguments[i],a);i++);i===r&&e.push(a)}}return e},v.difference=function(t){var e=E(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,x).length||0,r=Array(e),o=0;e>o;o++)r[o]=v.pluck(t,o);return r},v.object=function(t,e){for(var r={},o=0,n=x(t);n>o;o++)e?r[t[o]]=e[o]:r[t[o][0]]=t[o][1];return r},v.findIndex=e(1),v.findLastIndex=e(-1),v.sortedIndex=function(t,e,r,o){r=b(r,o,1);for(var n=r(e),a=0,i=x(t);i>a;){var s=Math.floor((a+i)/2);r(t[s])<n?a=s+1:i=s}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(t,e,r){null==e&&(e=t||0,t=0),r=r||1;for(var o=Math.max(Math.ceil((e-t)/r),0),n=Array(o),a=0;o>a;a++,t+=r)n[a]=t;return n};var M=function(t,e,r,o,n){if(!(o instanceof e))return t.apply(r,n);var a=k(t.prototype),i=t.apply(a,n);return v.isObject(i)?i:a};v.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,d.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var r=d.call(arguments,2),o=function(){return M(t,o,e,this,r.concat(d.call(arguments)))};return o},v.partial=function(t){var e=d.call(arguments,1),r=function(){for(var o=0,n=e.length,a=Array(n),i=0;n>i;i++)a[i]=e[i]===v?arguments[o++]:e[i];for(;o<arguments.length;)a.push(arguments[o++]);return M(t,r,this,this,a)};return r},v.bindAll=function(t){var e,r,o=arguments.length;if(1>=o)throw new Error("bindAll must be passed function names");for(e=1;o>e;e++)r=arguments[e],t[r]=v.bind(t[r],t);return t},v.memoize=function(t,e){var r=function(o){var n=r.cache,a=""+(e?e.apply(this,arguments):o);return v.has(n,a)||(n[a]=t.apply(this,arguments)),n[a]};return r.cache={},r},v.delay=function(t,e){var r=d.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,r){var o,n,a,i=null,s=0;r||(r={});var f=function(){s=r.leading===!1?0:v.now(),i=null,a=t.apply(o,n),i||(o=n=null)};return function(){var c=v.now();s||r.leading!==!1||(s=c);var d=e-(c-s);return o=this,n=arguments,0>=d||d>e?(i&&(clearTimeout(i),i=null),s=c,a=t.apply(o,n),i||(o=n=null)):i||r.trailing===!1||(i=setTimeout(f,d)),a}},v.debounce=function(t,e,r){var o,n,a,i,s,f=function(){var c=v.now()-i;e>c&&c>=0?o=setTimeout(f,e-c):(o=null,r||(s=t.apply(a,n),o||(a=n=null)))};return function(){a=this,n=arguments,i=v.now();var c=r&&!o;return o||(o=setTimeout(f,e)),c&&(s=t.apply(a,n),a=n=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,o=t[e].apply(this,arguments);r--;)o=t[r].call(this,o);return o}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=null),r}},v.once=v.partial(v.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(t){if(!v.isObject(t))return[];if(h)return h(t);var e=[];for(var r in t)v.has(t,r)&&e.push(r);return j&&o(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var r in t)e.push(r);return j&&o(t,e),e},v.values=function(t){for(var e=v.keys(t),r=e.length,o=Array(r),n=0;r>n;n++)o[n]=t[e[n]];return o},v.mapObject=function(t,e,r){e=b(e,r);for(var o,n=v.keys(t),a=n.length,i={},s=0;a>s;s++)o=n[s],i[o]=e(t[o],o,t);return i},v.pairs=function(t){for(var e=v.keys(t),r=e.length,o=Array(r),n=0;r>n;n++)o[n]=[e[n],t[e[n]]];return o},v.invert=function(t){for(var e={},r=v.keys(t),o=0,n=r.length;n>o;o++)e[t[r[o]]]=r[o];return e},v.functions=v.methods=function(t){var e=[];for(var r in t)v.isFunction(t[r])&&e.push(r);return e.sort()},v.extend=S(v.allKeys),v.extendOwn=v.assign=S(v.keys),v.findKey=function(t,e,r){e=b(e,r);for(var o,n=v.keys(t),a=0,i=n.length;i>a;a++)if(o=n[a],e(t[o],o,t))return o},v.pick=function(t,e,r){var o,n,a={},i=t;if(null==i)return a;v.isFunction(e)?(n=v.allKeys(i),o=y(e,r)):(n=E(arguments,!1,!1,1),o=function(t,e,r){return e in r},i=Object(i));for(var s=0,f=n.length;f>s;s++){var c=n[s],d=i[c];o(d,c,i)&&(a[c]=d)}return a},v.omit=function(t,e,r){if(v.isFunction(e))e=v.negate(e);else{var o=v.map(E(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(o,e)}}return v.pick(t,e,r)},v.defaults=S(v.allKeys,!0),v.create=function(t,e){var r=k(t);return e&&v.extendOwn(r,e),r},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var r=v.keys(e),o=r.length;if(null==t)return!o;for(var n=Object(t),a=0;o>a;a++){var i=r[a];if(e[i]!==n[i]||!(i in n))return!1}return!0};var T=function(t,e,r,o){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var n=u.call(t);if(n!==u.call(e))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===n;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var i=t.constructor,s=e.constructor;if(i!==s&&!(v.isFunction(i)&&i instanceof i&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],o=o||[];for(var f=r.length;f--;)if(r[f]===t)return o[f]===e;if(r.push(t),o.push(e),a){if(f=t.length,f!==e.length)return!1;for(;f--;)if(!T(t[f],e[f],r,o))return!1}else{var c,d=v.keys(t);if(f=d.length,v.keys(e).length!==f)return!1;for(;f--;)if(c=d[f],!v.has(e,c)||!T(t[c],e[c],r,o))return!1}return r.pop(),o.pop(),!0};v.isEqual=function(t,e){return T(t,e)},v.isEmpty=function(t){return null==t?!0:C(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=l||function(t){return"[object Array]"===u.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===u.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&m.call(t,e)},v.noConflict=function(){return n._=a,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=w,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,r){var o=Array(Math.max(0,t));e=y(e,r,1);for(var n=0;t>n;n++)o[n]=e(n);return o},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=v.invert(R),P=function(t){var e=function(e){return t[e]},r="(?:"+v.keys(t).join("|")+")",o=RegExp(r),n=RegExp(r,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(n,e):t}};v.escape=P(R),v.unescape=P($),v.result=function(t,e,r){var o=null==t?void 0:t[e];return void 0===o&&(o=r),v.isFunction(o)?o.call(t):o};var z=0;v.uniqueId=function(t){var e=++z+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+O[t]};v.template=function(t,e,r){!e&&r&&(e=r),e=v.defaults({},e,v.templateSettings);var o=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),n=0,a="__p+='";t.replace(o,function(e,r,o,i,s){return a+=t.slice(n,s).replace(D,B),n=s+e.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":o?a+="'+\n((__t=("+o+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var i=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var f=function(t){return i.call(this,t,v)},c=e.variable||"obj";return f.source="function("+c+"){\n"+a+"}",f},v.chain=function(t){var e=v(t);return e._chain=!0,e};var L=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var r=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),L(this,r.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];v.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],L(this,r)}}),v.each(["concat","join","slice"],function(t){var e=i[t];v.prototype[t]=function(){return L(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(r,o,n){e.Backbone=t(e,n,r,o)});else if("undefined"!=typeof exports){var r,o=require("underscore");try{r=require("jquery")}catch(n){}t(e,exports,o,r)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,r,o){var n=t.Backbone,a=Array.prototype.slice;e.VERSION="1.2.3",e.$=o,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var i=function(t,e,o){switch(t){case 1:return function(){return r[e](this[o])};case 2:return function(t){return r[e](this[o],t)};case 3:return function(t,n){return r[e](this[o],f(t,this),n)};case 4:return function(t,n,a){return r[e](this[o],f(t,this),n,a)};default:return function(){var t=a.call(arguments);return t.unshift(this[o]),r[e].apply(r,t)}}},s=function(t,e,o){r.each(e,function(e,n){r[n]&&(t.prototype[n]=i(e,n,o))})},f=function(t,e){return r.isFunction(t)?t:r.isObject(t)&&!e._isModel(t)?c(t):r.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=r.matches(t);return function(t){return e(t.attributes)}},d=e.Events={},u=/\s+/,m=function(t,e,o,n,a){var i,s=0;if(o&&"object"==typeof o){void 0!==n&&"context"in a&&void 0===a.context&&(a.context=n);for(i=r.keys(o);s<i.length;s++)e=m(t,e,i[s],o[i[s]],a)}else if(o&&u.test(o))for(i=o.split(u);s<i.length;s++)e=t(e,i[s],n,a);else e=t(e,o,n,a);return e};d.on=function(t,e,r){return l(this,t,e,r)};var l=function(t,e,r,o,n){if(t._events=m(h,t._events||{},e,r,{context:o,ctx:t,listening:n}),n){var a=t._listeners||(t._listeners={});a[n.id]=n}return t};d.listenTo=function(t,e,o){if(!t)return this;var n=t._listenId||(t._listenId=r.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),i=a[n];if(!i){var s=this._listenId||(this._listenId=r.uniqueId("l"));i=a[n]={obj:t,objId:n,id:s,listeningTo:a,count:0}}return l(t,e,o,this,i),this};var h=function(t,e,r,o){if(r){var n=t[e]||(t[e]=[]),a=o.context,i=o.ctx,s=o.listening;s&&s.count++,n.push({callback:r,context:a,ctx:a||i,listening:s})}return t};d.off=function(t,e,r){return this._events?(this._events=m(p,this._events,t,e,{context:r,listeners:this._listeners}),this):this},d.stopListening=function(t,e,o){var n=this._listeningTo;if(!n)return this;for(var a=t?[t._listenId]:r.keys(n),i=0;i<a.length;i++){var s=n[a[i]];if(!s)break;s.obj.off(e,o,this)}return r.isEmpty(n)&&(this._listeningTo=void 0),this};var p=function(t,e,o,n){if(t){var a,i=0,s=n.context,f=n.listeners;if(e||o||s){for(var c=e?[e]:r.keys(t);i<c.length;i++){e=c[i];var d=t[e];if(!d)break;for(var u=[],m=0;m<d.length;m++){var l=d[m];o&&o!==l.callback&&o!==l.callback._callback||s&&s!==l.context?u.push(l):(a=l.listening,a&&0===--a.count&&(delete f[a.id],delete a.listeningTo[a.objId]))}u.length?t[e]=u:delete t[e]}return r.size(t)?t:void 0}for(var h=r.keys(f);i<h.length;i++)a=f[h[i]],delete f[a.id],delete a.listeningTo[a.objId]}};d.once=function(t,e,o){var n=m(I,{},t,e,r.bind(this.off,this));return this.on(n,void 0,o)},d.listenToOnce=function(t,e,o){var n=m(I,{},e,o,r.bind(this.stopListening,this,t));return this.listenTo(t,n)};var I=function(t,e,o,n){if(o){var a=t[e]=r.once(function(){n(e,a),o.apply(this,arguments)});a._callback=o}return t};d.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),r=Array(e),o=0;e>o;o++)r[o]=arguments[o+1];return m(g,this._events,t,void 0,r),this};var g=function(t,e,r,o){if(t){var n=t[e],a=t.all;n&&a&&(a=a.slice()),n&&v(n,o),a&&v(a,[e].concat(o))}return t},v=function(t,e){var r,o=-1,n=t.length,a=e[0],i=e[1],s=e[2];switch(e.length){case 0:for(;++o<n;)(r=t[o]).callback.call(r.ctx);return;case 1:for(;++o<n;)(r=t[o]).callback.call(r.ctx,a);return;case 2:for(;++o<n;)(r=t[o]).callback.call(r.ctx,a,i);return;case 3:for(;++o<n;)(r=t[o]).callback.call(r.ctx,a,i,s);return;default:for(;++o<n;)(r=t[o]).callback.apply(r.ctx,e);return}};d.bind=d.on,d.unbind=d.off,r.extend(e,d);var y=e.Model=function(t,e){var o=t||{};e||(e={}),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{}),o=r.defaults({},o,r.result(this,"defaults")),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};r.extend(y.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return r.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return r.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!r.iteratee(t,this)(this.attributes)},set:function(t,e,o){if(null==t)return this;var n;if("object"==typeof t?(n=t,o=e):(n={})[t]=e,o||(o={}),!this._validate(n,o))return!1;var a=o.unset,i=o.silent,s=[],f=this._changing;this._changing=!0,f||(this._previousAttributes=r.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,u=this._previousAttributes;for(var m in n)e=n[m],r.isEqual(c[m],e)||s.push(m),r.isEqual(u[m],e)?delete d[m]:d[m]=e,a?delete c[m]:c[m]=e;if(this.id=this.get(this.idAttribute),!i){s.length&&(this._pending=o);for(var l=0;l<s.length;l++)this.trigger("change:"+s[l],this,c[s[l]],o)}if(f)return this;if(!i)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,r.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!r.isEmpty(this.changed):r.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,o={};for(var n in t){var a=t[n];r.isEqual(e[n],a)||(o[n]=a)}return r.size(o)?o:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(t){t=r.extend({parse:!0},t);var e=this,o=t.success;return t.success=function(r){var n=t.parse?e.parse(r,t):r;return e.set(n,t)?(o&&o.call(t.context,e,r,t),void e.trigger("sync",e,r,t)):!1},L(this,t),this.sync("read",this,t)},save:function(t,e,o){var n;null==t||"object"==typeof t?(n=t,o=e):(n={})[t]=e,o=r.extend({validate:!0,parse:!0},o);var a=o.wait;if(n&&!a){if(!this.set(n,o))return!1}else if(!this._validate(n,o))return!1;var i=this,s=o.success,f=this.attributes;o.success=function(t){i.attributes=f;var e=o.parse?i.parse(t,o):t;return a&&(e=r.extend({},n,e)),e&&!i.set(e,o)?!1:(s&&s.call(o.context,i,t,o),void i.trigger("sync",i,t,o))},L(this,o),n&&a&&(this.attributes=r.extend({},f,n));var c=this.isNew()?"create":o.patch?"patch":"update";"patch"!==c||o.attrs||(o.attrs=n);var d=this.sync(c,this,o);return this.attributes=f,d},destroy:function(t){t=t?r.clone(t):{};var e=this,o=t.success,n=t.wait,a=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(r){n&&a(),o&&o.call(t.context,e,r,t),e.isNew()||e.trigger("sync",e,r,t)};var i=!1;return this.isNew()?r.defer(t.success):(L(this,t),i=this.sync("delete",this,t)),n||a(),i},url:function(){var t=r.result(this,"urlRoot")||r.result(this.collection,"url")||B();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},r.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return o?(this.trigger("invalid",this,o,r.extend(e,{validationError:o})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(y,b,"attributes");var S=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,r.extend({silent:!0},e))},k={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},A=function(t,e,r){r=Math.min(Math.max(r,0),t.length);for(var o=Array(t.length-r),n=e.length,a=0;a<o.length;a++)o[a]=t[a+r];for(a=0;n>a;a++)t[a+r]=e[a];for(a=0;a<o.length;a++)t[a+n+r]=o[a]};r.extend(S.prototype,d,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,r.extend({merge:!1},e,w))},remove:function(t,e){e=r.extend({},e);var o=!r.isArray(t);t=o?[t]:r.clone(t);var n=this._removeModels(t,e);return!e.silent&&n&&this.trigger("update",this,e),o?n[0]:n},set:function(t,e){if(null!=t){e=r.defaults({},e,k),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var o=!r.isArray(t);t=o?[t]:t.slice();var n=e.at;null!=n&&(n=+n),0>n&&(n+=this.length+1);for(var a,i=[],s=[],f=[],c={},d=e.add,u=e.merge,m=e.remove,l=!1,h=this.comparator&&null==n&&e.sort!==!1,p=r.isString(this.comparator)?this.comparator:null,I=0;I<t.length;I++){a=t[I];var g=this.get(a);if(g){if(u&&a!==g){var v=this._isModel(a)?a.attributes:a;e.parse&&(v=g.parse(v,e)),g.set(v,e),h&&!l&&(l=g.hasChanged(p))}c[g.cid]||(c[g.cid]=!0,i.push(g)),t[I]=g}else d&&(a=t[I]=this._prepareModel(a,e),a&&(s.push(a),this._addReference(a,e),c[a.cid]=!0,i.push(a)))}if(m){for(I=0;I<this.length;I++)a=this.models[I],c[a.cid]||f.push(a);f.length&&this._removeModels(f,e)}var y=!1,b=!h&&d&&m;if(i.length&&b?(y=this.length!=i.length||r.some(this.models,function(t,e){return t!==i[e]}),this.models.length=0,A(this.models,i,0),this.length=this.models.length):s.length&&(h&&(l=!0),A(this.models,s,null==n?this.length:n),this.length=this.models.length),l&&this.sort({silent:!0}),!e.silent){for(I=0;I<s.length;I++)null!=n&&(e.index=n+I),a=s[I],a.trigger("add",a,this,e);(l||y)&&this.trigger("sort",this,e),(s.length||f.length)&&this.trigger("update",this,e)}return o?t[0]:t}},reset:function(t,e){e=e?r.clone(e):{};for(var o=0;o<this.models.length;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,r.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,r.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var o=e.length;return r.isFunction(e)&&(e=r.bind(e,this)),1===o||r.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return r.invoke(this.models,"get",t)},fetch:function(t){t=r.extend({parse:!0},t);var e=t.success,o=this;return t.success=function(r){var n=t.reset?"reset":"set";o[n](r,t),e&&e.call(t.context,o,r,t),o.trigger("sync",o,r,t)},L(this,t),this.sync("read",this,t)},create:function(t,e){e=e?r.clone(e):{};var o=e.wait;if(t=this._prepareModel(t,e),!t)return!1;o||this.add(t,e);var n=this,a=e.success;return e.success=function(t,e,r){o&&n.add(t,r),a&&a.call(r.context,t,e,r)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?r.clone(e):{},e.collection=this;var o=new this.model(t,e);return o.validationError?(this.trigger("invalid",this,o.validationError,e),!1):o},_removeModels:function(t,e){for(var r=[],o=0;o<t.length;o++){var n=this.get(t[o]);if(n){var a=this.indexOf(n);this.models.splice(a,1),this.length--,e.silent||(e.index=a,n.trigger("remove",n,this,e)),r.push(n),this._removeReference(n,e)}}return r.length?r:!1},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var r=this.modelId(t.attributes);null!=r&&(this._byId[r]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var r=this.modelId(t.attributes);null!=r&&delete this._byId[r],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,r,o){if("add"!==t&&"remove"!==t||r===this){if("destroy"===t&&this.remove(e,o),"change"===t){var n=this.modelId(e.previousAttributes()),a=this.modelId(e.attributes);n!==a&&(null!=n&&delete this._byId[n],null!=a&&(this._byId[a]=e))}this.trigger.apply(this,arguments)}}});var x={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};s(S,x,"models");var C=e.View=function(t){this.cid=r.uniqueId("view"),r.extend(this,r.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},_=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];r.extend(C.prototype,d,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=r.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var o=t[e];if(r.isFunction(o)||(o=this[o]),o){var n=e.match(_);this.delegate(n[1],n[2],r.bind(o,this))}}return this},delegate:function(t,e,r){return this.$el.on(t+".delegateEvents"+this.cid,e,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,r){return this.$el.off(t+".delegateEvents"+this.cid,e,r),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var t=r.extend({},r.result(this,"attributes"));this.id&&(t.id=r.result(this,"id")),this.className&&(t["class"]=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,o,n){var a=M[t];r.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var i={type:a,dataType:"json"
};if(n.url||(i.url=r.result(o,"url")||B()),null!=n.data||!o||"create"!==t&&"update"!==t&&"patch"!==t||(i.contentType="application/json",i.data=JSON.stringify(n.attrs||o.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),n.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){i.type="POST",n.emulateJSON&&(i.data._method=a);var s=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",a),s?s.apply(this,arguments):void 0}}"GET"===i.type||n.emulateJSON||(i.processData=!1);var f=n.error;n.error=function(t,e,r){n.textStatus=e,n.errorThrown=r,f&&f.call(n.context,t,e,r)};var c=n.xhr=e.ajax(r.extend(i,n));return o.trigger("request",o,c,n),c};var M={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var j=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,R=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(j.prototype,d,{initialize:function(){},route:function(t,o,n){r.isRegExp(t)||(t=this._routeToRegExp(t)),r.isFunction(o)&&(n=o,o=""),n||(n=this[o]);var a=this;return e.history.route(t,function(r){var i=a._extractParameters(t,r);a.execute(n,i,o)!==!1&&(a.trigger.apply(a,["route:"+o].concat(i)),a.trigger("route",o,i),e.history.trigger("route",a,o,i))}),this},execute:function(t,e,r){t&&t.apply(this,e)},navigate:function(t,r){return e.history.navigate(t,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var t,e=r.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace($,"\\$&").replace(N,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return r.map(o,function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null})}});var P=e.History=function(){this.handlers=[],this.checkUrl=r.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,O=/#.*$/;P.started=!1,r.extend(P.prototype,d,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(z,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=r.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(F,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var o=document.body,n=o.insertBefore(this.iframe,o.firstChild).contentWindow;n.document.open(),n.document.close(),n.location.hash="#"+this.fragment}var a=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),r.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!P.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var r=this.root;(""===t||"?"===t.charAt(0))&&(r=r.slice(0,-1)||"/");var o=r+t;if(t=this.decodeFragment(t.replace(O,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,o);else{if(!this._wantsHashChange)return this.location.assign(o);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var n=this.iframe.contentWindow;e.replace||(n.document.open(),n.document.close()),this._updateHash(n.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,r){if(r){var o=t.href.replace(/(javascript:|#).*$/,"");t.replace(o+"#"+e)}else t.hash="#"+e}}),e.history=new P;var D=function(t,e){var o,n=this;o=t&&r.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},r.extend(o,n,e);var a=function(){this.constructor=o};return a.prototype=n.prototype,o.prototype=new a,t&&r.extend(o.prototype,t),o.__super__=n.prototype,o};y.extend=S.extend=j.extend=C.extend=P.extend=D;var B=function(){throw new Error('A "url" property or function must be specified')},L=function(t,e){var r=e.error;e.error=function(o){r&&r.call(e.context,t,o,e),t.trigger("error",t,o,e)}};return e}),function(t,e){"object"==typeof exports&&"function"==typeof require?module.exports=e(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(r){return e(r||t.Backbone)}):e(Backbone)}(this,function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function r(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function o(t){return t===Object(t)}function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}function a(t,e){for(var r in e)t[r]=e[r];return t}function i(t,e){if(null==t)return void 0;var r=t[e];return"function"==typeof r?t[e]():r}return t.LocalStorage=window.Store=function(t,e){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t,this.serializer=e||{serialize:function(t){return o(t)?JSON.stringify(t):t},deserialize:function(t){return t&&JSON.parse(t)}};var r=this.localStorage().getItem(this.name);this.records=r&&r.split(",")||[]},a(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||0===t.id||(t.id=r(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t));var e=t.id.toString();return n(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(t.id)))},findAll:function(){for(var t,e,r=[],o=0;o<this.records.length;o++)t=this.records[o],e=this.serializer.deserialize(this.localStorage().getItem(this._itemName(t))),null!=e&&r.push(e);return r},destroy:function(t){this.localStorage().removeItem(this._itemName(t.id));for(var e=t.id.toString(),r=0;r<this.records.length;r++)this.records[r]===e&&this.records.splice(r,1);return this.save(),t},localStorage:function(){return localStorage},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var r in t)e.test(r)&&t.removeItem(r);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(t){return this.name+"-"+t}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,r,o){var n,a,s=i(r,"localStorage")||i(r.collection,"localStorage"),f=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":n=void 0!=r.id?s.find(r):s.findAll();break;case"create":n=s.create(r);break;case"update":n=s.update(r);break;case"delete":n=s.destroy(r)}}catch(c){a=22===c.code&&0===s._storageSize()?"Private browsing is unsupported":c.message}return n?(o&&o.success&&("0.9.10"===t.VERSION?o.success(r,n,o):o.success(n)),f&&f.resolve(n)):(a=a?a:"Record Not Found",o&&o.error&&("0.9.10"===t.VERSION?o.error(r,a,o):o.error(a)),f&&f.reject(a)),o&&o.complete&&o.complete(n),f&&f.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e,r){var o=r&&r.ajaxSync;return o||!i(e,"localStorage")&&!i(e.collection,"localStorage")?t.ajaxSync:t.localSync},t.sync=function(e,r,o){return t.getSyncMethod(r,o).apply(this,[e,r,o])},t.LocalStorage}),function(t,e){"function"==typeof define&&define.amd?define(function(){return t.returnExportsGlobal=e()}):"object"==typeof exports?module.exports=e():t.Springy=e()}(this,function(){"use strict";var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},r=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},o=t.Edge=function(t,e,r,o){this.id=t,this.source=e,this.target=r,this.data=void 0!==o?o:{};var n=[this.source.id,this.target.id];n.sort(),this.nodes=n.join("_")};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],o=new r(e,{label:e});this.addNode(o)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(r){t.id===r.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(r){t.id===r.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],r=this.nodeSet[e[0]];if(void 0===r)throw new TypeError("invalid node name: "+e[0]);var o=this.nodeSet[e[1]];if(void 0===o)throw new TypeError("invalid node name: "+e[1]);var n=e[2];this.newEdge(r,o,n)}},e.prototype.newNode=function(t){var e=new r(this.nextNodeId++,t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,r){var n=new o(this.nextEdgeId++,t,e,r);return this.addEdge(n),n},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach(function(e){(e.source.id===t.id||e.target.id===t.id)&&this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var r in this.adjacency){for(var o in this.adjacency[r]){for(var n=this.adjacency[r][o],a=n.length-1;a>=0;a--)this.adjacency[r][o][a].id===t.id&&this.adjacency[r][o].splice(a,1);0===this.adjacency[r][o].length&&delete this.adjacency[r][o]}u(this.adjacency[r])&&delete this.adjacency[r]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new r(t.id,t.data)))},this),t.edges.forEach(function(t){var r=e[t.from],n=e[t.to],a=t.directed?a=t.type+"-"+r.id+"-"+n.id:r.id<n.id?t.type+"-"+r.id+"-"+n.id:t.type+"-"+n.id+"-"+r.id,i=this.addEdge(new o(a,r,n,t.data));i.data.type=t.type},this)},e.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var n=t.Layout={};n.ForceDirected=function(t,e,r,o,n){this.graph=t,this.stiffness=e,this.repulsion=r,this.damping=o,this.minEnergyThreshold=n||.01,this.nodePoints={},this.edgeSprings={}},n.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new n.ForceDirected.Point(f.random(),e)}return this.nodePoints[t.id]},n.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,r=!1,o=this.graph.getEdges(t.source,t.target);if(o.forEach(function(t){r===!1&&t.id in this.edgeSprings&&(r=this.edgeSprings[t.id])},this),r!==!1)return new n.ForceDirected.Spring(r.point1,r.point2,0,0);this.graph.getEdges(t.target,t.source);if(o.forEach(function(t){r===!1&&t.id in this.edgeSprings&&(r=this.edgeSprings[t.id])},this),r!==!1)return new n.ForceDirected.Spring(r.point2,r.point1,0,0);this.edgeSprings[t.id]=new n.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},n.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(r){t.call(e,r,e.point(r))})},n.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(r){t.call(e,r,e.spring(r))})},n.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(r){t.call(e,e.spring(r))})},n.ForceDirected.prototype.eachUniqueSpring=function(t){var e=this,r={};this.graph.edges.forEach(function(o){r[o.nodes]||(r[o.nodes]=!0,t.call(e,e.spring(o)))})},n.ForceDirected.prototype.decayMasses=function(){this.eachNode(function(t,e){if(!e.active&&!t.selected&&e.m!==e.mass){var r=Math.abs(e.mass-e.m);1>r?(e.m=e.mass,e.delta=void 0):(void 0===e.delta&&(e.delta=Math.max(1,r/100),e.m<e.mass&&(e.delta=-e.delta)),e.m-=e.delta)}})},n.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(r,o){if(t.id!==r.id){var n=e.p.clone().subtract(o.p),a=Math.max(.1,n.lengthSquared()),i=n.normalise(),s=this.repulsion,f=t.selected||e.active,c=r.selected||o.active;(f||c)&&(s*=Math.max(1,Math.min(Math.max(e.m,o.m)/10,f&&c?10:5))),e.applyForce(i.multiply(s).divide(.5*a)),o.applyForce(i.multiply(-1))}})})},n.ForceDirected.prototype.applyHookesLaw=function(){this.eachUniqueSpring(function(t){var e=t.point2.p.clone().subtract(t.point1.p),r=t.length-e.length(),o=e.normalise(),n=t.k;t.point1.applyForce(o.multiply(-.5*n*r)),t.point2.applyForce(o.multiply(-1))})},n.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var r=e.p.clone().multiply(-1),o=this.repulsion;e.applyForce(r.multiply(o/50))})},n.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,r){r.v.add(r.a.multiply(t)).multiply(this.damping),r.a=new f(0,0)})},n.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,r){r.p.add(r.v.clone().multiply(t))})},n.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,r){var o=r.v.lengthSquared();e+=.5*r.m*o}),e};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)}}();n.ForceDirected.prototype.start=function(t,e,r){var o=this;if(!this._started){this._started=!0,this._stop=!1,void 0!==r&&r();var n=!0,i=.01,s=25,f=500;setTimeout(function(){o.tick(i),void 0!==t&&t()},0),setTimeout(function c(){document.hasFocus()&&(o.tick(i),f=o.totalEnergy()),o._stop&&(n=!1),n&&setTimeout(c,s)},s),a(function d(){n?(a(d),void 0!==t&&f>o.minEnergyThreshold&&t()):void 0!==e&&e()})}},n.ForceDirected.prototype.stop=function(){this._stop=!0},n.ForceDirected.prototype.tick=function(t){this.decayMasses(),this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},n.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},r=this;return this.graph.nodes.forEach(function(o){var n=r.point(o),a=n.p.clone().subtract(t).length();(null===e.distance||a<e.distance)&&(e={node:o,point:n,distance:a})}),e},n.ForceDirected.prototype.getBoundingBox=function(){var t=new f(-2,-2),e=new f(2,2),r=-50,o=50;this.eachNode(function(n,a){a.p.bound(r,o),t.set(Math.min(t.x,a.p.x),Math.min(t.y,a.p.y)),e.set(Math.max(e.x,a.p.x),Math.max(e.y,a.p.y))});var n=e.clone().subtract(t).multiply(.07);return{bottomleft:t.subtract(n),topright:e.add(n)}};var i=Math.sqrt,s=Math.abs,f=t.Vector=function(t,e){this.x=t,this.y=e};f.random=function(){return new f(5*(Math.random()-.5),5*(Math.random()-.5))},f.prototype.clone=function(){return new f(this.x,this.y)},f.prototype.bound=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},f.prototype.set=function(t,e){return this.x=t,this.y=e,this},f.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},f.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},f.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},f.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},f.prototype.divide=function(t){return this.x=this.x/t||0,this.y=this.y/t||0,this},f.prototype.dot=function(t){return this.x*t.x+this.y*t.y},f.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},f.prototype.length=function(){return i(this.x*this.x+this.y*this.y)},f.prototype.normal=function(){var t=this.x;return this.x=-this.y,this.y=t,this},f.prototype.normalise=function(){return this.divide(this.length()),this};var c=1e-7;f.prototype.equals=function(t){return s(this.x-t.x)<c&&s(this.y-t.y)<c},n.ForceDirected.Point=function(t,e){this.p=t,this.mass=this.m=e,this.v=new f(0,0),this.a=new f(0,0)},n.ForceDirected.Point.prototype.applyForce=function(t){this.a.x+=t.x/this.m,this.a.y+=t.y/this.m},n.ForceDirected.Spring=function(t,e,r,o){this.point1=t,this.point2=e,this.length=r,this.k=o};var d=t.Renderer=function(t,e,r,o,n,a,i,s,f){this.layout=t,this.clear=e,this.processNode=r,this.drawEdge=o,this.drawNode=n,this.drawNodeOverlay=a,this.drawOverlay=i,this.onRenderStop=s,this.onRenderStart=f,this.layout.graph.addGraphListener(this)};d.prototype.graphChanged=function(t){this.start()},d.prototype.start=function(t){var e=this;this.layout.start(function(){var t;e.clear();var r=[],o=[];for(e.layout.eachNode(function(t,n){e.processNode(t,n.p),r.push({args:[t,n.p],func:e.drawNode,zindex:n.p.y}),o.push({args:[t,n.p],func:e.drawNodeOverlay,zindex:n.p.y})}),e.layout.eachEdge(function(t,o){r.push({args:[t,o.point1.p,o.point2.p],func:e.drawEdge,zindex:(o.point1.p.y+o.point2.p.y+Math.max(o.point1.p.y,o.point2.p.y))/3})}),r.sort(function(t,e){return t.zindex-e.zindex}),o.sort(function(t,e){return t.zindex-e.zindex}),t=0;t<r.length;t++)r[t].func.apply(e,r[t].args);for(t=0;t<o.length;t++)o[t].func.apply(e,o[t].args);e.drawOverlay()},this.onRenderStop,this.onRenderStart)},d.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var r,o;if(null===this)throw new TypeError(" this is null or not defined");var n=Object(this),a=n.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(r=e),o=0;a>o;){var i;o in n&&(i=n[o],t.call(r,i,o,n)),o++}});var u=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t}),function(){"use strict";jQuery.fn.springy=function(t){function e(){y=window.devicePixelRatio||1,b=$(j).offset(),S=j.width,k=j.height,v=new T}function r(){F.eachNode(function(t,e){e.p=Springy.Vector.random()})}function o(t){var e=H.slice(),r=e.indexOf(t);-1!==r&&e.splice(r,1),e.push(t),f(e)}function n(t){var e=H.slice(),r=e.indexOf(t);-1!==r?e.splice(r,1):e.push(t),f(e)}function a(t){var e=H.indexOf(t);-1===e&&f([t])}function i(t){var e,r,o=0|Math.min(V.start.x,V.end.x),n=0|Math.min(V.start.y,V.end.y),a=o+Math.abs(V.start.x-V.end.x)|0,i=n+Math.abs(V.start.y-V.end.y)|0,s=[];for(z.nodes.forEach(function(t){if(t.bb&&-1===s.indexOf(t)&&t.bb.center.x>o&&t.bb.center.x<a&&t.bb.center.y>n&&t.bb.center.y<i){var e=Math.abs(V.start.x+V.end.x)/2-t.bb.center.x,r=Math.abs(V.start.y+V.end.y)/2-t.bb.center.y;s.push({distanceSquared:e*e+r*r,node:t})}}),s.sort(function(t,e){return e.distanceSquared-t.distanceSquared}),e=0;e<s.length;e++)s[e]=s[e].node;if("add"===t)for(e=0;e<V.before.length;e++)r=s.indexOf(V.before[e]),-1!==r&&s.splice(r,1),s.push(V.before[e]);if("toggle"===t)for(e=0;e<V.before.length;e++)r=s.indexOf(V.before[e]),-1!==r?s.splice(r,1):s.push(V.before[e]);f(s)}function s(){f([])}function f(t){var e;for(t.length>E&&(t=t.slice(-E)),e=0;e<H.length;e++)H[e].selected=!1;for(H=t,e=0;e<H.length;e++){var r=F.point(H[e]);r&&(r.m=M),H[e].selected=!0}}function c(){var t,e,r;if(_){var o=[];for(t=0,edge;t<z.edges.length;t++)if(edge=z.edges[t],H.length>1)for(e=0;e<H.length;e++)for(r=0;r<H.length;r++)H[e]===edge.source&&H[r]===edge.target&&o.push(edge);else for(e=0;e<H.length;e++)(H[e]===edge.source||H[e]===edge.target||H[e].data.neighbors[edge.source.id]&&H[e].data.neighbors[edge.target.id])&&o.push(edge);_(H,o)}}function d(t){var e={};return z.nodes.forEach(function(r){var o=r.distanceSquared(t.x,t.y);if(void 0===e.distance||o<e.distance){var n;if("touch"===P){var a=Math.max(32,r.bb.size);n=r.bb?a*a>o:!1}else n=r.containsPoint(t);n&&(e.node=r,e.distance=o)}}),e.node}function u(t,e,r){W&&(W.point.active=!1);var o=d(t);if(o){o.isSelected()&&J++;var n=B(t);W={node:o,point:F.point(o)},W.offset=new Springy.Vector(W.point.p.x-n.x,W.point.p.y-n.y),W.coord=t,W.point.active=!0,W.point.m=M}else("replace"===e||"touch"===P)&&(s(),c()),"touch"===P?t&&r&&(V={start:t,end:r,before:H,type:e}):e&&(V={start:t,before:H,type:e}),J=0;U=0,et.start()}function m(t,e,r){var o=B(t);null!==W?(U+=t.clone().subtract(W.coord).length(),W.coord=t,W.point.p=o.add(W.offset),W.point.m=M,W.point.active=!0):"touch"===P?t&&r&&(V.start=t,V.end=r,V.type=e):V&&(V.end=t,V.type=e),et.start()}function l(t,e){if(V=null,null!==W){if(10>U){switch(e){case"add":o(W.node);break;case"toggle":n(W.node);break;case"replace":a(W.node)}c(),q=null}W.point.active=!1,W=null}else t&&(q=null)}function h(t){return t.shiftKey?"add":t.ctrlKey?"toggle":"replace"}function p(t,e){if(!Y[t]){"function"==typeof e&&(e=e());var r,o,n=e.width,a=e.getContext("2d").getImageData(0,0,n,n),i=a.data,s={};for(r=0;n>r;r++)for(s[r]={},o=0;n>o;o++)s[r][o]=i[o*n*4+4*r+3]>127?!0:void 0;Y[t]={size:n,opaque:s}}return Y[t]}function I(t,e,r){var o=document.createElement("canvas"),n=o.getContext("2d"),a=Math.max(2,e.width/10|0);o.width=o.height=e.width,n.drawImage(e,0,0,o.width,o.height),n.fillStyle=r,n.fillRect(0,o.height-a,o.width,a),void 0===K[t].portraits&&(K[t].portraits=[]),K[t].portraits.push(o);var i=e.width>>1;if(i>=16){var s=document.createElement("canvas"),f=s.getContext("2d");s.width=s.height=i,f.drawImage(e,0,0,i,i),X.unshift(t,function(){I(t,s,r)},"unshift")}else K[t].loaded=!0}function g(t,e){var r=t+"_"+(e||"");if(!Q[r]){var o,n;if(!Q[t]){var a=t/220;o=document.createElement("canvas"),n=o.getContext("2d"),o.height=o.width=t,n.beginPath(),n.moveTo(Z[0]*a,Z[1]*a);for(var i=2;i<Z.length;i+=6)n.bezierCurveTo(Z[i]*a,Z[i+1]*a,Z[i+2]*a,Z[i+3]*a,Z[i+4]*a,Z[i+5]*a);n.closePath(),n.lineWidth=3,n.strokeStyle="#868686",n.stroke(),n.fillStyle="#909090",n.fill(),Q[t]=o}var s=Math.max(2,t/10|0);o=document.createElement("canvas"),n=o.getContext("2d"),o.height=o.width=t,n.drawImage(Q[t],0,0,o.width,o.height),n.fillStyle=e||"#000",n.fillRect(0,o.height-s,o.width,s),Q[r]=o}return Q[r]}var v,y,b,S,k,w=t.stiffness||400,A=t.repulsion||400,x=t.damping||.5,C=t.minEnergyThreshold||1e-5,_=t.nodeSelected||null,E=t.maxTeamSize||5,M=t.activeMass||500,j=this[0],N=j.getContext("2d"),T=function(){this.fontSize=16*y,this.font=this.fontSize+"px Hanzel, sans-serif";var t=document.createElement("canvas"),e=t.getContext("2d");e.font=this.fontSize+"px sans-serif";var r=e.measureText("wE arE reaDY.").width;e.font=this.font,this.isReady=function(){return this.loaded||e.measureText("wE arE reaDY.").width===r||(this.loaded=!0),this.loaded}};e();var R;$(window).on("resize",function(t){R&&clearTimeout(R),R=setTimeout(function(){e(),R=null},50)});var P,z=this.graph=t.graph||new Springy.Graph,F=this.layout=new Springy.Layout.ForceDirected(z,w,A,x,C),O=F.getBoundingBox(),D=function(t){var e=O.topright.clone().subtract(O.bottomleft),r=t.clone().subtract(O.bottomleft);return new Springy.Vector(r.x/e.x*S,r.y/e.y*k)},B=function(t){var e=O.topright.clone().subtract(O.bottomleft);return new Springy.Vector(t.x/S*e.x+O.bottomleft.x,t.y/k*e.y+O.bottomleft.y)},L=function(t,e){return new Springy.Vector(t,e).multiply(y)},H=[],q=null,W=null,U=0,V=null,J=0;this.selectEdgeType=function(t){s(),q=t,W&&(W.point.active=!1),W=null,et.start()},$("body").on("keyup",function(t){27===t.which?(t.preventDefault(),s(),_&&_(H)):32===t.which&&(t.preventDefault(),r())});var G={handler:function(){var t=W&&W.node;10>U&&t&&t.isSelected()&&t.data.onOpen&&(t.data.onOpen(),l())},timeout:0,timeoutDelay:1e3};$(j).on("dblclick",function(t){if(!("mouse"!==P||2>J||t.shiftKey||t.ctrlKey)){var e=d(L(t.pageX-b.left,t.pageY-b.top));10>U&&e&&e.isSelected()&&e.data.onOpen&&(e.data.onOpen(),l()),t.preventDefault()}}),$(j).on("touchstart",function(t){clearTimeout(G.timeout),1===window.event.touches.length&&(G.timeout=setTimeout(G.handler,G.timeoutDelay)),P="touch";var e,r=L(window.event.touches[0].pageX-b.left,window.event.touches[0].pageY-b.top);return window.event.touches.length>1&&(e=L(window.event.touches[1].pageX-b.left,window.event.touches[1].pageY-b.top)),u(r,"toggle",e),t.preventDefault(),t.stopPropagation(),!1}),$(j).on("touchmove",function(t){P="touch";var e,r=L(window.event.touches[0].pageX-b.left,window.event.touches[0].pageY-b.top);return window.event.touches.length>1&&(e=L(window.event.touches[1].pageX-b.left,window.event.touches[1].pageY-b.top)),m(r,"toggle",e),t.preventDefault(),t.stopPropagation(),!1}),$(j).on("touchend",function(t){return clearTimeout(G.timeout),P="touch",0===window.event.touches.length&&l(!0,"toggle"),t.preventDefault(),t.stopPropagation(),!1}),$(j).on("touchleave touchcancel",function(t){clearTimeout(G.timeout),P="touch",l(!1,"toggle")}),$(window).on("touchend",function(t){clearTimeout(G.timeout),P="touch",l(!1,"toggle")}),$(j).on("mousedown",function(t){2!==t.button&&(P="mouse",u(L(t.pageX-b.left,t.pageY-b.top),h(t)),t.preventDefault())}),$(window).on("mousemove",function(t){P="mouse",m(L(t.pageX-b.left,t.pageY-b.top),h(t)),t.preventDefault()}),$(window).on("mouseup",function(t){(t.target===j||W||V)&&(P="mouse",l(!0,h(t)),t.preventDefault())}),$(j).on("mousedown mousemove mouseenter mouseleave",function(t){var e="";switch(V?e="selecting":null!==W?e="dragging":d(L(t.pageX-b.left,t.pageY-b.top))&&(e="hover"),e){case"selecting":$(j)[0].className="selecting";break;case"dragging":$(j)[0].className="dragging";break;case"hover":$(j)[0].className="hover";break;default:$(j)[0].className=""}});var Y={},K={},X={list:[],todo:{}};X.push=function(t,e){X.insert(t,e,"push")},X.unshift=function(t,e){X.insert(t,e,"unshift")},X.insert=function(t,e,r){X.todo[t]=e,X.list[r].call(X.list,t),X.timeout||X.next()},X.next=function(){if(0!==X.list.length){var t=X.list.shift(),e=X.todo[t];delete X.todo[t],X.timeout=setTimeout(function(){delete X.timeout,e.call(null),X.next()},25)}};var Q={},Z=[3.5709275,215.81378,3.7352275,204.03019,3.8497975,199.05392,3.5005675,183.77748,11.214111,174.15409,38.3674,169.74066,45.785393,167.0981,55.358378,159.98075,66.203698,153.92378,75.552667,148.56151,80.7154,145.60034,80.782546,135.45005,80.404668,128.63362,78.689369,118.98009,77.782686,110.65561,70.86354,103.56735,70.47649,101.54341,69.346365,96.899211,65.948685,90.832271,63.662168,80.636072,54.650066,68.010083,56.914311,61.532735,62.944238,44.282973,57.676043,37.272904,61.378834,35.798494,69.823479,32.435953,72.10706,25.082426,79.841538,17.698566,102.43887,13.411138,98.965362,1.9932189,115.84961,4.1987589,136.77696,6.9324259,125.2515,10.014792,139.60507,17.279644,157.23926,26.204921,146.73196,27.108963,162.83032,50.739759,172.38972,64.771999,153.76819,65.728581,158.59298,78.146165,163.04993,89.617072,152.54354,91.572613,147.24294,104.12579,142.15767,116.16899,138.96668,119.70997,144.82195,135.58386,150.25927,150.32462,159.28667,143.58938,179.677,165.66778,184.85448,171.27389,203.45549,164.48784,216.26305,180.85898,216.25506,189.25148,216.44185,198.19473,216.49943,216.08121,159.09474,215.87646,3.5709275,215.81378,3.5709275,215.81378],tt=function(t){var e={};return(tt=function(t){if(void 0===e[t]){for(var r=1,o=0;r!=t&&t>r+(r-o)>>1;)o=r,r<<=1;e[t]=r}return e[t]})(t)};Springy.Node.prototype.setPortraitImage=function(t){var e,r,o=this.data.image,n=this.data.color||"#111111";if(o){var a=o.src;if(a in K){if(K[a].loaded){for(var i=K[a].portraits,s=tt(t),f=0;f<i.length&&i[f].width>=s;f++)e=i[f];r=p(a,i[0])}}else{K[a]={loaded:!1,portraits:[]};var c=new Image;c.addEventListener("load",function(){X.push(a,function(){I(a,c,n)})}),c.src=a}}e||(e=g(t,n),r=p("portrait",function(){return g(256)})),this.image=e,this.hitmask=r},Springy.Node.prototype.setPortraitText=function(){if(!this.text||this.text.font!=v||!this.text.ready&&this.text.ready!==v.isReady()){var t=document.createElement("canvas"),e=t.getContext("2d"),r=this.data.label.toUpperCase();e.font=v.font;var o=y*(v.isReady()?6:3),n=y*(v.isReady()?4:3),a=3*y,i=e.measureText(r).width,s=v.fontSize;t.width=i+2*o|0,t.height=s+n+a|0,e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,t.width,t.height),e.font=v.font,e.fillStyle="#ffffff",e.textAlign="left",e.textBaseline="top",e.shadowColor="#000",e.shadowOffsetX=1*y,e.shadowOffsetY=1*y,e.fillText(r,o,n),this.text=t,this.text.font=v,this.text.ready=v.isReady()}};var et=this.renderer=new Springy.Renderer(F,function(){if(O=F.getBoundingBox(),N.clearRect(0,0,j.width,j.height),V&&V.start&&V.end&&(i(V.type),c()),W){var t=B(W.coord);W.point.p=t.add(W.offset),W.point.m=M}},function(t,e){var r=D(e),o=0|r.x,n=0|r.y,a=0|t.getSize(),i=a>>1;t.setPortraitText(),t.setPortraitImage(a),t.setBoundingBox(o-i,n-i,a)},function(t,e,r){var o=D(e),n=D(r),a=0;if(q)t.data.effect===q&&(a=1);else if(H.length===E)t.source.isSelected()&&t.target.isSelected()&&(a=1);else if(H.length>1){var i=t.source.isSelected(),s=t.target.isSelected();i&&s?a=1:i||s?a=.5:t.target.isSelectedNeighbor()&&t.source.isSelectedNeighbor()&&(a=.5);
}else H.length?((t.source.isSelected()||t.target.isSelected())&&(a=1),t.target.isSelectedNeighbor()&&t.source.isSelectedNeighbor()&&(a=.5)):a=1;for(var f=n.clone().subtract(o).normal().normalise(),c=z.getEdges(t.source,t.target),d=z.getEdges(t.target,t.source),u=c.length+d.length,m=0,l=0;l<c.length;l++)c[l].id===t.id&&(m=l);var h,p,I,g=Math.min(Math.max(4,Math.min(window.innerWidth,window.innerHeight)/50),12)*y,v=f.multiply(-((u-1)*g)/2+m*g),b=o.clone().add(v),S=n.clone().add(v),k=S.clone().subtract(b).normalise(),w=H.length>1&&1===a?2:1,A=Math.max(1.5*w,.1)*y,x=1+A,C=4*x,_=t.target.overlapping(t.source),M=k.clone().multiply(.75*C),j=b.y<S.y;_?j?(h=b.clone(),p=t.target.intersection(b,S)):(h=t.source.intersection(S,b),p=S.clone()):(h=t.source.intersection(S,b),p=t.target.intersection(b,S),(!h||!p||(I=p.clone().subtract(h)).lengthSquared()<C*C||I.normalise().dot(k)<0)&&(j?(h=b.clone(),p=t.target.intersection(b,S)):(h=t.source.intersection(S,b),p=S.clone()))),h=h||b.clone(),p=p||S.clone(),p.subtract(M);var T=p.clone().subtract(h).normalise(),R=p.clone().add(M),$=t.data.color||"#000000",P=0===a?.1:.5===a?.5:1;N.save(),N.lineWidth=A,N.lineCap=_?"round":"butt",N.strokeStyle=$,N.fillStyle=$,N.globalAlpha=P,T.dot(k)>0&&(N.beginPath(),N.moveTo(h.x,h.y),N.lineTo(p.x,p.y),N.closePath(),N.stroke()),N.translate(R.x,R.y),N.rotate(Math.atan2(n.y-o.y,n.x-o.x)),N.beginPath(),N.moveTo(-C,x),N.lineTo(0,0),N.lineTo(-C,-x),N.lineTo(.8*-C,-0),N.closePath(),N.fill(),N.restore()},function(t,e){var r=t.bb.size;t.isSelected()?N.globalAlpha=1:q?N.globalAlpha=t.data.effects[q]?1:.25:H.length===E?N.globalAlpha=.25:H.length>1?N.globalAlpha=t.isSelectedNeighbor()?.75:.25:H.length?N.globalAlpha=t.isSelectedNeighbor()?1:.25:N.globalAlpha=1,N.drawImage(t.image,t.bb.topLeft.x,t.bb.topLeft.y,r,r)},function(t,e){if(t.isSelected()&&t.text){N.globalAlpha=1;var r=t.text.width,o=t.text.height;N.drawImage(t.text,Math.min(Math.max(0,t.bb.center.x-r/2|0),S-r),Math.min(Math.max(0,t.bb.center.y-o-t.bb.size/2|0),k-o),r,o)}},function(){if(V&&V.start&&V.end){var t=-.5+Math.min(V.start.x,V.end.x)|0,e=-.5+Math.min(V.start.y,V.end.y)|0,r=.5+Math.abs(V.start.x-V.end.x)|0,o=.5+Math.abs(V.start.y-V.end.y)|0;N.save(),N.translate(.5,.5),N.lineWidth=y,N.strokeStyle="rgb(95, 156, 255)",N.strokeRect(t,e,r,o),N.globalCompositeOperation="destination-over",N.fillStyle="rgba(64, 138, 226, 0.15)",N.fillRect(t,e,r,o),N.restore()}});return Springy.Node.prototype.setBoundingBox=function(t,e,r){this.bb={topLeft:new Springy.Vector(t,e),bottomRight:new Springy.Vector(t+r,e+r),center:new Springy.Vector(t+r/2|0,e+r/2|0),size:r}},Springy.Node.prototype.containsPoint=function(t,e){var r,o,n;return void 0===e?(e=t.y,r=t.x):r=t,this.bb&&this.hitmask&&(o=(r-this.bb.topLeft.x)/this.bb.size*this.hitmask.size|0,n=(e-this.bb.topLeft.y)/this.bb.size*this.hitmask.size|0,this.hitmask.opaque[o])?this.hitmask.opaque[o][n]:!1},Springy.Node.prototype.containsPointRaw=function(t,e){return this.hitmask.opaque[0|t][0|e]},Springy.Node.prototype.overlappingBoundingBox=function(t){return this.bb&&t.bb&&this.bb.topLeft.x<=t.bb.bottomRight.x&&this.bb.bottomRight.x>=t.bb.topLeft.x&&this.bb.topLeft.y<=t.bb.bottomRight.y&&this.bb.bottomRight.y>=t.bb.topLeft.y},Springy.Node.prototype.overlapping=function(t){if(this.overlappingBoundingBox(t)){if(this.hitmask&&t.hitmask){var e,r,o,n;this.bb.bottomRight.y<t.bb.bottomRight.y?(r=0|t.bb.topLeft.y,n=0|this.bb.bottomRight.y):(r=0|this.bb.topLeft.y,n=0|t.bb.bottomRight.y),this.bb.topLeft.x<t.bb.topLeft.x?(e=0|t.bb.topLeft.x,o=0|this.bb.bottomRight.x):(e=0|this.bb.topLeft.x,o=0|t.bb.bottomRight.x);for(var a=e;o>a;a++)for(var i=r;n>i;i++)if(this.containsPoint(a,i)&&t.containsPoint(a,i))return!0;return!1}return!0}return!1},Springy.Node.prototype.distanceSquared=function(t,e){if(!this.bb)return null;var r=this.bb.center.x-t,o=this.bb.center.y-e;return r*r+o*o},Springy.Node.prototype.isSelected=function(){return this.selected},Springy.Node.prototype.isSelectedNeighbor=function(){for(var t=0;t<H.length;t++)if(H[t].data.neighbors[this.id])return!0;return!1},Springy.Node.prototype.getSize=function(){var t=Math.min(S,k),e=Math.min(Math.max(16,t>>4),128);return this.isSelected()&&(e*=1.5),e},Springy.Node.prototype.intersection=function(t,e){if(!this.hitmask||!this.bb)return null;for(var r,o=e.clone().subtract(this.bb.topLeft).divide(this.bb.size).multiply(this.hitmask.size),n=t.clone().subtract(e).normalise().divide(this.bb.size).multiply(this.hitmask.size);o.x>=0&&o.y>=0&&o.y<this.hitmask.size&&o.x<this.hitmask.size;)this.containsPointRaw(o.x,o.y)&&(r?r.copy(o):r=o.clone()),o.add(n);return r?r.divide(this.hitmask.size).multiply(this.bb.size).add(this.bb.topLeft):null},et.start(),this}}();var CoC=CoC||{};CoC.model=CoC.model||{},function(){var t={1:{1:{levels:10,min:100,max:175},2:{levels:20,min:175,max:250},ranks:2},2:{1:{levels:10,min:150,max:250},2:{levels:20,min:250,max:400},3:{levels:30,min:400,max:600},ranks:3},3:{1:{levels:10,min:300,max:500},2:{levels:20,min:500,max:900},3:{levels:30,min:900,max:1200},4:{levels:40,min:1200,max:1500},ranks:4},4:{1:{levels:10,min:600,max:1e3},2:{levels:20,min:1e3,max:1500},3:{levels:30,min:1500,max:2e3},4:{levels:40,min:2e3,max:2800},5:{levels:50,min:2800,max:3500},ranks:5}};CoC.model.Champion=Backbone.Model.extend({defaults:{uid:"champion",stars:2,name:"Champion",shortname:null,typeId:"mutant",awakened:0,rank:1,level:1,grade:0,gradeAwakened:0,quest:!1},value:function(){var e=this.get("stars"),r=this.get("rank"),o=this.get("level"),n=this.get("awakened");if(1>o||void 0===t[e])return 0;var a=t[e][r];if(void 0===a||o>a.levels)return 0;var i=a.min+o/a.levels*(a.max-a.min);return n>0&&(i*=1.05+.005*Math.min(Math.max(1,n),99)),i},ranks:function(){var e=t[this.get("stars")];return void 0===e?null:e.ranks},levels:function(){var e=t[this.get("stars")];if(void 0===e)return null;var r=e[this.get("rank")];return void 0===r?null:r.levels},stars:function(){return void 0===this._stars&&(this._stars=["","★","★★","★★★","★★★★","★★★★★"][this.get("stars")]),this._stars},fid:function(){return void 0===this._fid&&(this._fid=this.get("uid")+"_"+this.get("stars")),this._fid},portrait:function(){return void 0===this._portrait&&(this._portrait="images/champions/portrait_"+this.get("uid")+".png"),this._portrait},image:function(){return void 0===this._image&&(this._image="images/champions/fullsize_"+this.get("uid")+".png"),this._image},type:function(){return void 0===this._type&&(this._type=CoC.data.types.findWhere({uid:this.get("typeId")})),this._type},crystals:function(){if(void 0===this._crystals){this._crystals=[];for(var t=CoC.data.crystalChampions.find({championId:this.get("uid"),championStars:this.get("stars")}),e=0;e<t.length;e++)this._crystals.push(t.crystal())}return this._crystals},update:function(){var t=CoC.data.champions.findWhere({uid:this.get("uid"),stars:this.get("stars")});return t?(this.set("name",t.get("name")),this.set("shortname",t.get("shortname")),this.set("typeId",t.get("typeId")),this.set("stars",parseInt(this.get("stars"),10)||1),this.set("rank",parseInt(this.get("rank"),10)||1),this.set("level",parseInt(this.get("level"),10)||1),this.set("awakened",parseInt(this.get("awakened"),10)||0),!0):!1}})}();var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Effect=Backbone.Model.extend({defaults:{name:"Effect Name",uid:"effect",base:10,amount:0,image:"",altimage:""},image:function(){return this.get("image")+".jpg"},imageOff:function(){return this.get("image")+"_off.jpg"},championIds:function(t){if(t){this._championIds=[];for(var e in t)this._championIds.push(e)}return this._championIds}});var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Synergy=Backbone.Model.extend({defaults:{fromId:"champion",fromStars:1,toId:"champion",effectId:"effect",effectAmount:20},to:function(){return void 0===this._to&&(this._to=CoC.data.champions.findWhere({uid:this.get("toId")})),this._to},from:function(){return void 0===this._from&&(this._from=CoC.data.champions.findWhere({uid:this.get("fromId"),stars:this.get("fromStars")})),this._from},effect:function(){return void 0===this._effect&&(this._effect=CoC.data.effects.findWhere({uid:this.get("effectId")})),this._effect}});var CoC=CoC||{};CoC.model=CoC.model||{},CoC.model.Type=Backbone.Model.extend({defaults:{name:"Type",uid:"type"}});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.champions=new Backbone.Collection([{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:2},{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:3},{uid:"blackbolt",name:"Black Bolt",typeId:"cosmic",stars:4},{uid:"captainmarvel",name:"Captain Marvel",shortname:"Cap. Marvel",typeId:"cosmic",stars:3},{uid:"captainmarvel",name:"Captain Marvel",shortname:"Cap. Marvel",typeId:"cosmic",stars:4},{uid:"drax",name:"Drax",typeId:"cosmic",stars:2},{uid:"drax",name:"Drax",typeId:"cosmic",stars:3},{uid:"drax",name:"Drax",typeId:"cosmic",stars:4},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:1},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:2},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:3},{uid:"gamora",name:"Gamora",typeId:"cosmic",stars:4},{uid:"msmarvel",name:"Ms. Marvel",typeId:"cosmic",stars:3},{uid:"msmarvel",name:"Ms. Marvel",typeId:"cosmic",stars:4},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:2},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:3},{uid:"ronan",name:"Ronan",typeId:"cosmic",stars:4},{uid:"spidermanblack",name:"Spider-Man Symbiote",shortname:"Spider-Man",typeId:"cosmic",stars:3},{uid:"spidermanblack",name:"Spider-Man Symbiote",shortname:"Spider-Man",typeId:"cosmic",stars:4},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:2},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:3},{uid:"superiorironman",name:"Superior Iron Man",shortname:"Sup. Iron Man",typeId:"cosmic",stars:4},{uid:"thor",name:"Thor",typeId:"cosmic",stars:2},{uid:"thor",name:"Thor",typeId:"cosmic",stars:3},{uid:"thor",name:"Thor",typeId:"cosmic",stars:4},{uid:"thorjanefoster",name:"Thor Jane Foster",shortname:"Thor",typeId:"cosmic",stars:3},{uid:"thorjanefoster",name:"Thor Jane Foster",shortname:"Thor",typeId:"cosmic",stars:4},{uid:"venom",name:"Venom",typeId:"cosmic",stars:3},{uid:"venom",name:"Venom",typeId:"cosmic",stars:4},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:1},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:2},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:3},{uid:"ironman",name:"Iron Man",typeId:"tech",stars:4},{uid:"ironpatriot",name:"Iron Patriot",typeId:"tech",stars:3},{uid:"ironpatriot",name:"Iron Patriot",typeId:"tech",stars:4},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:2},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:3},{uid:"hulkbuster",name:"Hulkbuster",typeId:"tech",stars:4},{uid:"kang",name:"Kang",typeId:"tech",stars:4},{uid:"rocket",name:"Rocket Raccoon",shortname:"Rocket",typeId:"tech",stars:3},{uid:"rocket",name:"Rocket Raccoon",shortname:"Rocket",typeId:"tech",stars:4},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:2},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:3},{uid:"starlord",name:"Star-Lord",typeId:"tech",stars:4},{uid:"vision",name:"Vision",typeId:"tech",stars:1},{uid:"vision",name:"Vision",typeId:"tech",stars:2},{uid:"vision",name:"Vision",typeId:"tech",stars:3},{uid:"vision",name:"Vision",typeId:"tech",stars:4},{uid:"thevision",name:"The Vision",typeId:"tech",stars:2},{uid:"thevision",name:"The Vision",typeId:"tech",stars:3},{uid:"thevision",name:"The Vision",typeId:"tech",stars:4},{uid:"ultron",name:"Ultron",typeId:"tech",stars:2},{uid:"ultron",name:"Ultron",typeId:"tech",stars:3},{uid:"ultron",name:"Ultron",typeId:"tech",stars:4},{uid:"warmachine",name:"War Machine",typeId:"tech",stars:3},{uid:"warmachine",name:"War Machine",typeId:"tech",stars:4},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:1},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:2},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:3},{uid:"colossus",name:"Colossus",typeId:"mutant",stars:4},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:2},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:3},{uid:"cyclops",name:"Cyclops",typeId:"mutant",stars:4},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:2},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:3},{uid:"deadpool",name:"Deadpool",typeId:"mutant",stars:4},{uid:"deadpoolxforce",name:"Deadpool X-Force",shortname:"Deadpool",typeId:"mutant",stars:3},{uid:"deadpoolxforce",name:"Deadpool X-Force",shortname:"Deadpool",typeId:"mutant",stars:4},{uid:"magneto",name:"Magneto",typeId:"mutant",stars:3},{uid:"magneto",name:"Magneto",typeId:"mutant",stars:4},{uid:"magnetomarvelnow",name:"Magneto Marvel Now",shortname:"Magneto",typeId:"mutant",stars:3},{uid:"magnetomarvelnow",name:"Magneto Marvel Now",shortname:"Magneto",typeId:"mutant",stars:4},{uid:"storm",name:"Storm",typeId:"mutant",stars:2},{uid:"storm",name:"Storm",typeId:"mutant",stars:3},{uid:"storm",name:"Storm",typeId:"mutant",stars:4},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:1},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:2},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:3},{uid:"wolverine",name:"Wolverine",typeId:"mutant",stars:4},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:1},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:2},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:3},{uid:"blackpanther",name:"Black Panther",typeId:"skill",stars:4},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:2},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:3},{uid:"blackwidow",name:"Black Widow",typeId:"skill",stars:4},{uid:"daredevil",name:"Daredevil",typeId:"skill",stars:3},{uid:"daredevil",name:"Daredevil",typeId:"skill",stars:4},{uid:"daredevilnetflix",name:"Daredevil",typeId:"skill",stars:3},{uid:"daredevilnetflix",name:"Daredevil",typeId:"skill",stars:4},{uid:"elektra",name:"Elektra",typeId:"skill",stars:3},{uid:"elektra",name:"Elektra",typeId:"skill",stars:4},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:1},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:2},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:3},{uid:"hawkeye",name:"Hawkeye",typeId:"skill",stars:4},{uid:"moonknight",name:"Moon Knight",typeId:"skill",stars:3},{uid:"moonknight",name:"Moon Knight",typeId:"skill",stars:4},{uid:"punisher",name:"Punisher",typeId:"skill",stars:2},{uid:"punisher",name:"Punisher",typeId:"skill",stars:3},{uid:"punisher",name:"Punisher",typeId:"skill",stars:4},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:2},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:3},{uid:"wintersoldier",name:"Winter Soldier",typeId:"skill",stars:4},{uid:"abomination",name:"Abomination",typeId:"science",stars:2},{uid:"abomination",name:"Abomination",typeId:"science",stars:3},{uid:"abomination",name:"Abomination",typeId:"science",stars:4},{uid:"antman",name:"Ant-Man",typeId:"science",stars:2},{uid:"antman",name:"Ant-Man",typeId:"science",stars:3},{uid:"antman",name:"Ant-Man",typeId:"science",stars:4},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:2},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:3},{uid:"captainamerica",name:"Captain America",shortname:"Cap. America",typeId:"science",stars:4},{uid:"captainamericawwii",name:"Captain America WWII",shortname:"Cap. America",typeId:"science",stars:3},{uid:"captainamericawwii",name:"Captain America WWII",shortname:"Cap. America",typeId:"science",stars:4},{uid:"electro",name:"Electro",typeId:"science",stars:3},{uid:"electro",name:"Electro",typeId:"science",stars:4},{uid:"hulk",name:"Hulk",typeId:"science",stars:1},{uid:"hulk",name:"Hulk",typeId:"science",stars:2},{uid:"hulk",name:"Hulk",typeId:"science",stars:3},{uid:"hulk",name:"Hulk",typeId:"science",stars:4},{uid:"joefixit",name:"Joe Fixit",typeId:"science",stars:3},{uid:"joefixit",name:"Joe Fixit",typeId:"science",stars:4},{uid:"rhino",name:"Rhino",typeId:"science",stars:2},{uid:"rhino",name:"Rhino",typeId:"science",stars:3},{uid:"rhino",name:"Rhino",typeId:"science",stars:4},{uid:"spidergwen",name:"Spider-Gwen",typeId:"science",stars:3},{uid:"spidergwen",name:"Spider-Gwen",typeId:"science",stars:4},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:1},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:2},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:3},{uid:"spiderman",name:"Spider-Man",typeId:"science",stars:4},{uid:"spidermanmorales",name:"Spider-Man Morales",shortname:"Spider-Man",typeId:"science",stars:3},{uid:"spidermanmorales",name:"Spider-Man Morales",shortname:"Spider-Man",typeId:"science",stars:4},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:2},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:3},{uid:"yellowjacket",name:"YellowJacket",typeId:"science",stars:4},{uid:"drstrange",name:"Doctor Strange",shortname:"Dr. Strange",typeId:"mystic",stars:3},{uid:"drstrange",name:"Doctor Strange",shortname:"Dr. Strange",typeId:"mystic",stars:4},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:2},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:3},{uid:"ironfist",name:"Iron Fist",typeId:"mystic",stars:4},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:1},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:2},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:3},{uid:"juggernaut",name:"Juggernaut",typeId:"mystic",stars:4},{uid:"magik",name:"Magik",typeId:"mystic",stars:2},{uid:"magik",name:"Magik",typeId:"mystic",stars:3},{uid:"magik",name:"Magik",typeId:"mystic",stars:4},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:1},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:2},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:3},{uid:"scarletwitch",name:"Scarlet Witch",typeId:"mystic",stars:4},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:2},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:3},{uid:"unstoppablecolossus",name:"Unstoppable Colossus",shortname:"Unst. Colossus",typeId:"mystic",stars:4}],{model:CoC.model.Champion});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.effects=new Backbone.Collection([{uid:"attack",name:"Attack",description:"Increases damage on all attacks.",image:"images/effects/attack",base:5},{uid:"stun",name:"Stun",description:"Chance to Stun on special attacks.",image:"images/effects/stun",base:15},{uid:"critrate",name:"Critical Rate",description:"Increases the chance for Critical hit.",image:"images/effects/critical",base:5},{uid:"critdamage",name:"Critical Damage",description:"Increases damage multiplier for Critical hits.",image:"images/effects/critical",base:15},{uid:"powergain",name:"Power Gain",description:"Gain additional Power (used to trigger a special) whenever Power is gained.",image:"images/effects/mana",base:3},{uid:"powersteal",name:"Power Steal",description:"Gain Power (used to trigger a special) when attacking.",image:"images/effects/mana_steal",base:3},{uid:"perfectblock",name:"Perfect Block",description:"Increased chance to Perfect Block for 0 damage.",image:"images/effects/block",base:3},{uid:"block",name:"Block Proficiency",description:"Increases Block effectiveness for less damage taken.",image:"images/effects/block",base:10},{uid:"armor",name:"Armor",description:"Increases Armor so that all damage taken is decreased.",image:"images/effects/armor",base:4},{uid:"health",name:"Health",description:"Increases champion Health.",image:"images/effects/health",base:4},{uid:"healthsteal",name:"Health Steal",description:"Gain Health when attacking.",image:"images/effects/health_steal",base:4}],{model:CoC.model.Effect});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.synergies=new Backbone.Collection([{fromId:"blackbolt",fromStars:2,toId:"cyclops",effectId:"block",effectAmount:10},{fromId:"blackbolt",fromStars:3,toId:"cyclops",effectId:"block",effectAmount:15},{fromId:"blackbolt",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"blackbolt",fromStars:3,toId:"ronan",effectId:"attack",effectAmount:4},{fromId:"blackbolt",fromStars:3,toId:"hulk",effectId:"critdamage",effectAmount:20},{fromId:"blackbolt",fromStars:4,toId:"cyclops",effectId:"block",effectAmount:20},{fromId:"blackbolt",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"blackbolt",fromStars:4,toId:"ronan",effectId:"attack",effectAmount:5},{fromId:"blackbolt",fromStars:4,toId:"hulk",effectId:"critdamage",effectAmount:25},{fromId:"captainmarvel",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:3,toId:"gamora",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"captainmarvel",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"gamora",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"captainmarvel",fromStars:4,toId:"wolverine",effectId:"powergain",effectAmount:5},{fromId:"drax",fromStars:2,toId:"starlord",effectId:"perfectblock",effectAmount:3},{fromId:"drax",fromStars:2,toId:"gamora",effectId:"critdamage",effectAmount:15},{fromId:"drax",fromStars:3,toId:"starlord",effectId:"perfectblock",effectAmount:4},{fromId:"drax",fromStars:3,toId:"gamora",effectId:"critdamage",effectAmount:20},{fromId:"drax",fromStars:4,toId:"starlord",effectId:"perfectblock",effectAmount:5},{fromId:"drax",fromStars:4,toId:"gamora",effectId:"critdamage",effectAmount:25},{fromId:"gamora",fromStars:2,toId:"starlord",effectId:"armor",effectAmount:4},{fromId:"gamora",fromStars:3,toId:"starlord",effectId:"armor",effectAmount:5},{fromId:"gamora",fromStars:3,toId:"drax",effectId:"critdamage",effectAmount:20},{fromId:"gamora",fromStars:4,toId:"starlord",effectId:"armor",effectAmount:6},{fromId:"gamora",fromStars:4,toId:"drax",effectId:"critdamage",effectAmount:25},{fromId:"msmarvel",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"msmarvel",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:3,toId:"hulk",effectId:"perfectblock",effectAmount:4},{fromId:"msmarvel",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"msmarvel",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"msmarvel",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:5},{fromId:"msmarvel",fromStars:4,toId:"hulk",effectId:"perfectblock",effectAmount:5},{fromId:"ronan",fromStars:2,toId:"blackbolt",effectId:"critdamage",effectAmount:15},{fromId:"ronan",fromStars:3,toId:"blackbolt",effectId:"critdamage",effectAmount:20},{fromId:"ronan",fromStars:3,toId:"ironman",effectId:"critrate",effectAmount:6},{fromId:"ronan",fromStars:3,toId:"gamora",effectId:"critdamage",effectAmount:20},{fromId:"ronan",fromStars:4,toId:"blackbolt",effectId:"critdamage",effectAmount:25},{fromId:"ronan",fromStars:4,toId:"ironman",effectId:"critrate",effectAmount:7},{fromId:"ronan",fromStars:4,toId:"gamora",effectId:"critdamage",effectAmount:25},{fromId:"spidermanblack",fromStars:3,toId:"storm",effectId:"armor",effectAmount:5},{fromId:"spidermanblack",fromStars:3,toId:"electro",effectId:"critrate",effectAmount:6},{fromId:"spidermanblack",fromStars:4,toId:"storm",effectId:"armor",effectAmount:6},{fromId:"spidermanblack",fromStars:4,toId:"electro",effectId:"critrate",effectAmount:7},{fromId:"superiorironman",fromStars:2,toId:"captainamerica",effectId:"critrate",effectAmount:5},{fromId:"superiorironman",fromStars:2,toId:"daredevil",effectId:"critdamage",effectAmount:15},{fromId:"superiorironman",fromStars:2,toId:"thor",effectId:"perfectblock",effectAmount:3},{fromId:"superiorironman",fromStars:3,toId:"captainamerica",effectId:"critrate",effectAmount:6},{fromId:"superiorironman",fromStars:3,toId:"daredevil",effectId:"critdamage",effectAmount:20},{fromId:"superiorironman",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"superiorironman",fromStars:4,toId:"captainamerica",effectId:"critrate",effectAmount:7},{fromId:"superiorironman",fromStars:4,toId:"daredevil",effectId:"critdamage",effectAmount:25},{fromId:"superiorironman",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"thor",fromStars:2,toId:"drstrange",effectId:"armor",effectAmount:4},{fromId:"thor",fromStars:2,toId:"ironman",effectId:"armor",effectAmount:4},{fromId:"thor",fromStars:3,toId:"drstrange",effectId:"armor",effectAmount:5},{fromId:"thor",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"thor",fromStars:3,toId:"juggernaut",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"drstrange",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"thor",fromStars:4,toId:"juggernaut",effectId:"armor",effectAmount:7},{fromId:"ironman",fromStars:2,toId:"thor",effectId:"perfectblock",effectAmount:3},{fromId:"ironman",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"ironman",fromStars:3,toId:"thor",effectId:"perfectblock",effectAmount:4},{fromId:"ironman",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"ironman",fromStars:4,toId:"thor",effectId:"perfectblock",effectAmount:5},{fromId:"ironpatriot",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"ironpatriot",fromStars:3,toId:"spiderman",effectId:"critrate",effectAmount:6},{fromId:"ironpatriot",fromStars:3,toId:"captainamerica",effectId:"critdamage",effectAmount:20},{fromId:"ironpatriot",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"ironpatriot",fromStars:4,toId:"spiderman",effectId:"critrate",effectAmount:7},{fromId:"ironpatriot",fromStars:4,toId:"captainamerica",effectId:"critdamage",effectAmount:25},{fromId:"kang",fromStars:4,toId:"blackbolt",effectId:"armor",effectAmount:6},{fromId:"kang",fromStars:4,toId:"thevision",effectId:"critrate",effectAmount:7},{fromId:"kang",fromStars:4,toId:"thor",effectId:"critrate",effectAmount:7},{fromId:"kang",fromStars:4,toId:"spidermanblack",effectId:"critrate",effectAmount:7},{fromId:"hulkbuster",fromStars:2,toId:"hulk",effectId:"critdamage",effectAmount:15},{fromId:"hulkbuster",fromStars:3,toId:"hulk",effectId:"critdamage",effectAmount:20},{fromId:"hulkbuster",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"hulkbuster",fromStars:3,toId:"superiorironman",effectId:"perfectblock",effectAmount:5},{fromId:"hulkbuster",fromStars:4,toId:"hulk",effectId:"critdamage",effectAmount:25},{fromId:"hulkbuster",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:6},{fromId:"hulkbuster",fromStars:4,toId:"superiorironman",effectId:"perfectblock",effectAmount:6},{fromId:"rocket",fromStars:3,toId:"starlord",effectId:"armor",effectAmount:5},{fromId:"rocket",fromStars:3,toId:"ronan",effectId:"critrate",effectAmount:6},{fromId:"rocket",fromStars:3,toId:"gamora",effectId:"perfectblock",effectAmount:4},{fromId:"rocket",fromStars:3,toId:"drax",effectId:"perfectblock",effectAmount:4},{fromId:"rocket",fromStars:4,toId:"starlord",effectId:"armor",effectAmount:6},{fromId:"rocket",fromStars:4,toId:"ronan",effectId:"critrate",effectAmount:7},{fromId:"rocket",fromStars:4,toId:"gamora",effectId:"perfectblock",effectAmount:5},{fromId:"rocket",fromStars:4,toId:"drax",effectId:"perfectblock",effectAmount:5},{fromId:"starlord",fromStars:2,toId:"rocket",effectId:"armor",effectAmount:4},{fromId:"starlord",fromStars:2,toId:"drax",effectId:"perfectblock",effectAmount:3},{fromId:"starlord",fromStars:3,toId:"rocket",effectId:"armor",effectAmount:5},{fromId:"starlord",fromStars:3,toId:"drax",effectId:"perfectblock",effectAmount:4},{fromId:"starlord",fromStars:3,toId:"gamora",effectId:"perfectblock",effectAmount:4},{fromId:"starlord",fromStars:4,toId:"rocket",effectId:"armor",effectAmount:6},{fromId:"starlord",fromStars:4,toId:"drax",effectId:"perfectblock",effectAmount:5},{fromId:"starlord",fromStars:4,toId:"gamora",effectId:"perfectblock",effectAmount:5},{fromId:"vision",fromStars:2,toId:"scarletwitch",effectId:"powergain",effectAmount:3},{fromId:"vision",fromStars:2,toId:"ironman",effectId:"perfectblock",effectAmount:3},{fromId:"vision",fromStars:3,toId:"scarletwitch",effectId:"powergain",effectAmount:4},{fromId:"vision",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"vision",fromStars:4,toId:"scarletwitch",effectId:"powergain",effectAmount:5},{fromId:"vision",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"thevision",fromStars:2,toId:"ironman",effectId:"health",effectAmount:4},{fromId:"thevision",fromStars:2,toId:"scarletwitch",effectId:"perfectblock",effectAmount:3},{fromId:"thevision",fromStars:3,toId:"ironman",effectId:"health",effectAmount:5},{fromId:"thevision",fromStars:3,toId:"scarletwitch",effectId:"perfectblock",effectAmount:4},{fromId:"thevision",fromStars:3,toId:"ultron",effectId:"attack",effectAmount:4},{fromId:"thevision",fromStars:4,toId:"ironman",effectId:"health",effectAmount:6},{fromId:"thevision",fromStars:4,toId:"scarletwitch",effectId:"perfectblock",effectAmount:5},{fromId:"thevision",fromStars:4,toId:"ultron",effectId:"attack",effectAmount:5},{fromId:"ultron",fromStars:2,toId:"ironman",effectId:"health",effectAmount:4},{fromId:"ultron",fromStars:2,toId:"scarletwitch",effectId:"armor",effectAmount:4},{fromId:"ultron",fromStars:3,toId:"ironman",effectId:"health",effectAmount:5},{fromId:"ultron",fromStars:3,toId:"scarletwitch",effectId:"armor",effectAmount:5},{fromId:"ultron",fromStars:4,toId:"ironman",effectId:"health",effectAmount:6},{fromId:"ultron",fromStars:4,toId:"scarletwitch",effectId:"armor",effectAmount:6},{fromId:"warmachine",fromStars:3,toId:"hulkbuster",effectId:"armor",effectAmount:5},{fromId:"warmachine",fromStars:3,toId:"hawkeye",effectId:"block",effectAmount:15},{fromId:"warmachine",fromStars:3,toId:"blackwidow",effectId:"perfectblock",effectAmount:4},{fromId:"warmachine",fromStars:4,toId:"hulkbuster",effectId:"armor",effectAmount:6},{fromId:"warmachine",fromStars:4,toId:"blackpanther",effectId:"critrate",effectAmount:7},{fromId:"warmachine",fromStars:4,toId:"hawkeye",effectId:"block",effectAmount:20},{fromId:"warmachine",fromStars:4,toId:"blackwidow",effectId:"perfectblock",effectAmount:5},{fromId:"colossus",fromStars:2,toId:"juggernaut",effectId:"critrate",effectAmount:5},{fromId:"colossus",fromStars:3,toId:"juggernaut",effectId:"critrate",effectAmount:6},{fromId:"colossus",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"colossus",fromStars:3,toId:"magik",effectId:"health",effectAmount:4},{fromId:"colossus",fromStars:4,toId:"juggernaut",effectId:"critrate",effectAmount:7},{fromId:"colossus",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"colossus",fromStars:4,toId:"magik",effectId:"health",effectAmount:5},{fromId:"cyclops",fromStars:2,toId:"wolverine",effectId:"critdamage",effectAmount:15},{fromId:"cyclops",fromStars:3,toId:"wolverine",effectId:"critdamage",effectAmount:20},{fromId:"cyclops",fromStars:3,toId:"magneto",effectId:"attack",effectAmount:4},{fromId:"cyclops",fromStars:4,toId:"wolverine",effectId:"critdamage",effectAmount:25},{fromId:"cyclops",fromStars:4,toId:"magneto",effectId:"attack",effectAmount:5},{fromId:"deadpool",fromStars:2,toId:"punisher",effectId:"perfectblock",effectAmount:3},{fromId:"deadpool",fromStars:3,toId:"rhino",effectId:"critrate",effectAmount:6},{fromId:"deadpool",fromStars:3,toId:"wolverine",effectId:"health",effectAmount:4},{fromId:"deadpool",fromStars:3,toId:"punisher",effectId:"perfectblock",effectAmount:4},{fromId:"deadpool",
fromStars:4,toId:"rhino",effectId:"critrate",effectAmount:7},{fromId:"deadpool",fromStars:4,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"deadpool",fromStars:4,toId:"punisher",effectId:"perfectblock",effectAmount:5},{fromId:"deadpoolxforce",fromStars:3,toId:"moonknight",effectId:"critdamage",effectAmount:20},{fromId:"deadpoolxforce",fromStars:3,toId:"deadpool",effectId:"critdamage",effectAmount:20},{fromId:"deadpoolxforce",fromStars:4,toId:"magnetomarvelnow",effectId:"armor",effectAmount:6},{fromId:"deadpoolxforce",fromStars:4,toId:"moonknight",effectId:"critdamage",effectAmount:25},{fromId:"deadpoolxforce",fromStars:4,toId:"deadpool",effectId:"critdamage",effectAmount:25},{fromId:"magneto",fromStars:3,toId:"wolverine",effectId:"critrate",effectAmount:6},{fromId:"magneto",fromStars:3,toId:"cyclops",effectId:"block",effectAmount:15},{fromId:"magneto",fromStars:3,toId:"storm",effectId:"critdamage",effectAmount:20},{fromId:"magneto",fromStars:4,toId:"wolverine",effectId:"critrate",effectAmount:7},{fromId:"magneto",fromStars:4,toId:"cyclops",effectId:"block",effectAmount:20},{fromId:"magneto",fromStars:4,toId:"storm",effectId:"critdamage",effectAmount:25},{fromId:"magnetomarvelnow",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"magnetomarvelnow",fromStars:3,toId:"magik",effectId:"perfectblock",effectAmount:4},{fromId:"magnetomarvelnow",fromStars:3,toId:"wolverine",effectId:"critdamage",effectAmount:20},{fromId:"magnetomarvelnow",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"magnetomarvelnow",fromStars:4,toId:"magik",effectId:"perfectblock",effectAmount:5},{fromId:"magnetomarvelnow",fromStars:4,toId:"wolverine",effectId:"critdamage",effectAmount:25},{fromId:"storm",fromStars:2,toId:"blackpanther",effectId:"powergain",effectAmount:3},{fromId:"storm",fromStars:3,toId:"magik",effectId:"armor",effectAmount:6},{fromId:"storm",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"storm",fromStars:3,toId:"blackpanther",effectId:"powergain",effectAmount:4},{fromId:"storm",fromStars:4,toId:"magik",effectId:"armor",effectAmount:7},{fromId:"storm",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"storm",fromStars:4,toId:"blackpanther",effectId:"powergain",effectAmount:5},{fromId:"storm",fromStars:4,toId:"magneto",effectId:"critrate",effectAmount:7},{fromId:"wolverine",fromStars:2,toId:"cyclops",effectId:"critdamage",effectAmount:15},{fromId:"wolverine",fromStars:3,toId:"cyclops",effectId:"critdamage",effectAmount:20},{fromId:"wolverine",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"wolverine",fromStars:3,toId:"magneto",effectId:"critrate",effectAmount:6},{fromId:"wolverine",fromStars:4,toId:"cyclops",effectId:"critdamage",effectAmount:25},{fromId:"wolverine",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"wolverine",fromStars:4,toId:"magneto",effectId:"critrate",effectAmount:7},{fromId:"blackpanther",fromStars:2,toId:"ironfist",effectId:"critdamage",effectAmount:15},{fromId:"blackpanther",fromStars:3,toId:"ironfist",effectId:"critdamage",effectAmount:20},{fromId:"blackpanther",fromStars:3,toId:"storm",effectId:"powergain",effectAmount:4},{fromId:"blackpanther",fromStars:3,toId:"deadpool",effectId:"critrate",effectAmount:6},{fromId:"blackpanther",fromStars:4,toId:"ironfist",effectId:"critdamage",effectAmount:25},{fromId:"blackpanther",fromStars:4,toId:"storm",effectId:"powergain",effectAmount:5},{fromId:"blackpanther",fromStars:4,toId:"deadpool",effectId:"critrate",effectAmount:7},{fromId:"daredevil",fromStars:3,toId:"superiorironman",effectId:"critdamage",effectAmount:20},{fromId:"daredevil",fromStars:3,toId:"blackwidow",effectId:"powergain",effectAmount:4},{fromId:"daredevil",fromStars:4,toId:"superiorironman",effectId:"critdamage",effectAmount:25},{fromId:"daredevil",fromStars:4,toId:"blackwidow",effectId:"powergain",effectAmount:5},{fromId:"elektra",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"elektra",fromStars:3,toId:"daredevil",effectId:"powergain",effectAmount:4},{fromId:"elektra",fromStars:3,toId:"blackwidow",effectId:"critdamage",effectAmount:20},{fromId:"elektra",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"elektra",fromStars:4,toId:"daredevil",effectId:"powergain",effectAmount:5},{fromId:"elektra",fromStars:4,toId:"deadpool",effectId:"perfectblock",effectAmount:5},{fromId:"elektra",fromStars:4,toId:"blackwidow",effectId:"critdamage",effectAmount:25},{fromId:"hawkeye",fromStars:2,toId:"scarletwitch",effectId:"powergain",effectAmount:3},{fromId:"hawkeye",fromStars:3,toId:"scarletwitch",effectId:"powergain",effectAmount:4},{fromId:"hawkeye",fromStars:3,toId:"ironman",effectId:"armor",effectAmount:5},{fromId:"hawkeye",fromStars:4,toId:"scarletwitch",effectId:"powergain",effectAmount:5},{fromId:"hawkeye",fromStars:4,toId:"ironman",effectId:"armor",effectAmount:6},{fromId:"hawkeye",fromStars:4,toId:"hulk",effectId:"armor",effectAmount:6},{fromId:"moonknight",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"moonknight",fromStars:3,toId:"daredevil",effectId:"perfectblock",effectAmount:4},{fromId:"moonknight",fromStars:3,toId:"deadpoolxforce",effectId:"critdamage",effectAmount:20},{fromId:"moonknight",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"moonknight",fromStars:4,toId:"daredevil",effectId:"perfectblock",effectAmount:5},{fromId:"moonknight",fromStars:4,toId:"deadpoolxforce",effectId:"critdamage",effectAmount:25},{fromId:"moonknight",fromStars:4,toId:"ironpatriot",effectId:"critrate",effectAmount:7},{fromId:"punisher",fromStars:2,toId:"spiderman",effectId:"critdamage",effectAmount:15},{fromId:"punisher",fromStars:3,toId:"spiderman",effectId:"critdamage",effectAmount:20},{fromId:"punisher",fromStars:3,toId:"rhino",effectId:"perfectblock",effectAmount:4},{fromId:"punisher",fromStars:4,toId:"spiderman",effectId:"critdamage",effectAmount:25},{fromId:"punisher",fromStars:4,toId:"rhino",effectId:"perfectblock",effectAmount:5},{fromId:"wintersoldier",fromStars:2,toId:"wolverine",effectId:"armor",effectAmount:4},{fromId:"wintersoldier",fromStars:2,toId:"captainamerica",effectId:"perfectblock",effectAmount:3},{fromId:"wintersoldier",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"wintersoldier",fromStars:3,toId:"captainamerica",effectId:"perfectblock",effectAmount:4},{fromId:"wintersoldier",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"wintersoldier",fromStars:4,toId:"captainamerica",effectId:"perfectblock",effectAmount:5},{fromId:"blackwidow",fromStars:2,toId:"captainmarvel",effectId:"armor",effectAmount:4},{fromId:"blackwidow",fromStars:2,toId:"wintersoldier",effectId:"powergain",effectAmount:3},{fromId:"blackwidow",fromStars:3,toId:"hulk",effectId:"stun",effectAmount:20},{fromId:"blackwidow",fromStars:3,toId:"captainmarvel",effectId:"armor",effectAmount:5},{fromId:"blackwidow",fromStars:3,toId:"wintersoldier",effectId:"powergain",effectAmount:4},{fromId:"blackwidow",fromStars:3,toId:"hawkeye",effectId:"powergain",effectAmount:4},{fromId:"blackwidow",fromStars:4,toId:"hulk",effectId:"stun",effectAmount:25},{fromId:"blackwidow",fromStars:4,toId:"captainmarvel",effectId:"armor",effectAmount:6},{fromId:"blackwidow",fromStars:4,toId:"wintersoldier",effectId:"powergain",effectAmount:5},{fromId:"blackwidow",fromStars:4,toId:"hawkeye",effectId:"powergain",effectAmount:5},{fromId:"abomination",fromStars:2,toId:"rhino",effectId:"armor",effectAmount:4},{fromId:"abomination",fromStars:3,toId:"rhino",effectId:"armor",effectAmount:5},{fromId:"abomination",fromStars:3,toId:"hulk",effectId:"attack",effectAmount:4},{fromId:"abomination",fromStars:4,toId:"rhino",effectId:"armor",effectAmount:6},{fromId:"abomination",fromStars:4,toId:"hulk",effectId:"attack",effectAmount:5},{fromId:"antman",fromStars:2,toId:"yellowjacket",effectId:"attack",effectAmount:4},{fromId:"antman",fromStars:2,toId:"ironman",effectId:"perfectblock",effectAmount:3},{fromId:"antman",fromStars:3,toId:"yellowjacket",effectId:"attack",effectAmount:5},{fromId:"antman",fromStars:3,toId:"spiderman",effectId:"perfectblock",effectAmount:4},{fromId:"antman",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"antman",fromStars:4,toId:"hulk",effectId:"armor",effectAmount:6},{fromId:"antman",fromStars:4,toId:"yellowjacket",effectId:"attack",effectAmount:6},{fromId:"antman",fromStars:4,toId:"spiderman",effectId:"perfectblock",effectAmount:5},{fromId:"antman",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"captainamerica",fromStars:2,toId:"spiderman",effectId:"armor",effectAmount:4},{fromId:"captainamerica",fromStars:2,toId:"superiorironman",effectId:"critrate",effectAmount:5},{fromId:"captainamerica",fromStars:2,toId:"ironman",effectId:"armor",effectAmount:3},{fromId:"captainamerica",fromStars:3,toId:"wintersoldier",effectId:"armor",effectAmount:5},{fromId:"captainamerica",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"captainamerica",fromStars:3,toId:"superiorironman",effectId:"critrate",effectAmount:6},{fromId:"captainamerica",fromStars:3,toId:"ironman",effectId:"perfectblock",effectAmount:4},{fromId:"captainamerica",fromStars:4,toId:"wintersoldier",effectId:"armor",effectAmount:6},{fromId:"captainamerica",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"captainamerica",fromStars:4,toId:"superiorironman",effectId:"critrate",effectAmount:7},{fromId:"captainamerica",fromStars:4,toId:"ironman",effectId:"perfectblock",effectAmount:5},{fromId:"captainamericawwii",fromStars:3,toId:"wintersoldier",effectId:"armor",effectAmount:5},{fromId:"captainamericawwii",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"captainamericawwii",fromStars:4,toId:"wintersoldier",effectId:"armor",effectAmount:6},{fromId:"captainamericawwii",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"electro",fromStars:3,toId:"spiderman",effectId:"attack",effectAmount:4},{fromId:"electro",fromStars:3,toId:"rhino",effectId:"armor",effectAmount:5},{fromId:"electro",fromStars:4,toId:"spiderman",effectId:"attack",effectAmount:5},{fromId:"electro",fromStars:4,toId:"rhino",effectId:"armor",effectAmount:6},{fromId:"hulk",fromStars:2,toId:"thor",effectId:"critdamage",effectAmount:15},{fromId:"hulk",fromStars:3,toId:"thor",effectId:"critdamage",effectAmount:5},{fromId:"hulk",fromStars:3,toId:"abomination",effectId:"critrate",effectAmount:6},{fromId:"hulk",fromStars:3,toId:"hawkeye",effectId:"armor",effectAmount:20},{fromId:"hulk",fromStars:4,toId:"thor",effectId:"critdamage",effectAmount:6},{fromId:"hulk",fromStars:4,toId:"abomination",effectId:"critrate",effectAmount:7},{fromId:"hulk",fromStars:4,toId:"hawkeye",effectId:"armor",effectAmount:25},{fromId:"rhino",fromStars:2,toId:"spiderman",effectId:"critrate",effectAmount:5},{fromId:"rhino",fromStars:2,toId:"abomination",effectId:"armor",effectAmount:4},{fromId:"rhino",fromStars:3,toId:"spiderman",effectId:"critrate",effectAmount:6},{fromId:"rhino",fromStars:3,toId:"abomination",effectId:"armor",effectAmount:5},{fromId:"rhino",fromStars:3,toId:"electro",effectId:"perfectblock",effectAmount:4},{fromId:"rhino",fromStars:4,toId:"spiderman",effectId:"critrate",effectAmount:7},{fromId:"rhino",fromStars:4,toId:"abomination",effectId:"armor",effectAmount:6},{fromId:"rhino",fromStars:4,toId:"electro",effectId:"perfectblock",effectAmount:5},{fromId:"spiderman",fromStars:1,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:1,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:2,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:2,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"wolverine",effectId:"health",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"hawkeye",effectId:"attack",effectAmount:5},{fromId:"spiderman",fromStars:3,toId:"electro",effectId:"health",effectAmount:6},{fromId:"spiderman",fromStars:3,toId:"captainamerica",effectId:"armor",effectAmount:5},{fromId:"spiderman",fromStars:4,toId:"wolverine",effectId:"health",effectAmount:6},{fromId:"spiderman",fromStars:4,toId:"hawkeye",effectId:"attack",effectAmount:6},{fromId:"spiderman",fromStars:4,toId:"electro",effectId:"health",effectAmount:7},{fromId:"spiderman",fromStars:4,toId:"captainamerica",effectId:"armor",effectAmount:6},{fromId:"yellowjacket",fromStars:2,toId:"antman",effectId:"attack",effectAmount:4},{fromId:"yellowjacket",fromStars:2,toId:"ultron",effectId:"critdamage",effectAmount:15},{fromId:"yellowjacket",fromStars:3,toId:"antman",effectId:"attack",effectAmount:5},{fromId:"yellowjacket",fromStars:3,toId:"ultron",effectId:"critdamage",effectAmount:20},{fromId:"yellowjacket",fromStars:4,toId:"antman",effectId:"attack",effectAmount:6},{fromId:"yellowjacket",fromStars:4,toId:"ultron",effectId:"critdamage",effectAmount:25},{fromId:"drstrange",fromStars:3,toId:"thor",effectId:"armor",effectAmount:5},{fromId:"drstrange",fromStars:3,toId:"spiderman",effectId:"armor",effectAmount:5},{fromId:"drstrange",fromStars:3,toId:"scarletwitch",effectId:"block",effectAmount:15},{fromId:"drstrange",fromStars:3,toId:"blackbolt",effectId:"perfectblock",effectAmount:4},{fromId:"drstrange",fromStars:4,toId:"thor",effectId:"armor",effectAmount:6},{fromId:"drstrange",fromStars:4,toId:"spiderman",effectId:"armor",effectAmount:6},{fromId:"drstrange",fromStars:4,toId:"scarletwitch",effectId:"block",effectAmount:20},{fromId:"drstrange",fromStars:4,toId:"blackbolt",effectId:"perfectblock",effectAmount:5},{fromId:"ironfist",fromStars:2,toId:"blackpanther",effectId:"armor",effectAmount:4},{fromId:"ironfist",fromStars:3,toId:"blackpanther",effectId:"armor",effectAmount:5},{fromId:"ironfist",fromStars:3,toId:"drstrange",effectId:"armor",effectAmount:5},{fromId:"ironfist",fromStars:4,toId:"blackpanther",effectId:"armor",effectAmount:6},{fromId:"ironfist",fromStars:4,toId:"drstrange",effectId:"armor",effectAmount:6},{fromId:"ironfist",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"juggernaut",fromStars:2,toId:"colossus",effectId:"critrate",effectAmount:5},{fromId:"juggernaut",fromStars:3,toId:"drstrange",effectId:"attack",effectAmount:4},{fromId:"juggernaut",fromStars:3,toId:"colossus",effectId:"critrate",effectAmount:6},{fromId:"juggernaut",fromStars:3,toId:"hulk",effectId:"critrate",effectAmount:6},{fromId:"juggernaut",fromStars:4,toId:"drstrange",effectId:"attack",effectAmount:5},{fromId:"juggernaut",fromStars:4,toId:"colossus",effectId:"critrate",effectAmount:7},{fromId:"juggernaut",fromStars:4,toId:"hulk",effectId:"critrate",effectAmount:7},{fromId:"magik",fromStars:2,toId:"colossus",effectId:"health",effectAmount:4},{fromId:"magik",fromStars:3,toId:"storm",effectId:"armor",effectAmount:5},{fromId:"magik",fromStars:3,toId:"colossus",effectId:"health",effectAmount:5},{fromId:"magik",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"magik",fromStars:4,toId:"storm",effectId:"armor",effectAmount:6},{fromId:"magik",fromStars:4,toId:"colossus",effectId:"health",effectAmount:6},{fromId:"magik",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"magik",fromStars:4,toId:"juggernaut",effectId:"critrate",effectAmount:7},{fromId:"scarletwitch",fromStars:2,toId:"captainmarvel",effectId:"armor",effectAmount:4},{fromId:"scarletwitch",fromStars:3,toId:"captainmarvel",effectId:"armor",effectAmount:5},{fromId:"scarletwitch",fromStars:3,toId:"vision",effectId:"powergain",effectAmount:4},{fromId:"scarletwitch",fromStars:4,toId:"captainmarvel",effectId:"armor",effectAmount:6},{fromId:"scarletwitch",fromStars:4,toId:"vision",effectId:"powergain",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:2,toId:"magik",effectId:"health",effectAmount:4},{fromId:"unstoppablecolossus",fromStars:2,toId:"juggernaut",effectId:"critdamage",effectAmount:15},{fromId:"unstoppablecolossus",fromStars:3,toId:"wolverine",effectId:"armor",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:3,toId:"magik",effectId:"health",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:3,toId:"cyclops",effectId:"perfectblock",effectAmount:4},{fromId:"unstoppablecolossus",fromStars:3,toId:"juggernaut",effectId:"critdamage",effectAmount:20},{fromId:"unstoppablecolossus",fromStars:4,toId:"wolverine",effectId:"armor",effectAmount:6},{fromId:"unstoppablecolossus",fromStars:4,toId:"magik",effectId:"health",effectAmount:6},{fromId:"unstoppablecolossus",fromStars:4,toId:"cyclops",effectId:"perfectblock",effectAmount:5},{fromId:"unstoppablecolossus",fromStars:4,toId:"juggernaut",effectId:"critdamage",effectAmount:25}],{model:CoC.model.Synergy});var CoC=CoC||{};CoC.data=CoC.data||{},CoC.data.types=new Backbone.Collection([{uid:"cosmic",name:"Cosmic",image:"images/icons/cosmic.png"},{uid:"tech",name:"Tech",image:"images/icons/tech.png"},{uid:"mutant",name:"Mutant",image:"images/icons/mutant.png"},{uid:"skill",name:"Skill",image:"images/icons/skill.png"},{uid:"science",name:"Science",image:"images/icons/science.png"},{uid:"mystic",name:"Mystic",image:"images/icons/mystic.png"}],{model:CoC.model.Type});var CoC=CoC||{};CoC.tracking=CoC.tracking||{},function(t,e,r,o,n,a,i){t.GoogleAnalyticsObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,a=e.createElement(r),i=e.getElementsByTagName(r)[0],a.async=1,a.src=o,i.parentNode.insertBefore(a,i)}(window,document,"script","//www.google-analytics.com/analytics.js","_gaTracker"),_gaTracker("create","UA-64735733-1","auto"),CoC.tracking.pageView=function(){if("localhost"!==location.hostname){for(var t=["send","pageview"],e=0;e<arguments.length;e++)t.push(arguments[e]);_gaTracker.apply(_gaTracker,t)}},CoC.tracking.event=function(){if("localhost"!==location.hostname){for(var t=["send","event"],e=0;e<arguments.length;e++)t.push(arguments[e]);_gaTracker.apply(_gaTracker,t)}},window.onerror=function(t,e,r){if("localhost"!==location.hostname){for(var o="	"+(-1!==e.lastIndexOf("/")?e.substr(e.lastIndexOf("/")+1):e)+":"+r,n=155-unescape(encodeURIComponent(o)).length;unescape(encodeURIComponent(t)).length>n;)t=t.substr(0,t.length-1);_gaTracker("send","exception",{exDescription:t+o,exFatal:!0})}};var CoC=CoC||{};CoC.synergies=CoC.synergies||{},CoC.synergies.version="1.5.0",CoC.synergies.initialize=function(t,e){function r(t,e,r){var o=c[t],n=c[e];o.data.neighbors[n.id]=!0,o.data.effects[r]=!0,n.data.neighbors[o.id]=!0,n.data.effects[r]=!0}console.log("Contest of Champions - Synergies Tool v"+CoC.synergies.version);var o,n=function(t,e){var r;if($("#legend div").removeClass("selected"),$("#legend div span").text(""),0===t.length)$("#legend").removeClass("selected");else if(void 0!==e){for($("#legend").addClass("selected"),r=0;r<e.length;r++)$("#legend div[effectId="+e[r].data.effect+"]").addClass("selected");if(t.length>1){var o={};for(r=0;r<e.length;r++)o[e[r].data.effect]=e[r].data.amount+(o[e[r].data.effect]||0);for(var n in o)$("#legend div[effectId="+n+"] span").text(" - "+o[n]+"%")}}CoC.synergies.updateLegend()},a=location.href.substr(0,location.href.lastIndexOf("/")+1),i={cosmic:"#3af",tech:"#23f",mutant:"#fa0",skill:"#f30",science:"#0a0",mystic:"#90f"},s={attack:"#f00",stun:"#f60",critrate:"#fa0",critdamage:"#a60",powergain:"#a0f",powersteal:"#a6f",perfectblock:"#00a",block:"#66f",armor:"#0af",health:"#0f0",healthsteal:"#af0"},f=$("canvas").springy({stiffness:800,repulsion:1600,damping:.5,nodeSelected:n}),c={},d={},u=e?CoC.data.roster.where({stars:t}):CoC.data.champions.where({stars:t});for(o=0;o<u.length;o++)(function(r){var o=e||CoC.data.synergies.where({fromId:r.get("uid"),fromStars:t}).length||CoC.data.synergies.where({fromStars:t,toId:r.get("uid")}).length;if(o){var n=$("<a>",{href:a+"#page-guide?guide="+r.get("uid"),"class":"hidden",target:"_blank"});$(document.body).append(n),void 0===n[0].click&&document.createEvent&&(n[0].click=function(){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),this.dispatchEvent(t)}),c[r.get("uid")]=f.graph.newNode({label:r.get("name"),image:function(t){var e=new Image;return e.src=t,e}(r.portrait()),type:r.get("typeId"),color:i[r.get("typeId")],neighbors:{},effects:{},onOpen:function(){n[0].click()}})}})(u[o]);var m=CoC.data.synergies.where({fromStars:t});for(o=0;o<m.length;o++){var l=m[o];void 0!==c[l.get("fromId")]&&void 0!==c[l.get("toId")]&&(r(l.get("fromId"),l.get("toId"),l.get("effectId")),f.graph.newEdge(c[l.get("fromId")],c[l.get("toId")],{label:l.effect().get("name"),effect:l.get("effectId"),amount:l.get("effectAmount"),color:s[l.get("effectId")]}),d[l.get("effectId")]=!0)}$("#popup-share").css("display","block").enhanceWithin().popup(),$("#share-facebook").click(function(){CoC.tracking.event("share","facebook")}),$("#share-twitter").click(function(){CoC.tracking.event("share","twitter")}),$("#share-googleplus").click(function(){CoC.tracking.event("share","googleplus")}),CoC.data.effects.each(function(t){var e=t.get("uid"),r=t.get("name");d[e]&&$("#legend").append($("<div>",{effectId:e,style:"border-color:"+(s[e]||"#000")+";"}).text(r).append("<span>").click(function(){$("#legend").addClass("selected"),$("#legend div").removeClass("selected"),$("#legend div[effectId="+e+"]").addClass("selected"),$("#legend div span").empty(),f.selectEdgeType(e)}))}),e&&0===u.length&&($("#roster-hint").addClass("active"),$("#roster-hint-stars").text(Array(t+1).join("★"))),_.isEmpty(d)?$("#legend").css("display","none"):($(".button.legend").click(CoC.synergies.toggleLegend),CoC.synergies.toggleLegend()),$(".button[stars="+t+"]").addClass("ui-btn-a"),e?$(".button[stars]").each(function(e){var r=$(this),o=r.attr("stars");t===parseInt(o,10)?r.addClass("ui-btn-e"):r.attr("href","?roster="+o)}):$(".button[stars="+t+"]").attr("href","?roster="+t),CoC.tracking.pageView()},CoC.synergies.toggleLegend=function(){$(".button.legend").hasClass("active")?$(".button.legend").removeClass("active"):$(".button.legend").addClass("active"),CoC.synergies.updateLegend()},CoC.synergies.updateLegend=function(){var t=$(".button.legend").hasClass("active"),e=$("#legend").outerWidth();$("#legend").css("left",t?0:-e).css("opacity",t?1:0)},CoC.synergies.canvasResize=function(){var t=window.innerWidth,e=window.innerHeight-33,r=window.devicePixelRatio||1;$("canvas").attr("width",t*r).attr("height",e*r).css("width",t).css("height",e),CoC.synergies.updateLegend()};var delayedResizeTimeout;$(window).on("resize",delayedResize),$(document).on("ready",delayedResize),CoC.synergies.canvasResize();var CoC=CoC||{};CoC.roster={},CoC.roster.initialize=function(){var t={};CoC.data.types.each(function(e,r){t[e.get("uid")]=r});var e=Backbone.Collection.extend({model:CoC.model.Champion,localStorage:new Backbone.LocalStorage("coc-roster"),sortBy:function(e,r){this._order="name"===e?[{field:"name",order:r?"asc":"desc"},{field:"stars",order:"desc"}]:"type"===e?[{field:"typeId",order:r?"asc":"desc",map:t},{field:"stars",order:"desc"},{field:"name",order:"asc"}]:"stars"===e?[{field:"stars",order:r?"desc":"asc"},{field:"typeId",order:"asc",map:t},{field:"name",order:"asc"}]:void 0,this.sort()},comparator:function(t,e){if(this._order)for(var r=0;r<this._order.length;r++){var o;if(o=this._order[r].map?this._order[r].map[t.get(this._order[r].field)]>this._order[r].map[e.get(this._order[r].field)]:t.get(this._order[r].field)>e.get(this._order[r].field))return"desc"!==this._order[r].order?1:-1;if(t.get(this._order[r].field)!==e.get(this._order[r].field))return"desc"!==this._order[r].order?-1:1}return 0}});CoC.data.roster=new e,CoC.data.roster.sortBy("stars"),CoC.data.roster.fetch(),CoC.data.roster.each(function(t){var e=t.update();e?t.save():t.destroy()})},CoC.roster.clear=function(){for(;CoC.data.roster.length>0;)CoC.data.roster.first().destroy()},CoC.roster.filtered=function(){var t={1:CoC.settings.getValue("build-filter-stars-1"),2:CoC.settings.getValue("build-filter-stars-2"),3:CoC.settings.getValue("build-filter-stars-3"),4:CoC.settings.getValue("build-filter-stars-4"),5:CoC.settings.getValue("build-filter-stars-5")};return CoC.data.roster.filter(function(e){return t[e.get("stars")]})},CoC.roster.csvExport=function(t,e){var r=[];return r.push(["Id","Stars","Rank","Level","Awakened"].join(",")),CoC.data.roster.each(function(t){r.push(['"'+t.get("uid")+'"',t.get("stars"),t.get("rank"),t.get("level"),t.get("awakened")].join(","))}),r.join(t||"\n")},CoC.roster.csvImport=function(t,e){for(var r=t.match(/[^\r\n]+/g),o=0;o<r.length;o++)if(0!==o||"Id,Stars,Rank,Level,Awakened"!==r[o].replace(/["]/g,"")){var n=r[o].split(",");if(5!=n.length)throw"Invalid roster CSV";var a=n[0].replace(/["]/g,"").toLowerCase(),i=parseInt(n[1].replace(/["]/g,""),10),s=parseInt(n[2].replace(/["]/g,""),10),f=parseInt(n[3].replace(/["]/g,""),10),c=parseInt(n[4].replace(/["]/g,""),10);if("string"!=typeof a||isNaN(i)||isNaN(s)||isNaN(f)||isNaN(c))console.error("Invalid line in "+e+":"+(o+1));else{var d=CoC.data.roster.findWhere({uid:a,stars:i});void 0===d&&(d=CoC.data.champions.findWhere({uid:a,stars:i}).clone(),CoC.data.roster.add(d)),void 0!==d?(d.set("rank",s),d.set("level",f),d.set("awakened",c),d.save()):console.error('Champion not found "'+a+'" in '+e+":"+(o+1))}}};var stars;(stars=checkStars(location.search,"roster"))!==!1?(CoC.roster.initialize(),$(".page").on("pageshow",function(){CoC.synergies.initialize(stars,!0)})):(stars=checkStars(location.search,"stars"))!==!1?$(".page").on("pageshow",function(){CoC.synergies.initialize(stars)}):location.search="?stars="+(stars||2);
//# sourceMappingURL=app-synergies.min.js.map